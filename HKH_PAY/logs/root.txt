00:38:02.627 WARN  i.n.c.DefaultChannelPipeline - An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception.
java.io.IOException: 연결이 상대편에 의해 끊어짐
	at sun.nio.ch.FileDispatcherImpl.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:39)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:379)
	at io.netty.buffer.PooledUnsafeDirectByteBuf.setBytes(PooledUnsafeDirectByteBuf.java:288)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1100)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:367)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:118)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:610)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:551)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:465)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:437)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:873)
	at java.lang.Thread.run(Thread.java:750)
00:38:04.115 INFO  c.p.l.v.m.VertXMessage - res : [Payment API []],[text/html]

00:38:04.439 INFO  c.p.l.v.m.VertXMessage - res : [Payment API []],[text/html]

00:38:04.919 WARN  i.n.c.DefaultChannelPipeline - An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception.
java.io.IOException: 연결이 상대편에 의해 끊어짐
	at sun.nio.ch.FileDispatcherImpl.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:39)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:379)
	at io.netty.buffer.PooledUnsafeDirectByteBuf.setBytes(PooledUnsafeDirectByteBuf.java:288)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1100)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:367)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:118)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:610)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:551)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:465)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:437)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:873)
	at java.lang.Thread.run(Thread.java:750)
00:38:05.084 INFO  c.p.p.m.Listener - ========== log() - HTTP_1_1,/favicon.ico,GET,167.94.138.45,,,Mozilla/5.0 (compatible; CensysInspect/1.1; +https://about.censys.io/)
00:38:05.084 INFO  c.p.p.m.Listener - ========== execute() - deny uri : /favicon.ico, ip : 167.94.138.45
00:38:05.085 DEBUG c.p.p.m.Listener - ========== execute() - Header Host,222.237.78.137:8091
00:38:05.085 DEBUG c.p.p.m.Listener - ========== execute() - Header User-Agent,Mozilla/5.0 (compatible; CensysInspect/1.1; +https://about.censys.io/)
00:38:05.086 DEBUG c.p.p.m.Listener - ========== execute() - Header Accept-Encoding,gzip
00:38:05.086 DEBUG c.p.p.m.Listener - ========== execute() - Header Connection,close
04:17:05.496 INFO  c.p.p.m.Listener - ========== apiHandler
04:17:05.497 INFO  c.p.p.m.Listener - ========== log() - HTTP_1_0,/api/comp/callBack,POST,172.226.94.47,application/json; charset=UTF-8,235,Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 KAKAOTALK 10.0.9
04:17:05.498 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== apiHandler() - BEGIN
04:17:05.498 INFO  c.p.l.v.m.VertXUtil - req : [{"mchtKey":"pk_855b-e6f739-735-5ecc5","amount":"90000","payerName":"이유진","payerTel":"01074967812","number":"4579733422402055","expiry":"2710","installment":"03","name":"디톡스 여우밸런스","authPw":"25","authDob":"850715"}],[235]
04:17:05.500 INFO  c.p.p.main.Api - ========== apiHandler() -  uri : /api/comp/callBack, method : POST, ip : 172.226.94.47
04:17:05.500 INFO  c.p.l.v.m.VertXUtil - req : [{"mchtKey":"pk_855b-e6f739-735-5ecc5","amount":"90000","payerName":"이유진","payerTel":"01074967812","number":"4579733422402055","expiry":"2710","installment":"03","name":"디톡스 여우밸런스","authPw":"25","authDob":"850715"}],[235]
04:17:05.501 INFO  c.p.p.u.APIComp - ========== compCallBack.compNo : null ========== APICompCallBack() BEGIN
04:17:05.501 INFO  c.p.p.u.APIComp - ========== compCallBack.compNo : null ========== APICompCallBack() 가맹점 조회
04:17:05.502 INFO  c.p.p.u.APIComp - ========== compCallBack.compNo : null ========== APICompCallBack() compCallBack.mchtKey : pk_855b-e6f739-735-5ecc5
04:17:05.502 DEBUG c.p.l.u.d.DBManager - query : [SELECT mchtId, payKey AS mchtKey, van, tmnId, semiAuth  FROM PG_MCHT_TMN WHERE  payKey = 'pk_855b-e6f739-735-5ecc5'] 
04:17:05.503 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
04:17:05.503 DEBUG c.p.p.u.APIComp - ========== compCallBack.compNo : null ========== APICompCallBack() : 구인증 결제 가맹정 : gms3982 | salesId IS NULL
04:17:05.503 DEBUG c.p.p.u.APIComp - ========== compCallBack.compNo : null ========== APICompCallBack() : 구인증 결제 가맹정 : gms3982 | mchtKey : pk_855b-e6f739-735-5ecc5 | semiAuth : Y
04:17:05.503 INFO  c.p.p.u.APIComp - ========== compCallBack.compNo : null ========== APICompCallBack() trackId : COMP10065152553018
04:17:05.503 INFO  c.p.p.u.APIComp - ========== compCallBack.compNo : null ========== APICompCallBack() body : 
{"amount":90000,"authPw":"25","trackId":"COMP10065152553018","compNo":null,"number":"4579733422402055","salesId":null,"price":null,"installment":"03","qty":null,"payerTel":"01074967812","name":"디톡스 여우밸런스","payerName":"이유진","authDob":"850715","expiry":"2710","compMember":null,"payerEmail":null}
04:17:05.503 INFO  c.p.p.u.APIComp - ========== compCallBack.compNo : null ========== APICompCallBack() EncData : 
pCp1sSzDlWEtx1e7tm9itvpK2fjnPLX3O+xn6bfNdPUhD4Bg1t70frayG/WvmQzWATqlWIr33RT1A5Rxspo/ivuB2L/5EK/jQZHUlofqhLztFnM72k3CUODcnYs7pyZ8tepkzhysXZo7wBbhZku1sqLLmLbBy40UY9b1Ify24Lls9WXYhrbpTyUN+rPcYVlV0FM4i1tM+32hXSAL7eIk69THAyD8C1p+NEcfv55eqAiFSwelRED2qlckaWD48LYLFYitqgjqwXjp4ov5rFmhRvJcUSAgdB8BQAs2QLj8Tr130ixoNr9fdxhQA4ATAXIAUw9BNTm4WsbdCY4TXkor+1R2Y80uwr1vUIRdE9TbdjWMYv1OXH132ObdwVn0EOM1DxvpRxNw9JZ/eGvmh8cA6cC9fEA8Wh904SsO6jewN2M=
04:17:05.503 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== sendMsgCallBack2()
04:17:05.503 INFO  c.p.l.v.m.VertXMessage - res : [{"code":"0000","status":"승인","msg":"데이터 암호화 성공","EncData":"pCp1sSzDlWEtx1e7tm9itvpK2fjnPLX3O+xn6bfNdPUhD4Bg1t70frayG/WvmQzWATqlWIr33RT1A5Rxspo/ivuB2L/5EK/jQZHUlofqhLztFnM72k3CUODcnYs7pyZ8tepkzhysXZo7wBbhZku1sqLLmLbBy40UY9b1Ify24Lls9WXYhrbpTyUN+rPcYVlV0FM4i1tM+32hXSAL7eIk69THAyD8C1p+NEcfv55eqAiFSwelRED2qlckaWD48LYLFYitqgjqwXjp4ov5rFmhRvJcUSAgdB8BQAs2QLj8Tr130ixoNr9fdxhQA4ATAXIAUw9BNTm4WsbdCY4TXkor+1R2Y80uwr1vUIRdE9TbdjWMYv1OXH132ObdwVn0EOM1DxvpRxNw9JZ/eGvmh8cA6cC9fEA8Wh904SsO6jewN2M\u003d"}],[application/json]

04:17:05.503 INFO  c.p.p.u.APIComp - ========== compCallBack.compNo : null ========== APICompCallBack() END
04:17:05.566 INFO  c.p.p.m.Listener - ========== apiHandler
04:17:05.566 INFO  c.p.p.m.Listener - ========== log() - HTTP_1_0,/api/comp/pay,POST,172.226.94.47,application/json; charset=UTF-8,479,Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 KAKAOTALK 10.0.9
04:17:05.566 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== apiHandler() - BEGIN
04:17:05.567 INFO  c.p.l.v.m.VertXUtil - req : [{"EncData":"pCp1sSzDlWEtx1e7tm9itvpK2fjnPLX3O+xn6bfNdPUhD4Bg1t70frayG/WvmQzWATqlWIr33RT1A5Rxspo/ivuB2L/5EK/jQZHUlofqhLztFnM72k3CUODcnYs7pyZ8tepkzhysXZo7wBbhZku1sqLLmLbBy40UY9b1Ify24Lls9WXYhrbpTyUN+rPcYVlV0FM4i1tM+32hXSAL7eIk69THAyD8C1p+NEcfv55eqAiFSwelRED2qlckaWD48LYLFYitqgjqwXjp4ov5rFmhRvJcUSAgdB8BQAs2QLj8Tr130ixoNr9fdxhQA4ATAXIAUw9BNTm4WsbdCY4TXkor+1R2Y80uwr1vUIRdE9TbdjWMYv1OXH132ObdwVn0EOM1DxvpRxNw9JZ/eGvmh8cA6cC9fEA8Wh904SsO6jewN2M=","mchtKey":"pk_855b-e6f739-735-5ecc5"}],[479]
04:17:05.568 INFO  c.p.p.main.Api - ========== apiHandler() -  uri : /api/comp/pay, method : POST, ip : 172.226.94.47
04:17:05.568 INFO  c.p.l.v.m.VertXUtil - req : [{"EncData":"pCp1sSzDlWEtx1e7tm9itvpK2fjnPLX3O+xn6bfNdPUhD4Bg1t70frayG/WvmQzWATqlWIr33RT1A5Rxspo/ivuB2L/5EK/jQZHUlofqhLztFnM72k3CUODcnYs7pyZ8tepkzhysXZo7wBbhZku1sqLLmLbBy40UY9b1Ify24Lls9WXYhrbpTyUN+rPcYVlV0FM4i1tM+32hXSAL7eIk69THAyD8C1p+NEcfv55eqAiFSwelRED2qlckaWD48LYLFYitqgjqwXjp4ov5rFmhRvJcUSAgdB8BQAs2QLj8Tr130ixoNr9fdxhQA4ATAXIAUw9BNTm4WsbdCY4TXkor+1R2Y80uwr1vUIRdE9TbdjWMYv1OXH132ObdwVn0EOM1DxvpRxNw9JZ/eGvmh8cA6cC9fEA8Wh904SsO6jewN2M=","mchtKey":"pk_855b-e6f739-735-5ecc5"}],[479]
04:17:05.569 INFO  c.p.p.u.APIComp - ========== APICompPay() BEGIN
04:17:05.569 INFO  c.p.p.u.APIComp - ========== APICompPay() 가맹점 조회
04:17:05.569 INFO  c.p.p.u.APIComp - ========== APICompPay() APICompPayAuth()mchtKeyy : pk_855b-e6f739-735-5ecc5
04:17:05.570 DEBUG c.p.l.u.d.DBManager - query : [SELECT mchtId, payKey AS mchtKey, van, tmnId FROM PG_MCHT_TMN WHERE  payKey = 'pk_855b-e6f739-735-5ecc5'] 
04:17:05.572 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
04:17:05.573 INFO  c.p.p.u.APIComp - ========== APICompPay() DEC : 
{"amount":90000,"authPw":"25","trackId":"COMP10065152553018","compNo":null,"number":"4579733422402055","salesId":null,"price":null,"installment":"03","qty":null,"payerTel":"01074967812","name":"디톡스 여우밸런스","payerName":"이유진","authDob":"850715","expiry":"2710","compMember":null,"payerEmail":null}
04:17:05.574 DEBUG c.p.p.u.APIComp - ========== compPay.mchtKey : pk_855b-e6f739-735-5ecc5 ========== APICompPay() 중복결제 조회
04:17:05.574 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_TRX_PAY A JOIN PG_TRX_REQ B ON A.trackId = B.trackId WHERE  A.trackId = 'COMP10065152553018'] 
04:17:05.575 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
04:17:05.578 INFO  c.p.p.u.APIComp - ========== compConnect BEGIN
04:17:05.578 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_COMPANY ORDER BY regDate DESC] 
04:17:05.580 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
04:17:05.580 INFO  c.p.p.u.APIComp - ========== compConnect PG URL : http://api.pairingpayments.net
04:17:05.581 INFO  c.p.p.u.APIComp - ========== compConnect paymentUrl : http://api.pairingpayments.net/api/pay
04:17:05.630 INFO  c.p.p.m.Listener - ========== apiHandler
04:17:05.631 INFO  c.p.p.m.Listener - ========== log() - HTTP_1_0,/api/pay,POST,222.237.78.137,application/json,837,Java/1.8.0_332
04:17:05.631 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== apiHandler() - BEGIN
04:17:05.632 INFO  c.p.l.v.m.VertXUtil - req : [{
  "pay": {
    "payerName": "이유진",
    "payerTel": "01074967812",
    "card": {
      "cardId": "",
      "number": "4579733422402055",
      "expiry": "2710",
      "cvv": "",
      "encTrackI": "",
      "encTrackII": "",
      "hash": "",
      "installment": 3,
      "bin": "",
      "last4": "",
      "issuer": "",
      "cardType": "",
      "acquirer": ""
    },
    "products": [
      {
        "prodId": "",
        "name": "디톡스 여우밸런스",
        "qty": 1,
        "price": 90000,
        "desc": "WEBPAY",
        "mchtId": ""
      }
    ],
    "mchtId": "gms3982",
    "trxId": "",
    "trxType": "COMPTR",
    "tmnId": "HKH000288",
    "trackId": "COMP10065152553018",
    "amount": 90000,
    "udf1": "",
    "udf2": "",
    "metadata": {
      "authPw": "25",
      "authDob": "850715"
    }
  }
}],[837]
04:17:05.634 INFO  c.p.p.main.Api - ========== apiHandler() -  uri : /api/pay, method : POST, ip : 222.237.78.137
04:17:05.635 INFO  c.p.l.v.m.VertXUtil - req : [{
  "pay": {
    "payerName": "이유진",
    "payerTel": "01074967812",
    "card": {
      "cardId": "",
      "number": "4579733422402055",
      "expiry": "2710",
      "cvv": "",
      "encTrackI": "",
      "encTrackII": "",
      "hash": "",
      "installment": 3,
      "bin": "",
      "last4": "",
      "issuer": "",
      "cardType": "",
      "acquirer": ""
    },
    "products": [
      {
        "prodId": "",
        "name": "디톡스 여우밸런스",
        "qty": 1,
        "price": 90000,
        "desc": "WEBPAY",
        "mchtId": ""
      }
    ],
    "mchtId": "gms3982",
    "trxId": "",
    "trxType": "COMPTR",
    "tmnId": "HKH000288",
    "trackId": "COMP10065152553018",
    "amount": 90000,
    "udf1": "",
    "udf2": "",
    "metadata": {
      "authPw": "25",
      "authDob": "850715"
    }
  }
}],[837]
04:17:05.636 DEBUG c.p.l.u.d.DBManager - query : [UPDATE PG_SEQUENCE SET processcnt=?,prevday=? WHERE  idx = 1] 
04:17:05.640 DEBUG c.p.lib.dao.DAO - elapsedTime : [4]msec
04:17:05.640 INFO  c.p.p.d.TrxDAO - ========== GetCurrentFromCalendar - 페어링 주문번호 DB 저장 OK : glb_processcnt = 0 |  glb_prevday = 20230228
04:17:05.640 INFO  c.p.p.main.Api - ========== apiHandler() ========== trixId : T230228000000
04:17:05.640 INFO  c.p.l.v.m.VertXUtil - req : [{
  "pay": {
    "payerName": "이유진",
    "payerTel": "01074967812",
    "card": {
      "cardId": "",
      "number": "4579733422402055",
      "expiry": "2710",
      "cvv": "",
      "encTrackI": "",
      "encTrackII": "",
      "hash": "",
      "installment": 3,
      "bin": "",
      "last4": "",
      "issuer": "",
      "cardType": "",
      "acquirer": ""
    },
    "products": [
      {
        "prodId": "",
        "name": "디톡스 여우밸런스",
        "qty": 1,
        "price": 90000,
        "desc": "WEBPAY",
        "mchtId": ""
      }
    ],
    "mchtId": "gms3982",
    "trxId": "",
    "trxType": "COMPTR",
    "tmnId": "HKH000288",
    "trackId": "COMP10065152553018",
    "amount": 90000,
    "udf1": "",
    "udf2": "",
    "metadata": {
      "authPw": "25",
      "authDob": "850715"
    }
  }
}],[837]
04:17:05.641 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== authorization() - BEGIN
04:17:05.641 INFO  c.p.p.main.Api - ========== authorization() - trxId : T230228000000 | mchtId : 
04:17:05.641 INFO  c.p.p.main.Api - ========== ========== ========== ==========  ========== syntax() - BEGIN
04:17:05.641 INFO  c.p.p.main.Api - ========== syntax() - trxId : T230228000000 | mchtId : 
04:17:05.641 INFO  c.p.p.main.Api - ========== ========== ========== ==========  ========== syntax() - END
04:17:05.642 INFO  c.p.p.d.TrxDAO - ========== getMchtTmnByPayKey() - payKey : pk_855b-e6f739-735-5ecc5
04:17:05.642 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_MCHT_TMN WHERE  payKey = 'pk_855b-e6f739-735-5ecc5' ORDER BY regDate DESC] 
04:17:05.642 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
04:17:05.642 INFO  c.p.p.d.TrxDAO - ========== getMchtByMchtId() - mchtId : gms3982
04:17:05.642 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_MCHT WHERE  mchtId = 'gms3982' ORDER BY regDate DESC] 
04:17:05.643 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
04:17:05.643 INFO  c.p.l.u.m.SharedCacheMap - cache timeout : key : PG_MCHT_cosmos 
04:17:05.643 INFO  c.p.p.d.TrxDAO - ========== getMchtMngByMchtId() - mchtId : gms3982
04:17:05.643 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_MCHT_MNG WHERE  mchtId = 'gms3982' ORDER BY regDate DESC] 
04:17:05.643 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
04:17:05.643 INFO  c.p.l.u.m.SharedCacheMap - cache timeout : key : PG_CODE_BIN_473867 
04:17:05.643 INFO  c.p.p.main.Api - sharedObject - mcht : 44
04:17:05.643 INFO  c.p.p.main.Api - sharedObject - mchtTmn : 24
04:17:05.643 INFO  c.p.p.main.Api - sharedObject - mchtMng : 52
04:17:05.644 INFO  c.p.p.d.TrxDAO - ========== getMchtTmnByVanIdx2() - vanIdx : 366 mchtId : gms3982
04:17:05.644 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM VW_MCHT_TMN WHERE  vanIdx = 366 AND mchtId = 'gms3982' ORDER BY regDate DESC] 
04:17:05.644 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
04:17:05.644 INFO  c.p.p.d.TrxDAO - ========== getVanByVanIdx2() - vanIdx : 366
04:17:05.644 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_VAN WHERE  idx = '366' ORDER BY regDate DESC] 
04:17:05.645 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
04:17:05.645 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== authorization() - END
04:17:05.645 INFO  c.p.p.main.Api - ========== apiHandler() - trxId : T230228000000 | mchtId : gms3982 - Proc process SET
04:17:05.645 INFO  c.p.p.p.ProcPay - ========== ========== ========== ========== ========== exec() - BEGIN 
04:17:05.645 INFO  c.p.p.p.ProcPay - ========== ========== ========== ========== ========== exec() - set2() - BEGIN 
04:17:05.645 INFO  c.p.p.p.ProcPay - ========== exec() - trxId : T230228000000 | mchtId : gms3982
04:17:05.645 INFO  c.p.p.p.ProcPay - ========== exec() - trxId : T230228000000 | mchtMap mchtId : gms3982
04:17:05.645 INFO  c.p.p.p.ProcPay - ========== ========== ========== ========== ========== valid2() - BEGIN 
04:17:05.645 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 - sharedMap - mchtId : gms3982
04:17:05.645 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 - sales_mchtTmnMap - vanIdx : 366
04:17:05.645 INFO  c.p.p.d.TrxDAO - ========== getVanByVanIdx2() - vanIdx : 366
04:17:05.645 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_VAN WHERE  idx = '366' ORDER BY regDate DESC] 
04:17:05.646 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
04:17:05.646 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 - vanMap - vanId  : wel000455m
04:17:05.646 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 - card_number : 4579733422402055
04:17:05.646 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 - card_bin : 457973
04:17:05.646 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 - card_last4 : 2055
04:17:05.646 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 - sharedMap mchtId : gms3982
04:17:05.646 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 - card_bin : 457973
04:17:05.646 INFO  c.p.p.d.TrxDAO - ========== getBinlockListCount() - name : gms3982 - bin : 457973
04:17:05.646 DEBUG c.p.l.u.d.DBManager - query : [SELECT COUNT(*) AS cnt FROM tbl_binlock_list WHERE  used = 1 AND d_tm IS NULL AND name = 'gms3982' AND bin = '457973'] 
04:17:05.647 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
04:17:05.647 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 - binBlockListCount_mchtId : 0
04:17:05.647 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 - request.pay.mchtId : gms3982
04:17:05.647 INFO  c.p.p.d.TrxDAO - ========== getBinlockListCount() - name : wel000455m - bin : 457973
04:17:05.647 DEBUG c.p.l.u.d.DBManager - query : [SELECT COUNT(*) AS cnt FROM tbl_binlock_list WHERE  used = 1 AND d_tm IS NULL AND name = 'wel000455m' AND bin = '457973'] 
04:17:05.647 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
04:17:05.647 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 - binBlockListCount_vanId : 0
04:17:05.647 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 - vanMap vanId : wel000455m
04:17:05.647 INFO  c.p.p.p.ProcPay - 
04:17:05.647 INFO  c.p.p.p.ProcPay - ========== valid2() - 카드별 PG상점ID 조회
04:17:05.648 INFO  c.p.p.d.TrxDAO - ========== getVanByBrand() - bin : 457973
04:17:05.648 DEBUG c.p.l.u.d.DBManager - query : [SELECT A.* FROM PG_VAN A JOIN (SELECT * FROM PG_CODE_BIN WHERE bin = 457973 GROUP BY brand) B ON A.brand = B.brand WHERE A.status = '사용' ] 
04:17:05.649 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
04:17:05.649 INFO  c.p.p.p.ProcPay - ========== valid2() - vanBrandMap NULL
04:17:05.649 INFO  c.p.p.p.ProcPay - 
04:17:05.649 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 - salesId IS NULL
04:17:05.649 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 | request.pay.payerTel : 01074967812
04:17:05.649 INFO  c.p.p.d.TrxDAO - ========== getMchtByMchtId2() - mchtId : gms3982
04:17:05.649 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_MCHT WHERE  mchtId = 'gms3982' ORDER BY regDate DESC] 
04:17:05.650 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
04:17:05.650 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 | 판매자, 구매자 전화번호 일치 체크 payerTel : 01074967812 | tel1 : 028551242
04:17:05.650 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 | 판매자, 구매자 전화번호 일치 체크 payerTel : 01074967812 | tel2 : 01048135261
04:17:05.650 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 | 판매자, 구매자 전화번호 일치 체크 payerTel : 01074967812 | ceoPhone : 01048135261
04:17:05.650 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 | 판매자, 구매자 전화번호 일치 체크 payerTel : 01074967812 | ceoTel : 01048135261
04:17:05.650 INFO  c.p.p.d.TrxDAO - ========== isDuplicatedTrackId() - 중복거래번호 확인 - mchtId : gms3982 - trackId : COMP10065152553018
04:17:05.650 INFO  c.p.p.d.TrxDAO - ========== insertTrxIOchk() - 중복거래번호 확인 - mchtId : gms3982
04:17:05.653 INFO  c.p.p.d.TrxDAO - ========== insertTrxIOchk() - set PG_TRX_IO : true
04:17:05.653 INFO  c.p.p.d.TrxDAO - ========== getDBIssuer() - bin : 457973
04:17:05.653 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_CODE_BIN WHERE  bin = '457973' ORDER BY regDate DESC] 
04:17:05.653 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
04:17:05.653 INFO  c.p.l.u.m.SharedCacheMap - cache timeout : key : PG_CODE_BIN_624331 
04:17:05.654 INFO  c.p.l.u.m.SharedCacheMap - cache timeout : key : VW_MCHT_TMN_IDX_cosmos_366 
04:17:05.654 INFO  c.p.p.d.TrxDAO - ========== insertCard() - cardId : card_419c-ac41c8-e21-35004 - value : Wn4yMwmxaxxArr/2pTdwOlc9/Bnc/bnHJGg+kGgaaLvf8Msmd0YtpegR3fly/M5w9uQPvcJGcYb1IsH8iv4uu2mHTT4ouhm9iCmWhkE2uq4rXgSLXRyxX4Ps7i04MGiXmfv0/iI0nPB9jAMDVtoVM58bwde531L69+LzEnGizGS2b4/1RnuxANnyop95+/vJpFMZafudmwQsosAYQd+AqTlcabGpXtTZtFyg7k8x/rw03AlRl4Z6F8CLXxdnXTOyXC5jt6ekYw92LlJr4aeHG56DO04bwSwIbiQ4YfOkCGu+wRLg1hoZrC2NQ+4kNflnKtTM+JksRbe9EVpTfHJ5u0fORKHz8fAY2+pOh8YZUlMvP4Dh0lO6cyLS7I9Slq72eUiUha9A7VmXLuqZr7POWzwKfOsC5lpGfQ9EkGqcPJ8=
04:17:05.654 DEBUG c.p.l.u.d.DBManager - query : [INSERT INTO PG_TRX_BOX (cardId,value) VALUES (?,?)] 
04:17:05.656 INFO  c.p.p.d.TrxDAO - ========== insertCard() - insertCard() - insert() : true
04:17:05.656 INFO  c.p.p.d.TrxDAO - ========== insertProduct() - prodId : pdt_f776-16ff59-353-c36f8 - size : 1
04:17:05.656 DEBUG c.p.l.u.d.DBManager - query : [INSERT INTO PG_TRX_PRD (price,qty,name,description,regDate,mchtId,prodId) VALUES (?,?,?,?,?,?,?)] 
04:17:05.658 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
04:17:05.658 INFO  c.p.p.d.TrxDAO - ========== insertProduct() - PG_TRX_PRD insert() : 1, true
04:17:05.659 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 | 구인증 가맹점 | semiAuth : Y
04:17:05.659 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 - 국민 - 할부 개월수 : 3
04:17:05.659 INFO  c.p.p.d.TrxDAO - ========== getMchtInstall() 가맹점 할부기간정보 조회 - mchtId : gms3982
04:17:05.659 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_MCHT_MNG WHERE  mchtId = 'gms3982' ORDER BY regDate DESC] 
04:17:05.659 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
04:17:05.659 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 - mcht maxInstall : 12 cardInstall : 12
04:17:05.659 INFO  c.p.p.d.TrxDAO - ========== getVanInstall() PG사 할부기간정보 조회 - mchtId : gms3982 | vanIdx : gms3982
04:17:05.659 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM VW_MCHT_TMN WHERE  mchtId = 'gms3982' AND webPay = '사용' AND vanIdx = 366 ORDER BY regDate DESC] 
04:17:05.660 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
04:17:05.660 INFO  c.p.p.p.ProcPay - ========== valid2() - 카드별 PG상점ID X
04:17:05.660 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 - van maxInstall : 12
04:17:05.660 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall01 : 12
04:17:05.660 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall02 : 12
04:17:05.660 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall03 : 12
04:17:05.661 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall04 : 12
04:17:05.661 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall05 : 12
04:17:05.661 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall06 : 12
04:17:05.661 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall07 : 12
04:17:05.661 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall08 : 12
04:17:05.661 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall09 : 12
04:17:05.661 INFO  c.p.p.p.ProcPay - ========== valid2() - request.pay.card.installment : 3
04:17:05.661 INFO  c.p.p.p.ProcPay - ========== 일시불, 할부결제 가능
04:17:05.661 INFO  c.p.p.d.TrxDAO - ========== getTrxTmnDaySum() 
04:17:05.661 DEBUG c.p.l.u.d.DBManager - query : [ SELECT IFNULL(SUM(amount),0) as tmnDailySum FROM PG_TRX_CAP  WHERE DATE_FORMAT(regDay,'%Y%m%d') = DATE_FORMAT(now(),'%Y%m%d') AND tmnId = 'HKH000288'] 
04:17:05.663 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
04:17:05.663 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 | tmnDailySum : 0
04:17:05.663 INFO  c.p.p.d.TrxDAO - ========== getTrxTmnMonthSum() 
04:17:05.663 DEBUG c.p.l.u.d.DBManager - query : [ SELECT IFNULL(SUM(amount),0) as tmnMonthSum FROM PG_TRX_CAP  WHERE DATE_FORMAT(regDay,'%Y%m') = DATE_FORMAT(now(),'%Y%m') AND tmnId = 'HKH000288' ] 
04:17:05.664 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
04:17:05.664 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 | limitMonth : 9346000
04:17:05.664 INFO  c.p.p.d.TrxDAO - ========== getTrxTmnYearSum() 
04:17:05.664 DEBUG c.p.l.u.d.DBManager - query : [ SELECT IFNULL(SUM(amount),0) as tmnYearSum FROM PG_TRX_CAP  WHERE DATE_FORMAT(regDay,'%Y') = DATE_FORMAT(now(),'%Y') AND tmnId = 'HKH000288' ] 
04:17:05.665 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
04:17:05.665 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 | limitYear : 21167000
04:17:05.986 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 | limitDay :  0 SUM : 0
04:17:05.987 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 | limitMonth :  300000000 SUM : 9346000
04:17:05.987 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 | limitYear :  0 SUM : 21167000
04:17:05.987 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 - 가맹점 건 한도 적용여부 limitOncePermit : N - 건 한도 limitOnce : 3000000
04:17:05.987 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 - 가맹점 일 한도 적용여부 limitDayPermit : N - 일 한도 limitDay : 0
04:17:05.987 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 - 가맹점 월 한도 적용여부 limitMonthPermit : H - 월 한도 limitMonth : 300000000
04:17:05.987 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000000 - 가맹점 년 한도 적용여부 limitYearPermit : N - 년 한도 limitYear : 0
04:17:05.987 INFO  c.p.p.d.TrxDAO - ========== getHighRiskTmn() - tmnId : HKH000288 - acquirer : 국민
04:17:05.987 DEBUG c.p.l.u.d.DBManager - query : [SELECT amount FROM PG_MCHT_TMN_HIGH_RISK WHERE  tmnId = 'HKH000288' AND acquirer LIKE '%국민%' ORDER BY regDate DESC LIMIT 1] 
04:17:05.987 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
04:17:05.987 INFO  c.p.p.p.ProcPay - ========== ========== ========== ========== ========== valid2() - END
04:17:05.988 INFO  c.p.p.p.ProcPay - ========== ========== ========== ========== ========== exec() - set2() - END 
04:17:05.988 INFO  c.p.p.p.ProcPay - ========== exec() - trxId : T230228000000 | mchtId : gms3982
04:17:05.988 INFO  c.p.p.d.TrxDAO - ========== insertTrxREQ() 
04:17:05.988 DEBUG c.p.l.u.d.DBManager - query : [INSERT INTO PG_TRX_REQ (last4,amount,tmnId,trackId,bin,cardType,regDate,trxType,prodId,acquirer,trxId,issuer,regDay,compNo,regTime,cardId,installment,payerTel,mchtId,payerName,payerEmail,compMember) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)] 
04:17:05.992 DEBUG c.p.lib.dao.DAO - elapsedTime : [4]msec
04:17:05.992 INFO  c.p.p.d.TrxDAO - ========== insertTrxREQ() - insert() : true, T230228000000
04:17:05.992 INFO  c.p.p.p.ProcPay - 
04:17:05.992 INFO  c.p.p.p.ProcPay - ========== exec() - 카드별 PG상점ID관리 조회
04:17:05.992 INFO  c.p.p.d.TrxDAO - ========== getVanByBrand() - bin : 457973
04:17:05.992 DEBUG c.p.l.u.d.DBManager - query : [SELECT A.* FROM PG_VAN A JOIN (SELECT * FROM PG_CODE_BIN WHERE bin = 457973 GROUP BY brand) B ON A.brand = B.brand WHERE A.status = '사용' ] 
04:17:05.993 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
04:17:05.993 INFO  c.p.p.p.ProcPay - ========== valid2() - vanBrandMap NULL
04:17:05.994 INFO  c.p.p.d.TrxDAO - ========== getMchtTmnByVanIdx() - vanIdx : 366 mchtId : gms3982
04:17:05.994 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM VW_MCHT_TMN WHERE  vanIdx = 366 AND mchtId = 'gms3982' ORDER BY regDate DESC] 
04:17:05.994 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
04:17:05.994 INFO  c.p.p.p.ProcPay - 
04:17:05.994 INFO  c.p.p.p.ProcPay - ========== exec() - van : WELCOME
04:17:05.994 INFO  c.p.p.p.ProcPay - ========== exec() - 9 van : WELCOME | check semiAuth : Y
04:17:05.994 INFO  c.p.p.p.ProcPay - ========== exec() - 10 WELCOME - 인증결제 X
04:17:05.994 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== ========== VAN SET 
04:17:05.995 INFO  c.p.p.v.Welcome - ========== ========== ========== Welcome VAN : WELCOME
04:17:05.995 INFO  c.p.p.v.Welcome - ========== ========== ========== Welcome MID vanId : wel000455m
04:17:05.995 INFO  c.p.p.v.Welcome - ========== ========== ========== Welcome APIKEY : 820b408bd2c1cfc4d59cb25203790f25
04:17:05.995 INFO  c.p.p.v.Welcome - ========== ========== ========== Welcome IV_VALUE : f9f4e1f06edc41bddd1eaedb75806668
04:17:05.995 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== ========== VAN SET 
04:17:05.995 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== ========== sales() - trxId : T230228000000 - WELCOME BEGIN
04:17:05.995 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== WELCOME VAN RESET
04:17:05.995 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000000 - WELCOME MAP_VAN : WELCOME
04:17:05.995 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000000 - WELCOME MAP_VAN_ID : wel000455m
04:17:05.995 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000000 - WELCOME MAP_APIKEY : 820b408bd2c1cfc4d59cb25203790f25
04:17:05.995 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000000 - WELCOME MAP_IV_VALUE : f9f4e1f06edc41bddd1eaedb75806668
04:17:05.995 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000000 - WELCOME cardNo : 4579733422402055
04:17:05.995 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000000 - WELCOME 웰컴 구인증 결제 payMedhod : CREDIT_OLDAUTH_API
04:17:05.995 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000000 - WELCOME value : wel000455mCREDIT_CARDCREDIT_OLDAUTH_APIT230228000000900001677525425995820b408bd2c1cfc4d59cb25203790f25
04:17:05.996 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000000 - WELCOME hash_value : dc2e6fa08b12e003938cb62228e9a9e5f93c5a397ce0dc76625bcd598329ec2b
04:17:05.996 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000000 - WELCOME authPw 구인증 비밀번호 : 25
04:17:05.996 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000000 - WELCOME authPw Enc : b217a7293ea970d36ddaae46c2ac1168
04:17:05.996 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000000 - WELCOME authDob 구인증 생년월일 : 850715
04:17:05.996 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000000 - WELCOME authDob Enc : 242d51d7dfa9dbf07b7cf70c233819e7
04:17:05.996 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000000 - WELCOME Req_Msg : {order_no=T230228000000, amount=90000, user_name=이유진, mid=wel000455m, echo=, pay_method=CREDIT_OLDAUTH_API, product_name=디톡스 여우밸런스, card_holder_ymd=242d51d7dfa9dbf07b7cf70c233819e7, card_pw=b217a7293ea970d36ddaae46c2ac1168, card_no=fe077c19f407689bbfd3f0a17ef2c202c61eedce8363049239c330f1535879d1, pay_type=CREDIT_CARD, card_sell_mm=03, millis=1677525425995, hash_value=dc2e6fa08b12e003938cb62228e9a9e5f93c5a397ce0dc76625bcd598329ec2b, card_expiry_ym=2710}
04:17:05.996 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000000 - WELCOME van : WELCOME - vanId : wel000455m
04:17:05.996 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== getJsonString() - jsonObject.toJSONString : {"order_no":"T230228000000","amount":"90000","user_name":"이유진","mid":"wel000455m","echo":"","pay_method":"CREDIT_OLDAUTH_API","product_name":"디톡스 여우밸런스","card_holder_ymd":"242d51d7dfa9dbf07b7cf70c233819e7","card_pw":"b217a7293ea970d36ddaae46c2ac1168","card_no":"fe077c19f407689bbfd3f0a17ef2c202c61eedce8363049239c330f1535879d1","pay_type":"CREDIT_CARD","card_sell_mm":"03","millis":"1677525425995","hash_value":"dc2e6fa08b12e003938cb62228e9a9e5f93c5a397ce0dc76625bcd598329ec2b","card_expiry_ym":"2710"}
04:17:05.996 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange() - BEGIN
04:17:05.996 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange() - url : https://payapi.welcomepayments.co.kr/api/payment/approval
04:17:05.997 DEBUG c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange() headers : [Content-Type:"application/json;charset=UTF-8"]
04:17:05.997 DEBUG o.s.w.c.RestTemplate - HTTP POST https://payapi.welcomepayments.co.kr/api/payment/approval
04:17:05.997 DEBUG o.s.w.c.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
04:17:05.998 DEBUG o.s.w.c.RestTemplate - Writing [{"order_no":"T230228000000","amount":"90000","user_name":"이유진","mid":"wel000455m","echo":"","pay_method":"CREDIT_OLDAUTH_API","product_name":"디톡스 여우밸런스","card_holder_ymd":"242d51d7dfa9dbf07b7cf70c233819e7","card_pw":"b217a7293ea970d36ddaae46c2ac1168","card_no":"fe077c19f407689bbfd3f0a17ef2c202c61eedce8363049239c330f1535879d1","pay_type":"CREDIT_CARD","card_sell_mm":"03","millis":"1677525425995","hash_value":"dc2e6fa08b12e003938cb62228e9a9e5f93c5a397ce0dc76625bcd598329ec2b","card_expiry_ym":"2710"}] as "application/json;charset=UTF-8"
04:17:08.579 DEBUG o.s.w.c.RestTemplate - Response 400 BAD_REQUEST
04:17:08.580 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000000 - WELCOME apiExchange() HttpClientErrorException : 400 : "{"result_code":"00A2","result_message":"카드번호 검증 오류"}"
04:17:08.580 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000000 - WELCOME apiExchange() HttpClientErrorException : getResponseBodyAsString : {"result_code":"00A2","result_message":"카드번호 검증 오류"}
04:17:08.580 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000000 - WELCOME apiExchange() HttpClientErrorException - statusCode : 00A2
04:17:08.580 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000000 - WELCOME apiExchange() HttpClientErrorException - statusMessage : 카드번호 검증 오류
04:17:08.580 INFO  c.p.p.p.ProcPay - ========== sharedMap issuer : 
04:17:08.580 INFO  c.p.p.p.ProcPay - ========== sharedMap cardAcquirer : 
04:17:08.580 INFO  c.p.p.p.ProcPay - ========== response issuer : 국민비자특별카드
04:17:08.580 INFO  c.p.p.p.ProcPay - ========== response acquirer : 국민
04:17:08.580 INFO  c.p.p.p.ProcPay - ========== 
04:17:08.581 INFO  c.p.p.p.ProcPay - ========== 비교결과 : 8232
04:17:08.581 INFO  c.p.p.p.ProcPay - ========== 리턴 카드사명 : [국민]
04:17:08.581 INFO  c.p.p.p.ProcPay - ========== 디비 카드사명 : code[020] cname[축협] calias[축협(농협)]
04:17:08.581 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -8576
04:17:08.581 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:08.581 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:08.581 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1317
04:17:08.581 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:08.581 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:08.581 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1821
04:17:08.581 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:08.581 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:08.581 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -8232
04:17:08.581 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:08.582 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:08.582 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -52554
04:17:08.582 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:08.582 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:08.582 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -6588
04:17:08.582 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:08.582 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:08.582 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -2741
04:17:08.582 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:08.582 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:08.582 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -2741
04:17:08.582 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:08.582 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:08.582 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -52551
04:17:08.583 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:08.583 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:08.583 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -2157
04:17:08.583 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:08.583 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:08.583 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1429
04:17:08.583 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:08.583 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:08.583 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -52551
04:17:08.583 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:08.583 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:08.583 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3277
04:17:08.583 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:08.583 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:08.583 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -2941
04:17:08.584 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:08.584 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:08.584 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -52554
04:17:08.584 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:08.584 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:08.584 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -2741
04:17:08.584 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:08.584 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:08.584 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1765
04:17:08.584 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:08.584 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:08.584 INFO  c.p.p.p.ProcPay - ========== 
04:17:08.584 INFO  c.p.p.p.ProcPay - ========== 비교결과 : 1987
04:17:08.584 INFO  c.p.p.p.ProcPay - ========== 리턴 카드사명 : [축협(농협)]
04:17:08.585 INFO  c.p.p.p.ProcPay - ========== 디비 카드사명 : code[016] cname[하나] calias[하나]
04:17:08.585 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -8575
04:17:08.585 INFO  c.p.p.p.ProcPay - ========== issuer : 하나카드
04:17:08.585 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나
04:17:08.585 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3164
04:17:08.585 INFO  c.p.p.p.ProcPay - ========== issuer : 하나카드
04:17:08.585 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나
04:17:08.585 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3304
04:17:08.585 INFO  c.p.p.p.ProcPay - ========== issuer : 하나카드
04:17:08.585 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나
04:17:08.585 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -5908
04:17:08.585 INFO  c.p.p.p.ProcPay - ========== issuer : 하나카드
04:17:08.585 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나
04:17:08.585 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -54541
04:17:08.585 INFO  c.p.p.p.ProcPay - ========== issuer : 하나카드
04:17:08.586 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나
04:17:08.586 INFO  c.p.p.p.ProcPay - ========== 
04:17:08.586 INFO  c.p.p.p.ProcPay - ========== 비교결과 : 4
04:17:08.586 INFO  c.p.p.p.ProcPay - ========== 리턴 카드사명 : [하나]
04:17:08.586 INFO  c.p.p.p.ProcPay - ========== 디비 카드사명 : code[003] cname[하나(외환)] calias[하나(외환)]
04:17:08.586 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -5276
04:17:08.586 INFO  c.p.p.p.ProcPay - ========== issuer : 하나(외환)카드
04:17:08.586 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나(외환)
04:17:08.586 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -4728
04:17:08.586 INFO  c.p.p.p.ProcPay - ========== issuer : 하나(외환)카드
04:17:08.586 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나(외환)
04:17:08.586 INFO  c.p.p.p.ProcPay - ========== 
04:17:08.586 INFO  c.p.p.p.ProcPay - ========== 비교결과 : 172
04:17:08.586 INFO  c.p.p.p.ProcPay - ========== 리턴 카드사명 : [하나(외환)]
04:17:08.586 INFO  c.p.p.p.ProcPay - ========== 디비 카드사명 : code[007] cname[현대] calias[현대]
04:17:08.586 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -7573
04:17:08.587 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.587 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.587 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -168
04:17:08.587 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.587 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.587 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -2159
04:17:08.587 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.587 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.587 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -10483
04:17:08.587 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.587 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.587 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3584
04:17:08.587 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.587 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.587 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3560
04:17:08.588 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.590 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.591 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -5460
04:17:08.591 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.591 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.591 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -144
04:17:08.591 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.591 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.591 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -144
04:17:08.591 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.591 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.591 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -144
04:17:08.591 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.591 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.591 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -144
04:17:08.591 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.592 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.592 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -144
04:17:08.592 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.592 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.592 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -54705
04:17:08.592 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.592 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.592 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3924
04:17:08.592 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.592 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.592 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3588
04:17:08.592 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.592 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.592 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3780
04:17:08.592 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.592 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.593 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -5436
04:17:08.593 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.593 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.593 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -54713
04:17:08.593 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.593 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.593 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1936
04:17:08.593 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.593 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.593 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1796
04:17:08.593 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.593 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.593 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -54708
04:17:08.593 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.593 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.594 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1936
04:17:08.594 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.594 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.594 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -54705
04:17:08.594 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.594 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.594 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -9440
04:17:08.594 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.594 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.594 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -9335
04:17:08.594 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:08.594 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:08.594 INFO  c.p.p.d.TrxDAO - ========== insertTrxRES() 
04:17:08.594 INFO  c.p.p.d.TrxDAO - ========== insertTrxRES() - van : WELCOME
04:17:08.594 INFO  c.p.p.d.TrxDAO - ========== insertTrxRES() - vanId : wel000455m
04:17:08.594 INFO  c.p.p.d.TrxDAO - ========== insertTrxRES() - salesId : null
04:17:08.595 DEBUG c.p.l.u.d.DBManager - query : [INSERT INTO PG_TRX_RES (resultCd,van,vanTrxId,authCd,regDate,pairingCid,trxId,resultMsg,regDay,compNo,pairingVtid,pairingRouteVan,vanId,regTime,vanResultMsg,vanResultCd,compMember) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)] 
04:17:08.599 DEBUG c.p.lib.dao.DAO - elapsedTime : [4]msec
04:17:08.599 INFO  c.p.p.d.TrxDAO - ========== insertTrxRES() - insert() : true
04:17:08.599 INFO  c.p.p.d.TrxDAO - ========== insertTrxERR() 
04:17:08.599 INFO  c.p.p.d.TrxDAO - INSERT INTO PG_TRX_ERR 
(trxId, trxType, mchtId, tmnId, trackId, 
payerName, payerEmail, payerTel, amount, installment, 
cardId, cardType, BIN, last4, issuer, 
acquirer, prodId, reqDay, reqTime, resultCd, 
resultMsg, van, vanId, vanTrxId, vanResultCd, 
vanResultMsg, cyrexVtid, cyrexRouteVan, cyrexCid, regDay, 
regTime, regDate, reqDate, compNo, compMember, 
semiAuth, salesId) 
 SELECT A.trxId, trxType, mchtId, tmnId, trackId, 
payerName, payerEmail, payerTel, amount, installment, 
cardId, cardType, bin, last4, issuer, 
acquirer, prodId, A.regDay, A.regTime, resultCd, 
resultMsg, van, vanId, vanTrxId, vanResultCd, 
vanResultMsg, B.pairingVtid, B.pairingRouteVan, B.pairingCid, B.regDay, 
B.regTime, B.regDate, A.regDate, A.compNo, A.compMember, 
A.semiAuth, A.salesId 
FROM PG_TRX_REQ A, PG_TRX_RES B 
WHERE A.trxId = B.trxId AND A.trxId = 'T230228000000'
04:17:08.599 DEBUG c.p.l.u.d.DBManager - query : [INSERT INTO PG_TRX_ERR 
(trxId, trxType, mchtId, tmnId, trackId, 
payerName, payerEmail, payerTel, amount, installment, 
cardId, cardType, BIN, last4, issuer, 
acquirer, prodId, reqDay, reqTime, resultCd, 
resultMsg, van, vanId, vanTrxId, vanResultCd, 
vanResultMsg, cyrexVtid, cyrexRouteVan, cyrexCid, regDay, 
regTime, regDate, reqDate, compNo, compMember, 
semiAuth, salesId) 
 SELECT A.trxId, trxType, mchtId, tmnId, trackId, 
payerName, payerEmail, payerTel, amount, installment, 
cardId, cardType, bin, last4, issuer, 
acquirer, prodId, A.regDay, A.regTime, resultCd, 
resultMsg, van, vanId, vanTrxId, vanResultCd, 
vanResultMsg, B.pairingVtid, B.pairingRouteVan, B.pairingCid, B.regDay, 
B.regTime, B.regDate, A.regDate, A.compNo, A.compMember, 
A.semiAuth, A.salesId 
FROM PG_TRX_REQ A, PG_TRX_RES B 
WHERE A.trxId = B.trxId AND A.trxId = 'T230228000000'] 
04:17:08.601 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
04:17:08.601 INFO  c.p.p.d.TrxDAO - ========== insertTrxERR() - update() : true
04:17:08.602 INFO  c.p.p.p.ProcPay - ========== LAST issuer : 현대카드
04:17:08.602 INFO  c.p.p.p.ThreadFDS - FDS non_detected
04:17:08.602 INFO  c.p.p.p.ProcPay - ========== LAST acquirer : 현대
04:17:08.602 INFO  c.p.p.p.ThreadFDS - FDS non_detected
04:17:08.602 INFO  c.p.p.proc.Proc - ========== ========== ========== ========== ========== setResponse2() - BEGIN
04:17:08.602 INFO  c.p.p.proc.Proc - ========== setResponse2() - trxId : T230228000000
04:17:08.602 INFO  c.p.p.proc.Proc - ========== setResponse2() - trxId : T230228000000 - updateTrxIO() 
04:17:08.602 INFO  c.p.p.d.TrxDAO - ========== updateTrxIO()
04:17:08.603 DEBUG c.p.l.u.d.DBManager - query : [UPDATE PG_TRX_IO SET resDay=?,resTime=?,resData=?,status=? WHERE  trxId = 'T230228000000'] 
04:17:08.605 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
04:17:08.605 INFO  c.p.p.d.TrxDAO - ========== set TRX_IO : true
04:17:08.605 INFO  c.p.p.proc.Proc - ========== setResponse2() - trxId : T230228000000 - updateTrxReq() 
04:17:08.605 INFO  c.p.p.d.TrxDAO - ========== setResponse2() - updateTrxReq() 
04:17:08.605 DEBUG c.p.l.u.d.DBManager - query : [UPDATE PG_TRX_REQ SET semiAuth=? WHERE  trxId = 'T230228000000'] 
04:17:08.607 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
04:17:08.607 INFO  c.p.p.d.TrxDAO - ========== set PG_TRX_REQ : true
04:17:08.607 INFO  c.p.p.proc.Proc - ========== setResponse2() - trxId : T230228000000 - updateTrxPAY() 
04:17:08.607 INFO  c.p.p.d.TrxDAO - ========== setResponse2() - updateTrxPay() 
04:17:08.608 DEBUG c.p.l.u.d.DBManager - query : [UPDATE PG_TRX_PAY SET semiAuth=? WHERE  trxId = 'T230228000000'] 
04:17:08.608 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
04:17:08.608 INFO  c.p.p.d.TrxDAO - ========== set PG_TRX_PAY : false
04:17:08.608 INFO  c.p.l.v.m.VertXMessage - res : [{
  "result": {
    "resultCd": "00A2",
    "resultMsg": "승인실패",
    "advanceMsg": "카드번호 검증 오류",
    "create": "20230228041708"
  },
  "pay": {
    "card": {
      "cardId": "card_419c-ac41c8-e21-35004",
      "installment": 3,
      "bin": "457973",
      "last4": "2055",
      "issuer": "현대카드",
      "cardType": "신용",
      "acquirer": "현대"
    },
    "trxDate": "20230228041705",
    "products": [
      {
        "prodId": "pdt_f776-16ff59-353-c36f8",
        "name": "디톡스 여우밸런스",
        "qty": 1,
        "price": 90000,
        "desc": "WEBPAY",
        "mchtId": ""
      }
    ],
    "mchtId": "gms3982",
    "trxId": "T230228000000",
    "trxType": "COMPTR",
    "tmnId": "HKH000288",
    "trackId": "COMP10065152553018",
    "amount": 90000,
    "udf1": "",
    "udf2": "",
    "metadata": {
      "cardAuth": "true",
      "authPw": "25",
      "authDob": "850715"
    }
  }
}],[application/json]

04:17:08.608 INFO  c.p.p.proc.Proc - estimatedTime : 2963
04:17:08.608 INFO  c.p.p.proc.Proc - ========== ========== ========== ========== ========== setResponse2() - END
04:17:08.608 INFO  c.p.p.p.ProcPay - ========== ========== ========== ========== ========== exec() - END 
04:17:08.608 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== apiHandler END
04:17:08.609 INFO  c.p.p.u.APIComp - ElapsedTime : 3028 msec
04:17:08.609 INFO  c.p.p.u.APIComp - LOCAL << PAYMENT [{
  "result": {
    "resultCd": "00A2",
    "resultMsg": "승인실패",
    "advanceMsg": "카드번호 검증 오류",
    "create": "20230228041708"
  },
  "pay": {
    "card": {
      "cardId": "card_419c-ac41c8-e21-35004",
      "installment": 3,
      "bin": "457973",
      "last4": "2055",
      "issuer": "현대카드",
      "cardType": "신용",
      "acquirer": "현대"
    },
    "trxDate": "20230228041705",
    "products": [
      {
        "prodId": "pdt_f776-16ff59-353-c36f8",
        "name": "디톡스 여우밸런스",
        "qty": 1,
        "price": 90000,
        "desc": "WEBPAY",
        "mchtId": ""
      }
    ],
    "mchtId": "gms3982",
    "trxId": "T230228000000",
    "trxType": "COMPTR",
    "tmnId": "HKH000288",
    "trackId": "COMP10065152553018",
    "amount": 90000,
    "udf1": "",
    "udf2": "",
    "metadata": {
      "cardAuth": "true",
      "authPw": "25",
      "authDob": "850715"
    }
  }
}
]
04:17:08.609 INFO  c.p.p.u.APIComp - ========== compConnect END
04:17:08.609 INFO  c.p.p.u.APIComp - ========== APICompPay() connjObj2 : 
{"resultCd":"00A2","advanceMsg":"카드번호 검증 오류","create":"20230228041708","resultMsg":"승인실패"}
04:17:08.609 INFO  c.p.p.u.APIComp - ========== APICompPay() connjObj2 resultCd : 00A2
04:17:08.609 INFO  c.p.p.u.APIComp - ========== APICompPay() connjObj2 resultMsg : 승인실패
04:17:08.609 INFO  c.p.p.u.APIComp - ========== APICompPay() connjObj2 advanceMsg : 카드번호 검증 오류
04:17:08.609 INFO  c.p.p.u.APIComp - ========== APICompPay() connjObj3 : {"amount":90000,"metadata":{"cardAuth":"true","authPw":"25","authDob":"850715"},"tmnId":"HKH000288","trackId":"COMP10065152553018","mchtId":"gms3982","trxType":"COMPTR","udf1":"","trxId":"T230228000000","udf2":"","card":{"last4":"2055","bin":"457973","cardId":"card_419c-ac41c8-e21-35004","installment":3,"cardType":"신용","acquirer":"현대","issuer":"현대카드"},"trxDate":"20230228041705","products":[{"price":90000,"qty":1,"name":"디톡스 여우밸런스","mchtId":"","prodId":"pdt_f776-16ff59-353-c36f8","desc":"WEBPAY"}]}
04:17:08.610 INFO  c.p.p.u.APIComp - ========== APICompPay() connjObj3 trxId : T230228000000
04:17:08.610 INFO  c.p.p.u.APIComp - ========== APICompPay() 전달데이터 조회 trackId : COMP10065152553018
04:17:08.610 DEBUG c.p.l.u.d.DBManager - query : [SELECT A.mchtId, A.trxId, C.vanTrxId, B.vanResultCd, B.vanResultMsg, C.authCd,
IFNULL(C.regDay, D.regDay) AS regDay, 
IFNULL(C.regTime, D.regTime) AS regTime, 
C.issuer, C.acquirer, A.bin, A.last4, A.installment, 
A.amount, A.payerName, G.name AS prdName, A.compNo, 
A.compMember, B.van, B.vanId 
 FROM PG_TRX_REQ A 
JOIN PG_TRX_RES B ON A.trxId = B.trxId 
LEFT JOIN PG_TRX_PAY C ON A.trxId = C.trxId 
LEFT JOIN PG_TRX_ERR D ON A.trxId = D.trxId 
LEFT JOIN PG_CODE_BIN E ON A.bin = E.bin 
LEFT JOIN PG_CODE F ON E.acquirer = F.codeName 
LEFT JOIN PG_TRX_PRD G ON A.prodId = G.prodId 
 WHERE  A.trackId = 'COMP10065152553018' GROUP BY A.trxId ORDER BY A.regDate DESC] 
04:17:08.611 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
04:17:08.612 INFO  c.p.p.u.APIComp - ========== issuer : 
04:17:08.612 INFO  c.p.p.u.APIComp - ========== acquirer : 
04:17:08.612 INFO  c.p.p.u.APIComp - ========== 최종 발급사 : 
04:17:08.612 INFO  c.p.p.u.APIComp - ========== 
04:17:08.612 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== sendMsgPayMap()
04:17:08.612 INFO  c.p.l.v.m.VertXMessage - res : [{"code":"00A2","status":"승인실패","msg":"카드번호 검증 오류","data":{"amount":"90000","authCd":"","prdName":"디톡스 여우밸런스","vanTime":"041708","acquirer":"","trxId":"T230228000000","issuer":"","compNo":"","installment":"03","payerName":"이유진","vanDay":"20230228","acquirerCode":"","cardNumber":"457973******2055"}}],[application/json]

04:17:08.612 DEBUG c.p.p.u.APIComp - 
04:17:08.612 INFO  c.p.p.u.APIComp - ========== APICompPay() END
04:17:32.526 INFO  c.p.p.m.Listener - ========== apiHandler
04:17:32.526 INFO  c.p.p.m.Listener - ========== log() - HTTP_1_0,/api/comp/callBack,POST,172.226.94.47,application/json; charset=UTF-8,235,Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 KAKAOTALK 10.0.9
04:17:32.527 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== apiHandler() - BEGIN
04:17:32.527 INFO  c.p.l.v.m.VertXUtil - req : [{"mchtKey":"pk_855b-e6f739-735-5ecc5","amount":"90000","payerName":"이유진","payerTel":"01074967812","number":"457973******2055","expiry":"2710","installment":"03","name":"디톡스 여우밸런스","authPw":"25","authDob":"850715"}],[235]
04:17:32.529 INFO  c.p.p.main.Api - ========== apiHandler() -  uri : /api/comp/callBack, method : POST, ip : 172.226.94.47
04:17:32.530 INFO  c.p.l.v.m.VertXUtil - req : [{"mchtKey":"pk_855b-e6f739-735-5ecc5","amount":"90000","payerName":"이유진","payerTel":"01074967812","number":"457973******2055","expiry":"2710","installment":"03","name":"디톡스 여우밸런스","authPw":"25","authDob":"850715"}],[235]
04:17:32.530 INFO  c.p.p.u.APIComp - ========== compCallBack.compNo : null ========== APICompCallBack() BEGIN
04:17:32.531 INFO  c.p.p.u.APIComp - ========== compCallBack.compNo : null ========== APICompCallBack() 가맹점 조회
04:17:32.531 INFO  c.p.p.u.APIComp - ========== compCallBack.compNo : null ========== APICompCallBack() compCallBack.mchtKey : pk_855b-e6f739-735-5ecc5
04:17:32.531 DEBUG c.p.l.u.d.DBManager - query : [SELECT mchtId, payKey AS mchtKey, van, tmnId, semiAuth  FROM PG_MCHT_TMN WHERE  payKey = 'pk_855b-e6f739-735-5ecc5'] 
04:17:32.531 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
04:17:32.532 DEBUG c.p.p.u.APIComp - ========== compCallBack.compNo : null ========== APICompCallBack() : 구인증 결제 가맹정 : gms3982 | salesId IS NULL
04:17:32.532 DEBUG c.p.p.u.APIComp - ========== compCallBack.compNo : null ========== APICompCallBack() : 구인증 결제 가맹정 : gms3982 | mchtKey : pk_855b-e6f739-735-5ecc5 | semiAuth : Y
04:17:32.532 INFO  c.p.p.u.APIComp - ========== compCallBack.compNo : null ========== APICompCallBack() trackId : COMP11742678167724
04:17:32.532 INFO  c.p.p.u.APIComp - ========== compCallBack.compNo : null ========== APICompCallBack() body : 
{"amount":90000,"authPw":"25","trackId":"COMP11742678167724","compNo":null,"number":"457973******2055","salesId":null,"price":null,"installment":"03","qty":null,"payerTel":"01074967812","name":"디톡스 여우밸런스","payerName":"이유진","authDob":"850715","expiry":"2710","compMember":null,"payerEmail":null}
04:17:32.532 INFO  c.p.p.u.APIComp - ========== compCallBack.compNo : null ========== APICompCallBack() EncData : 
pCp1sSzDlWEtx1e7tm9itvpK2fjnPLX3O+xn6bfNdPUCKmbV8QEsP2kxD3wFeJW+3HluE7mzaHzGE/D8dQeEeksmgHog1oGXbgj24H3eQ3UNfR9/Q7In/qI/pdVWqlsy6a0+wcUan1BQDoJWFu2YH9Tl1No7u1lfWjfb9ZOKTKtzzXVPcgppMqrE61HIHWjSgv3WV1iaakPqsXLNwBPMyBd6qRoEzyR4A0kg+QNQnQZ8HuuSfLyYKFmgD497cdeLeEk219qPE5xDFY0hgCdJK/lbG1RN034cbZhrUpj7nhWOxi78Z36+JJTiEEOsZ8XSu6YDqr3uFHX1zeQnC+yfEMDJcIN1XplRYfGPHrhRMt0qgXsV6OpRaS3AN6Zo99/+Sfy3sucUeC7L6t7m+ZyX5ec7lgyAB8lxMxTTfGquGd0=
04:17:32.532 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== sendMsgCallBack2()
04:17:32.532 INFO  c.p.l.v.m.VertXMessage - res : [{"code":"0000","status":"승인","msg":"데이터 암호화 성공","EncData":"pCp1sSzDlWEtx1e7tm9itvpK2fjnPLX3O+xn6bfNdPUCKmbV8QEsP2kxD3wFeJW+3HluE7mzaHzGE/D8dQeEeksmgHog1oGXbgj24H3eQ3UNfR9/Q7In/qI/pdVWqlsy6a0+wcUan1BQDoJWFu2YH9Tl1No7u1lfWjfb9ZOKTKtzzXVPcgppMqrE61HIHWjSgv3WV1iaakPqsXLNwBPMyBd6qRoEzyR4A0kg+QNQnQZ8HuuSfLyYKFmgD497cdeLeEk219qPE5xDFY0hgCdJK/lbG1RN034cbZhrUpj7nhWOxi78Z36+JJTiEEOsZ8XSu6YDqr3uFHX1zeQnC+yfEMDJcIN1XplRYfGPHrhRMt0qgXsV6OpRaS3AN6Zo99/+Sfy3sucUeC7L6t7m+ZyX5ec7lgyAB8lxMxTTfGquGd0\u003d"}],[application/json]

04:17:32.532 INFO  c.p.p.u.APIComp - ========== compCallBack.compNo : null ========== APICompCallBack() END
04:17:32.648 INFO  c.p.p.m.Listener - ========== apiHandler
04:17:32.648 INFO  c.p.p.m.Listener - ========== log() - HTTP_1_0,/api/comp/pay,POST,172.226.94.47,application/json; charset=UTF-8,479,Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 KAKAOTALK 10.0.9
04:17:32.649 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== apiHandler() - BEGIN
04:17:32.649 INFO  c.p.l.v.m.VertXUtil - req : [{"EncData":"pCp1sSzDlWEtx1e7tm9itvpK2fjnPLX3O+xn6bfNdPUCKmbV8QEsP2kxD3wFeJW+3HluE7mzaHzGE/D8dQeEeksmgHog1oGXbgj24H3eQ3UNfR9/Q7In/qI/pdVWqlsy6a0+wcUan1BQDoJWFu2YH9Tl1No7u1lfWjfb9ZOKTKtzzXVPcgppMqrE61HIHWjSgv3WV1iaakPqsXLNwBPMyBd6qRoEzyR4A0kg+QNQnQZ8HuuSfLyYKFmgD497cdeLeEk219qPE5xDFY0hgCdJK/lbG1RN034cbZhrUpj7nhWOxi78Z36+JJTiEEOsZ8XSu6YDqr3uFHX1zeQnC+yfEMDJcIN1XplRYfGPHrhRMt0qgXsV6OpRaS3AN6Zo99/+Sfy3sucUeC7L6t7m+ZyX5ec7lgyAB8lxMxTTfGquGd0=","mchtKey":"pk_855b-e6f739-735-5ecc5"}],[479]
04:17:32.651 INFO  c.p.p.main.Api - ========== apiHandler() -  uri : /api/comp/pay, method : POST, ip : 172.226.94.47
04:17:32.652 INFO  c.p.l.v.m.VertXUtil - req : [{"EncData":"pCp1sSzDlWEtx1e7tm9itvpK2fjnPLX3O+xn6bfNdPUCKmbV8QEsP2kxD3wFeJW+3HluE7mzaHzGE/D8dQeEeksmgHog1oGXbgj24H3eQ3UNfR9/Q7In/qI/pdVWqlsy6a0+wcUan1BQDoJWFu2YH9Tl1No7u1lfWjfb9ZOKTKtzzXVPcgppMqrE61HIHWjSgv3WV1iaakPqsXLNwBPMyBd6qRoEzyR4A0kg+QNQnQZ8HuuSfLyYKFmgD497cdeLeEk219qPE5xDFY0hgCdJK/lbG1RN034cbZhrUpj7nhWOxi78Z36+JJTiEEOsZ8XSu6YDqr3uFHX1zeQnC+yfEMDJcIN1XplRYfGPHrhRMt0qgXsV6OpRaS3AN6Zo99/+Sfy3sucUeC7L6t7m+ZyX5ec7lgyAB8lxMxTTfGquGd0=","mchtKey":"pk_855b-e6f739-735-5ecc5"}],[479]
04:17:32.652 INFO  c.p.p.u.APIComp - ========== APICompPay() BEGIN
04:17:32.653 INFO  c.p.p.u.APIComp - ========== APICompPay() 가맹점 조회
04:17:32.653 INFO  c.p.p.u.APIComp - ========== APICompPay() APICompPayAuth()mchtKeyy : pk_855b-e6f739-735-5ecc5
04:17:32.654 DEBUG c.p.l.u.d.DBManager - query : [SELECT mchtId, payKey AS mchtKey, van, tmnId FROM PG_MCHT_TMN WHERE  payKey = 'pk_855b-e6f739-735-5ecc5'] 
04:17:32.656 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
04:17:32.657 INFO  c.p.p.u.APIComp - ========== APICompPay() DEC : 
{"amount":90000,"authPw":"25","trackId":"COMP11742678167724","compNo":null,"number":"457973******2055","salesId":null,"price":null,"installment":"03","qty":null,"payerTel":"01074967812","name":"디톡스 여우밸런스","payerName":"이유진","authDob":"850715","expiry":"2710","compMember":null,"payerEmail":null}
04:17:32.658 DEBUG c.p.p.u.APIComp - ========== compPay.mchtKey : pk_855b-e6f739-735-5ecc5 ========== APICompPay() 중복결제 조회
04:17:32.658 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_TRX_PAY A JOIN PG_TRX_REQ B ON A.trackId = B.trackId WHERE  A.trackId = 'COMP11742678167724'] 
04:17:32.660 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
04:17:32.662 INFO  c.p.p.u.APIComp - ========== compConnect BEGIN
04:17:32.662 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_COMPANY ORDER BY regDate DESC] 
04:17:32.664 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
04:17:32.664 INFO  c.p.p.u.APIComp - ========== compConnect PG URL : http://api.pairingpayments.net
04:17:32.665 INFO  c.p.p.u.APIComp - ========== compConnect paymentUrl : http://api.pairingpayments.net/api/pay
04:17:32.667 INFO  c.p.p.m.Listener - ========== apiHandler
04:17:32.667 INFO  c.p.p.m.Listener - ========== log() - HTTP_1_0,/api/pay,POST,222.237.78.137,application/json,837,Java/1.8.0_332
04:17:32.668 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== apiHandler() - BEGIN
04:17:32.668 INFO  c.p.l.v.m.VertXUtil - req : [{
  "pay": {
    "payerName": "이유진",
    "payerTel": "01074967812",
    "card": {
      "cardId": "",
      "number": "457973******2055",
      "expiry": "2710",
      "cvv": "",
      "encTrackI": "",
      "encTrackII": "",
      "hash": "",
      "installment": 3,
      "bin": "",
      "last4": "",
      "issuer": "",
      "cardType": "",
      "acquirer": ""
    },
    "products": [
      {
        "prodId": "",
        "name": "디톡스 여우밸런스",
        "qty": 1,
        "price": 90000,
        "desc": "WEBPAY",
        "mchtId": ""
      }
    ],
    "mchtId": "gms3982",
    "trxId": "",
    "trxType": "COMPTR",
    "tmnId": "HKH000288",
    "trackId": "COMP11742678167724",
    "amount": 90000,
    "udf1": "",
    "udf2": "",
    "metadata": {
      "authPw": "25",
      "authDob": "850715"
    }
  }
}],[837]
04:17:32.671 INFO  c.p.p.main.Api - ========== apiHandler() -  uri : /api/pay, method : POST, ip : 222.237.78.137
04:17:32.671 INFO  c.p.l.v.m.VertXUtil - req : [{
  "pay": {
    "payerName": "이유진",
    "payerTel": "01074967812",
    "card": {
      "cardId": "",
      "number": "457973******2055",
      "expiry": "2710",
      "cvv": "",
      "encTrackI": "",
      "encTrackII": "",
      "hash": "",
      "installment": 3,
      "bin": "",
      "last4": "",
      "issuer": "",
      "cardType": "",
      "acquirer": ""
    },
    "products": [
      {
        "prodId": "",
        "name": "디톡스 여우밸런스",
        "qty": 1,
        "price": 90000,
        "desc": "WEBPAY",
        "mchtId": ""
      }
    ],
    "mchtId": "gms3982",
    "trxId": "",
    "trxType": "COMPTR",
    "tmnId": "HKH000288",
    "trackId": "COMP11742678167724",
    "amount": 90000,
    "udf1": "",
    "udf2": "",
    "metadata": {
      "authPw": "25",
      "authDob": "850715"
    }
  }
}],[837]
04:17:32.674 DEBUG c.p.l.u.d.DBManager - query : [UPDATE PG_SEQUENCE SET processcnt=?,prevday=? WHERE  idx = 1] 
04:17:32.679 DEBUG c.p.lib.dao.DAO - elapsedTime : [5]msec
04:17:32.679 INFO  c.p.p.d.TrxDAO - ========== GetCurrentFromCalendar - 페어링 주문번호 DB 저장 OK : glb_processcnt = 1 |  glb_prevday = 20230228
04:17:32.680 INFO  c.p.p.main.Api - ========== apiHandler() ========== trixId : T230228000001
04:17:32.680 INFO  c.p.l.v.m.VertXUtil - req : [{
  "pay": {
    "payerName": "이유진",
    "payerTel": "01074967812",
    "card": {
      "cardId": "",
      "number": "457973******2055",
      "expiry": "2710",
      "cvv": "",
      "encTrackI": "",
      "encTrackII": "",
      "hash": "",
      "installment": 3,
      "bin": "",
      "last4": "",
      "issuer": "",
      "cardType": "",
      "acquirer": ""
    },
    "products": [
      {
        "prodId": "",
        "name": "디톡스 여우밸런스",
        "qty": 1,
        "price": 90000,
        "desc": "WEBPAY",
        "mchtId": ""
      }
    ],
    "mchtId": "gms3982",
    "trxId": "",
    "trxType": "COMPTR",
    "tmnId": "HKH000288",
    "trackId": "COMP11742678167724",
    "amount": 90000,
    "udf1": "",
    "udf2": "",
    "metadata": {
      "authPw": "25",
      "authDob": "850715"
    }
  }
}],[837]
04:17:32.681 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== authorization() - BEGIN
04:17:32.682 INFO  c.p.p.main.Api - ========== authorization() - trxId : T230228000001 | mchtId : 
04:17:32.683 INFO  c.p.p.main.Api - ========== ========== ========== ==========  ========== syntax() - BEGIN
04:17:32.683 INFO  c.p.p.main.Api - ========== syntax() - trxId : T230228000001 | mchtId : 
04:17:32.686 INFO  c.p.p.main.Api - ========== ========== ========== ==========  ========== syntax() - END
04:17:32.687 INFO  c.p.p.d.TrxDAO - ========== getMchtTmnByPayKey() - payKey : pk_855b-e6f739-735-5ecc5
04:17:32.688 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_MCHT_TMN WHERE  payKey = 'pk_855b-e6f739-735-5ecc5' ORDER BY regDate DESC] 
04:17:32.691 DEBUG c.p.lib.dao.DAO - elapsedTime : [3]msec
04:17:32.691 INFO  c.p.p.d.TrxDAO - ========== getMchtByMchtId() - mchtId : gms3982
04:17:32.692 INFO  c.p.p.d.TrxDAO - ========== getMchtMngByMchtId() - mchtId : gms3982
04:17:32.692 INFO  c.p.p.main.Api - sharedObject - mcht : 44
04:17:32.693 INFO  c.p.p.main.Api - sharedObject - mchtTmn : 24
04:17:32.693 INFO  c.p.p.main.Api - sharedObject - mchtMng : 52
04:17:32.694 INFO  c.p.p.d.TrxDAO - ========== getMchtTmnByVanIdx2() - vanIdx : 366 mchtId : gms3982
04:17:32.694 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM VW_MCHT_TMN WHERE  vanIdx = 366 AND mchtId = 'gms3982' ORDER BY regDate DESC] 
04:17:32.697 DEBUG c.p.lib.dao.DAO - elapsedTime : [3]msec
04:17:32.697 INFO  c.p.p.d.TrxDAO - ========== getVanByVanIdx2() - vanIdx : 366
04:17:32.698 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_VAN WHERE  idx = '366' ORDER BY regDate DESC] 
04:17:32.699 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
04:17:32.700 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== authorization() - END
04:17:32.700 INFO  c.p.p.main.Api - ========== apiHandler() - trxId : T230228000001 | mchtId : gms3982 - Proc process SET
04:17:32.701 INFO  c.p.p.p.ProcPay - ========== ========== ========== ========== ========== exec() - BEGIN 
04:17:32.701 INFO  c.p.p.p.ProcPay - ========== ========== ========== ========== ========== exec() - set2() - BEGIN 
04:17:32.702 INFO  c.p.p.p.ProcPay - ========== exec() - trxId : T230228000001 | mchtId : gms3982
04:17:32.702 INFO  c.p.p.p.ProcPay - ========== exec() - trxId : T230228000001 | mchtMap mchtId : gms3982
04:17:32.703 INFO  c.p.p.p.ProcPay - ========== ========== ========== ========== ========== valid2() - BEGIN 
04:17:32.703 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 - sharedMap - mchtId : gms3982
04:17:32.704 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 - sales_mchtTmnMap - vanIdx : 366
04:17:32.704 INFO  c.p.p.d.TrxDAO - ========== getVanByVanIdx2() - vanIdx : 366
04:17:32.705 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_VAN WHERE  idx = '366' ORDER BY regDate DESC] 
04:17:32.706 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
04:17:32.706 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 - vanMap - vanId  : wel000455m
04:17:32.707 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 - card_number : 457973******2055
04:17:32.707 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 - card_bin : 457973
04:17:32.707 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 - card_last4 : 2055
04:17:32.708 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 - sharedMap mchtId : gms3982
04:17:32.708 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 - card_bin : 457973
04:17:32.708 INFO  c.p.p.d.TrxDAO - ========== getBinlockListCount() - name : gms3982 - bin : 457973
04:17:32.709 DEBUG c.p.l.u.d.DBManager - query : [SELECT COUNT(*) AS cnt FROM tbl_binlock_list WHERE  used = 1 AND d_tm IS NULL AND name = 'gms3982' AND bin = '457973'] 
04:17:32.709 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
04:17:32.710 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 - binBlockListCount_mchtId : 0
04:17:32.710 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 - request.pay.mchtId : gms3982
04:17:32.711 INFO  c.p.p.d.TrxDAO - ========== getBinlockListCount() - name : wel000455m - bin : 457973
04:17:32.711 DEBUG c.p.l.u.d.DBManager - query : [SELECT COUNT(*) AS cnt FROM tbl_binlock_list WHERE  used = 1 AND d_tm IS NULL AND name = 'wel000455m' AND bin = '457973'] 
04:17:32.712 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
04:17:32.712 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 - binBlockListCount_vanId : 0
04:17:32.712 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 - vanMap vanId : wel000455m
04:17:32.712 INFO  c.p.p.p.ProcPay - 
04:17:32.713 INFO  c.p.p.p.ProcPay - ========== valid2() - 카드별 PG상점ID 조회
04:17:32.713 INFO  c.p.p.d.TrxDAO - ========== getVanByBrand() - bin : 457973
04:17:32.713 DEBUG c.p.l.u.d.DBManager - query : [SELECT A.* FROM PG_VAN A JOIN (SELECT * FROM PG_CODE_BIN WHERE bin = 457973 GROUP BY brand) B ON A.brand = B.brand WHERE A.status = '사용' ] 
04:17:32.717 DEBUG c.p.lib.dao.DAO - elapsedTime : [4]msec
04:17:32.717 INFO  c.p.p.p.ProcPay - ========== valid2() - vanBrandMap NULL
04:17:32.717 INFO  c.p.p.p.ProcPay - 
04:17:32.717 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 - salesId IS NULL
04:17:32.717 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 | request.pay.payerTel : 01074967812
04:17:32.718 INFO  c.p.p.d.TrxDAO - ========== getMchtByMchtId2() - mchtId : gms3982
04:17:32.718 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_MCHT WHERE  mchtId = 'gms3982' ORDER BY regDate DESC] 
04:17:32.718 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
04:17:32.719 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 | 판매자, 구매자 전화번호 일치 체크 payerTel : 01074967812 | tel1 : 028551242
04:17:32.719 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 | 판매자, 구매자 전화번호 일치 체크 payerTel : 01074967812 | tel2 : 01048135261
04:17:32.719 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 | 판매자, 구매자 전화번호 일치 체크 payerTel : 01074967812 | ceoPhone : 01048135261
04:17:32.719 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 | 판매자, 구매자 전화번호 일치 체크 payerTel : 01074967812 | ceoTel : 01048135261
04:17:32.719 INFO  c.p.p.d.TrxDAO - ========== isDuplicatedTrackId() - 중복거래번호 확인 - mchtId : gms3982 - trackId : COMP11742678167724
04:17:32.720 INFO  c.p.p.d.TrxDAO - ========== insertTrxIOchk() - 중복거래번호 확인 - mchtId : gms3982
04:17:32.723 INFO  c.p.p.d.TrxDAO - ========== insertTrxIOchk() - set PG_TRX_IO : true
04:17:32.723 INFO  c.p.p.d.TrxDAO - ========== getDBIssuer() - bin : 457973
04:17:32.724 INFO  c.p.p.d.TrxDAO - ========== insertCard() - cardId : card_4370-e7872a-dbb-4ee7b - value : Wn4yMwmxaxxArr/2pTdwOrBNf0SU6fGOwwabn6DQALwks4ohUR3IGEcNwL+g+CJsxtcHKbZBWSg9VCZxPLsJJmmHTT4ouhm9iCmWhkE2uq4rXgSLXRyxX4Ps7i04MGiXmfv0/iI0nPB9jAMDVtoVM58bwde531L69+LzEnGizGTks+LE/TRLO/qnbiIyvR2TdU9QFcE0WnOm/PTAlUDTgULe0mSP3jDFIYzxxeQibYidrDTi2IH4H2Ph6UBEX3wz5Kz0b/Rf3EsjFFSVwLit/Z6DO04bwSwIbiQ4YfOkCGu+wRLg1hoZrC2NQ+4kNflnKtTM+JksRbe9EVpTfHJ5u0fORKHz8fAY2+pOh8YZUlMvP4Dh0lO6cyLS7I9Slq72eUiUha9A7VmXLuqZr7POWzwKfOsC5lpGfQ9EkGqcPJ8=
04:17:32.726 INFO  c.p.p.d.TrxDAO - ========== insertCard() - insertCard() - insert() : true
04:17:32.726 INFO  c.p.p.d.TrxDAO - ========== insertProduct() - prodId : pdt_5b56-348bec-663-1c4c8 - size : 1
04:17:32.729 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
04:17:32.729 INFO  c.p.p.d.TrxDAO - ========== insertProduct() - PG_TRX_PRD insert() : 1, true
04:17:32.729 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 | 구인증 가맹점 | semiAuth : Y
04:17:32.730 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 - 국민 - 할부 개월수 : 3
04:17:32.730 INFO  c.p.p.d.TrxDAO - ========== getMchtInstall() 가맹점 할부기간정보 조회 - mchtId : gms3982
04:17:32.730 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_MCHT_MNG WHERE  mchtId = 'gms3982' ORDER BY regDate DESC] 
04:17:32.730 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
04:17:32.731 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 - mcht maxInstall : 12 cardInstall : 12
04:17:32.731 INFO  c.p.p.d.TrxDAO - ========== getVanInstall() PG사 할부기간정보 조회 - mchtId : gms3982 | vanIdx : gms3982
04:17:32.731 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM VW_MCHT_TMN WHERE  mchtId = 'gms3982' AND webPay = '사용' AND vanIdx = 366 ORDER BY regDate DESC] 
04:17:32.732 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
04:17:32.732 INFO  c.p.p.p.ProcPay - ========== valid2() - 카드별 PG상점ID X
04:17:32.732 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 - van maxInstall : 12
04:17:32.732 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall01 : 12
04:17:32.733 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall02 : 12
04:17:32.733 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall03 : 12
04:17:32.733 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall04 : 12
04:17:32.733 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall05 : 12
04:17:32.733 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall06 : 12
04:17:32.733 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall07 : 12
04:17:32.734 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall08 : 12
04:17:32.734 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall09 : 12
04:17:32.734 INFO  c.p.p.p.ProcPay - ========== valid2() - request.pay.card.installment : 3
04:17:32.734 INFO  c.p.p.p.ProcPay - ========== 일시불, 할부결제 가능
04:17:32.734 INFO  c.p.p.d.TrxDAO - ========== getTrxTmnDaySum() 
04:17:32.734 DEBUG c.p.l.u.d.DBManager - query : [ SELECT IFNULL(SUM(amount),0) as tmnDailySum FROM PG_TRX_CAP  WHERE DATE_FORMAT(regDay,'%Y%m%d') = DATE_FORMAT(now(),'%Y%m%d') AND tmnId = 'HKH000288'] 
04:17:32.736 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
04:17:32.736 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 | tmnDailySum : 0
04:17:32.736 INFO  c.p.p.d.TrxDAO - ========== getTrxTmnMonthSum() 
04:17:32.736 DEBUG c.p.l.u.d.DBManager - query : [ SELECT IFNULL(SUM(amount),0) as tmnMonthSum FROM PG_TRX_CAP  WHERE DATE_FORMAT(regDay,'%Y%m') = DATE_FORMAT(now(),'%Y%m') AND tmnId = 'HKH000288' ] 
04:17:32.737 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
04:17:32.738 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 | limitMonth : 9346000
04:17:32.738 INFO  c.p.p.d.TrxDAO - ========== getTrxTmnYearSum() 
04:17:32.738 DEBUG c.p.l.u.d.DBManager - query : [ SELECT IFNULL(SUM(amount),0) as tmnYearSum FROM PG_TRX_CAP  WHERE DATE_FORMAT(regDay,'%Y') = DATE_FORMAT(now(),'%Y') AND tmnId = 'HKH000288' ] 
04:17:32.739 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
04:17:32.739 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 | limitYear : 21167000
04:17:33.067 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 | limitDay :  0 SUM : 0
04:17:33.068 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 | limitMonth :  300000000 SUM : 9346000
04:17:33.068 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 | limitYear :  0 SUM : 21167000
04:17:33.068 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 - 가맹점 건 한도 적용여부 limitOncePermit : N - 건 한도 limitOnce : 3000000
04:17:33.068 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 - 가맹점 일 한도 적용여부 limitDayPermit : N - 일 한도 limitDay : 0
04:17:33.068 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 - 가맹점 월 한도 적용여부 limitMonthPermit : H - 월 한도 limitMonth : 300000000
04:17:33.068 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000001 - 가맹점 년 한도 적용여부 limitYearPermit : N - 년 한도 limitYear : 0
04:17:33.068 INFO  c.p.p.d.TrxDAO - ========== getHighRiskTmn() - tmnId : HKH000288 - acquirer : 국민
04:17:33.068 DEBUG c.p.l.u.d.DBManager - query : [SELECT amount FROM PG_MCHT_TMN_HIGH_RISK WHERE  tmnId = 'HKH000288' AND acquirer LIKE '%국민%' ORDER BY regDate DESC LIMIT 1] 
04:17:33.068 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
04:17:33.069 INFO  c.p.p.p.ProcPay - ========== ========== ========== ========== ========== valid2() - END
04:17:33.069 INFO  c.p.p.p.ProcPay - ========== ========== ========== ========== ========== exec() - set2() - END 
04:17:33.069 INFO  c.p.p.p.ProcPay - ========== exec() - trxId : T230228000001 | mchtId : gms3982
04:17:33.069 INFO  c.p.p.d.TrxDAO - ========== insertTrxREQ() 
04:17:33.069 DEBUG c.p.l.u.d.DBManager - query : [INSERT INTO PG_TRX_REQ (last4,amount,tmnId,trackId,bin,cardType,regDate,trxType,prodId,acquirer,trxId,issuer,regDay,compNo,regTime,cardId,installment,payerTel,mchtId,payerName,payerEmail,compMember) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)] 
04:17:33.073 DEBUG c.p.lib.dao.DAO - elapsedTime : [4]msec
04:17:33.073 INFO  c.p.p.d.TrxDAO - ========== insertTrxREQ() - insert() : true, T230228000001
04:17:33.073 INFO  c.p.p.p.ProcPay - 
04:17:33.073 INFO  c.p.p.p.ProcPay - ========== exec() - 카드별 PG상점ID관리 조회
04:17:33.073 INFO  c.p.p.d.TrxDAO - ========== getVanByBrand() - bin : 457973
04:17:33.074 DEBUG c.p.l.u.d.DBManager - query : [SELECT A.* FROM PG_VAN A JOIN (SELECT * FROM PG_CODE_BIN WHERE bin = 457973 GROUP BY brand) B ON A.brand = B.brand WHERE A.status = '사용' ] 
04:17:33.075 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
04:17:33.075 INFO  c.p.p.p.ProcPay - ========== valid2() - vanBrandMap NULL
04:17:33.075 INFO  c.p.p.d.TrxDAO - ========== getMchtTmnByVanIdx() - vanIdx : 366 mchtId : gms3982
04:17:33.075 INFO  c.p.p.p.ProcPay - 
04:17:33.075 INFO  c.p.p.p.ProcPay - ========== exec() - van : WELCOME
04:17:33.075 INFO  c.p.p.p.ProcPay - ========== exec() - 9 van : WELCOME | check semiAuth : Y
04:17:33.075 INFO  c.p.p.p.ProcPay - ========== exec() - 10 WELCOME - 인증결제 X
04:17:33.075 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== ========== VAN SET 
04:17:33.075 INFO  c.p.p.v.Welcome - ========== ========== ========== Welcome VAN : WELCOME
04:17:33.076 INFO  c.p.p.v.Welcome - ========== ========== ========== Welcome MID vanId : wel000455m
04:17:33.076 INFO  c.p.p.v.Welcome - ========== ========== ========== Welcome APIKEY : 820b408bd2c1cfc4d59cb25203790f25
04:17:33.076 INFO  c.p.p.v.Welcome - ========== ========== ========== Welcome IV_VALUE : f9f4e1f06edc41bddd1eaedb75806668
04:17:33.076 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== ========== VAN SET 
04:17:33.076 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== ========== sales() - trxId : T230228000001 - WELCOME BEGIN
04:17:33.076 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== WELCOME VAN RESET
04:17:33.076 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000001 - WELCOME MAP_VAN : WELCOME
04:17:33.076 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000001 - WELCOME MAP_VAN_ID : wel000455m
04:17:33.076 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000001 - WELCOME MAP_APIKEY : 820b408bd2c1cfc4d59cb25203790f25
04:17:33.076 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000001 - WELCOME MAP_IV_VALUE : f9f4e1f06edc41bddd1eaedb75806668
04:17:33.076 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000001 - WELCOME cardNo : 457973******2055
04:17:33.076 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000001 - WELCOME 웰컴 구인증 결제 payMedhod : CREDIT_OLDAUTH_API
04:17:33.077 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000001 - WELCOME value : wel000455mCREDIT_CARDCREDIT_OLDAUTH_APIT230228000001900001677525453076820b408bd2c1cfc4d59cb25203790f25
04:17:33.077 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000001 - WELCOME hash_value : dcfb868443af6742ac1d03b5bfd43b7656967c693866864aaba5f8be3c8cc7da
04:17:33.077 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000001 - WELCOME authPw 구인증 비밀번호 : 25
04:17:33.077 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000001 - WELCOME authPw Enc : b217a7293ea970d36ddaae46c2ac1168
04:17:33.077 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000001 - WELCOME authDob 구인증 생년월일 : 850715
04:17:33.077 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000001 - WELCOME authDob Enc : 242d51d7dfa9dbf07b7cf70c233819e7
04:17:33.077 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000001 - WELCOME Req_Msg : {order_no=T230228000001, amount=90000, user_name=이유진, mid=wel000455m, echo=, pay_method=CREDIT_OLDAUTH_API, product_name=디톡스 여우밸런스, card_holder_ymd=242d51d7dfa9dbf07b7cf70c233819e7, card_pw=b217a7293ea970d36ddaae46c2ac1168, card_no=cbb419ed6a955c7aab6aa79f0eeaefa9a2d31d094b5d0adfe1d792eaca897266, pay_type=CREDIT_CARD, card_sell_mm=03, millis=1677525453076, hash_value=dcfb868443af6742ac1d03b5bfd43b7656967c693866864aaba5f8be3c8cc7da, card_expiry_ym=2710}
04:17:33.077 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000001 - WELCOME van : WELCOME - vanId : wel000455m
04:17:33.077 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== getJsonString() - jsonObject.toJSONString : {"order_no":"T230228000001","amount":"90000","user_name":"이유진","mid":"wel000455m","echo":"","pay_method":"CREDIT_OLDAUTH_API","product_name":"디톡스 여우밸런스","card_holder_ymd":"242d51d7dfa9dbf07b7cf70c233819e7","card_pw":"b217a7293ea970d36ddaae46c2ac1168","card_no":"cbb419ed6a955c7aab6aa79f0eeaefa9a2d31d094b5d0adfe1d792eaca897266","pay_type":"CREDIT_CARD","card_sell_mm":"03","millis":"1677525453076","hash_value":"dcfb868443af6742ac1d03b5bfd43b7656967c693866864aaba5f8be3c8cc7da","card_expiry_ym":"2710"}
04:17:33.077 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange() - BEGIN
04:17:33.078 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange() - url : https://payapi.welcomepayments.co.kr/api/payment/approval
04:17:33.078 DEBUG c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange() headers : [Content-Type:"application/json;charset=UTF-8"]
04:17:33.079 DEBUG o.s.w.c.RestTemplate - HTTP POST https://payapi.welcomepayments.co.kr/api/payment/approval
04:17:33.079 DEBUG o.s.w.c.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
04:17:33.079 DEBUG o.s.w.c.RestTemplate - Writing [{"order_no":"T230228000001","amount":"90000","user_name":"이유진","mid":"wel000455m","echo":"","pay_method":"CREDIT_OLDAUTH_API","product_name":"디톡스 여우밸런스","card_holder_ymd":"242d51d7dfa9dbf07b7cf70c233819e7","card_pw":"b217a7293ea970d36ddaae46c2ac1168","card_no":"cbb419ed6a955c7aab6aa79f0eeaefa9a2d31d094b5d0adfe1d792eaca897266","pay_type":"CREDIT_CARD","card_sell_mm":"03","millis":"1677525453076","hash_value":"dcfb868443af6742ac1d03b5bfd43b7656967c693866864aaba5f8be3c8cc7da","card_expiry_ym":"2710"}] as "application/json;charset=UTF-8"
04:17:35.970 DEBUG o.s.w.c.RestTemplate - Response 200 OK
04:17:35.971 DEBUG o.s.w.c.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
04:17:35.971 DEBUG c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange Exception - entity : 
<{"order_no":"T230228000001","amount":"90000","user_name":"이유진","mid":"wel000455m","echo":"","pay_method":"CREDIT_OLDAUTH_API","product_name":"디톡스 여우밸런스","card_holder_ymd":"242d51d7dfa9dbf07b7cf70c233819e7","card_pw":"b217a7293ea970d36ddaae46c2ac1168","card_no":"cbb419ed6a955c7aab6aa79f0eeaefa9a2d31d094b5d0adfe1d792eaca897266","pay_type":"CREDIT_CARD","card_sell_mm":"03","millis":"1677525453076","hash_value":"dcfb868443af6742ac1d03b5bfd43b7656967c693866864aaba5f8be3c8cc7da","card_expiry_ym":"2710"},[Content-Type:"application/json;charset=UTF-8"]>
04:17:35.972 DEBUG c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange Exception - response NOT NULL : <200,{"transactionType":"AUTH","result_code":"0000","result_message":"카드 결제 성공","mid":"wel000455m","order_no":"T230228000001","user_name":"이유진","amount":"90000","product_name":"디톡스 여우밸런스","card_sell_mm":"03","echo":"","approval_no":"30009618","transaction_no":"202302284148635","approval_ymdhms":"20230228041300","card_code":"62","card_name":"국민"},[Date:"Mon, 27 Feb 2023 19:13:01 GMT", Content-Type:"application/json;charset=UTF-8", Content-Length:"380", Connection:"keep-alive", Set-Cookie:"SCOUTER=z6k3c48cuu07t5;Max-Age=2147483647;path=/", Strict-Transport-Security:"max-age=31536000; includeSubdomains", X-Content-Type-Options:"nosniff", X-Frame-Options:"sameorigin"]>
04:17:35.973 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange() - END
04:17:35.974 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000001 - WELCOME apiExchange() res : <200,{"transactionType":"AUTH","result_code":"0000","result_message":"카드 결제 성공","mid":"wel000455m","order_no":"T230228000001","user_name":"이유진","amount":"90000","product_name":"디톡스 여우밸런스","card_sell_mm":"03","echo":"","approval_no":"30009618","transaction_no":"202302284148635","approval_ymdhms":"20230228041300","card_code":"62","card_name":"국민"},[Date:"Mon, 27 Feb 2023 19:13:01 GMT", Content-Type:"application/json;charset=UTF-8", Content-Length:"380", Connection:"keep-alive", Set-Cookie:"SCOUTER=z6k3c48cuu07t5;Max-Age=2147483647;path=/", Strict-Transport-Security:"max-age=31536000; includeSubdomains", X-Content-Type-Options:"nosniff", X-Frame-Options:"sameorigin"]>
04:17:35.975 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000001 - WELCOME apiExchange() Status : 200 OK
04:17:35.975 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000001 - WELCOME apiExchange() body : {"transactionType":"AUTH","result_code":"0000","result_message":"카드 결제 성공","mid":"wel000455m","order_no":"T230228000001","user_name":"이유진","amount":"90000","product_name":"디톡스 여우밸런스","card_sell_mm":"03","echo":"","approval_no":"30009618","transaction_no":"202302284148635","approval_ymdhms":"20230228041300","card_code":"62","card_name":"국민"}
04:17:35.976 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000001 - WELCOME apiExchange() statusCode : 200
04:17:35.976 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000001 - WELCOME apiExchange() statusMessage : OK
04:17:35.976 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000001 - WELCOME res : <200,{"transactionType":"AUTH","result_code":"0000","result_message":"카드 결제 성공","mid":"wel000455m","order_no":"T230228000001","user_name":"이유진","amount":"90000","product_name":"디톡스 여우밸런스","card_sell_mm":"03","echo":"","approval_no":"30009618","transaction_no":"202302284148635","approval_ymdhms":"20230228041300","card_code":"62","card_name":"국민"},[Date:"Mon, 27 Feb 2023 19:13:01 GMT", Content-Type:"application/json;charset=UTF-8", Content-Length:"380", Connection:"keep-alive", Set-Cookie:"SCOUTER=z6k3c48cuu07t5;Max-Age=2147483647;path=/", Strict-Transport-Security:"max-age=31536000; includeSubdomains", X-Content-Type-Options:"nosniff", X-Frame-Options:"sameorigin"]>
04:17:35.976 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000001 - WELCOME connObj = connParser.parse(res.getBody()); - res.getBody() : {"transactionType":"AUTH","result_code":"0000","result_message":"카드 결제 성공","mid":"wel000455m","order_no":"T230228000001","user_name":"이유진","amount":"90000","product_name":"디톡스 여우밸런스","card_sell_mm":"03","echo":"","approval_no":"30009618","transaction_no":"202302284148635","approval_ymdhms":"20230228041300","card_code":"62","card_name":"국민"}
04:17:35.976 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== ========== sales() - trxId : T230228000001 - WELCOME END
04:17:35.976 INFO  c.p.p.p.ProcPay - ========== sharedMap issuer : 
04:17:35.976 INFO  c.p.p.p.ProcPay - ========== sharedMap cardAcquirer : 국민
04:17:35.976 INFO  c.p.p.p.ProcPay - ========== response issuer : 국민비자특별카드
04:17:35.976 INFO  c.p.p.p.ProcPay - ========== response acquirer : 국민
04:17:35.977 INFO  c.p.p.p.ProcPay - ========== 
04:17:35.977 INFO  c.p.p.p.ProcPay - ========== 비교결과 : 8232
04:17:35.977 INFO  c.p.p.p.ProcPay - ========== 리턴 카드사명 : [국민]
04:17:35.977 INFO  c.p.p.p.ProcPay - ========== 디비 카드사명 : code[020] cname[축협] calias[축협(농협)]
04:17:35.977 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -8576
04:17:35.977 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:35.977 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:35.977 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1317
04:17:35.977 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:35.977 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:35.977 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1821
04:17:35.977 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:35.977 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:35.977 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -8232
04:17:35.978 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:35.978 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:35.978 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -52554
04:17:35.978 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:35.978 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:35.978 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -6588
04:17:35.978 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:35.978 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:35.978 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -2741
04:17:35.978 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:35.978 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:35.978 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -2741
04:17:35.978 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:35.979 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:35.979 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -52551
04:17:35.979 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:35.979 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:35.979 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -2157
04:17:35.979 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:35.979 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:35.979 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1429
04:17:35.979 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:35.979 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:35.979 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -52551
04:17:35.979 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:35.979 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:35.979 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3277
04:17:35.980 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:35.980 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:35.980 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -2941
04:17:35.980 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:35.980 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:35.980 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -52554
04:17:35.980 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:35.980 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:35.980 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -2741
04:17:35.980 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:35.980 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:35.980 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1765
04:17:35.980 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
04:17:35.981 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
04:17:35.981 INFO  c.p.p.p.ProcPay - ========== 
04:17:35.981 INFO  c.p.p.p.ProcPay - ========== 비교결과 : 1987
04:17:35.981 INFO  c.p.p.p.ProcPay - ========== 리턴 카드사명 : [축협(농협)]
04:17:35.981 INFO  c.p.p.p.ProcPay - ========== 디비 카드사명 : code[016] cname[하나] calias[하나]
04:17:35.981 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -8575
04:17:35.981 INFO  c.p.p.p.ProcPay - ========== issuer : 하나카드
04:17:35.981 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나
04:17:35.981 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3164
04:17:35.981 INFO  c.p.p.p.ProcPay - ========== issuer : 하나카드
04:17:35.981 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나
04:17:35.981 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3304
04:17:35.981 INFO  c.p.p.p.ProcPay - ========== issuer : 하나카드
04:17:35.981 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나
04:17:35.982 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -5908
04:17:35.982 INFO  c.p.p.p.ProcPay - ========== issuer : 하나카드
04:17:35.982 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나
04:17:35.982 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -54541
04:17:35.982 INFO  c.p.p.p.ProcPay - ========== issuer : 하나카드
04:17:35.982 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나
04:17:35.982 INFO  c.p.p.p.ProcPay - ========== 
04:17:35.982 INFO  c.p.p.p.ProcPay - ========== 비교결과 : 4
04:17:35.982 INFO  c.p.p.p.ProcPay - ========== 리턴 카드사명 : [하나]
04:17:35.982 INFO  c.p.p.p.ProcPay - ========== 디비 카드사명 : code[003] cname[하나(외환)] calias[하나(외환)]
04:17:35.982 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -5276
04:17:35.982 INFO  c.p.p.p.ProcPay - ========== issuer : 하나(외환)카드
04:17:35.982 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나(외환)
04:17:35.983 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -4728
04:17:35.983 INFO  c.p.p.p.ProcPay - ========== issuer : 하나(외환)카드
04:17:35.983 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나(외환)
04:17:35.983 INFO  c.p.p.p.ProcPay - ========== 
04:17:35.983 INFO  c.p.p.p.ProcPay - ========== 비교결과 : 172
04:17:35.983 INFO  c.p.p.p.ProcPay - ========== 리턴 카드사명 : [하나(외환)]
04:17:35.983 INFO  c.p.p.p.ProcPay - ========== 디비 카드사명 : code[007] cname[현대] calias[현대]
04:17:35.983 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -7573
04:17:35.983 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.983 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.983 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -168
04:17:35.983 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.983 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.983 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -2159
04:17:35.984 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.984 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.984 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -10483
04:17:35.984 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.984 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.984 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3584
04:17:35.984 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.984 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.984 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3560
04:17:35.984 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.984 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.984 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -5460
04:17:35.984 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.984 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.985 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -144
04:17:35.985 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.985 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.985 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -144
04:17:35.985 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.985 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.985 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -144
04:17:35.985 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.985 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.985 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -144
04:17:35.985 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.985 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.985 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -144
04:17:35.986 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.986 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.986 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -54705
04:17:35.986 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.986 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.986 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3924
04:17:35.986 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.986 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.986 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3588
04:17:35.986 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.986 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.986 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3780
04:17:35.986 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.986 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.987 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -5436
04:17:35.987 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.987 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.987 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -54713
04:17:35.987 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.987 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.987 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1936
04:17:35.987 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.987 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.987 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1796
04:17:35.987 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.987 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.987 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -54708
04:17:35.988 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.988 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.988 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1936
04:17:35.988 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.988 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.988 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -54705
04:17:35.988 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.988 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.988 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -9440
04:17:35.988 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.988 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.988 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -9335
04:17:35.988 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
04:17:35.988 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
04:17:35.989 INFO  c.p.p.d.TrxDAO - ========== insertTrxRES() 
04:17:35.989 INFO  c.p.p.d.TrxDAO - ========== insertTrxRES() - van : WELCOME
04:17:35.989 INFO  c.p.p.d.TrxDAO - ========== insertTrxRES() - vanId : wel000455m
04:17:35.989 INFO  c.p.p.d.TrxDAO - ========== insertTrxRES() - salesId : null
04:17:35.989 DEBUG c.p.l.u.d.DBManager - query : [INSERT INTO PG_TRX_RES (resultCd,van,vanTrxId,authCd,regDate,pairingCid,trxId,resultMsg,regDay,compNo,pairingVtid,pairingRouteVan,vanId,regTime,vanResultMsg,vanResultCd,compMember) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)] 
04:17:35.993 DEBUG c.p.lib.dao.DAO - elapsedTime : [4]msec
04:17:35.993 INFO  c.p.p.d.TrxDAO - ========== insertTrxRES() - insert() : true
04:17:35.993 INFO  c.p.p.d.TrxDAO - ========== insertTrxPAY() 
04:17:35.993 INFO  c.p.p.d.TrxDAO - INSERT INTO PG_TRX_PAY 
(trxId, mchtId, tmnId, trackId, payerName, 
payerEmail, payerTel, amount, installment, cardId, 
cardType, BIN, last4, status, prodId, 
issuer, acquirer, reqDay, reqTime, authCd, 
resultCd, resultMsg, van, vanId, vanTrxId, 
cyrexVtid, cyrexRouteVan, cyrexCid, regDay, regTime, 
regDate, reqDate, compNo, compMember, semiAuth, 
salesId, cancelType ) 
SELECT A.trxId, mchtId, tmnId, trackId, payerName, 
payerEmail, payerTel, amount, installment, cardId, 
cardType, bin, last4, '승인', prodId, 
issuer, acquirer,  A.regDay, A.regTime, authCd, 
resultCd, resultMsg, van, vanId, vanTrxId, 
B.pairingVtid, B.pairingRouteVan, B.pairingCid, B.regDay, B.regTime, 
B.regDate, A.regDate,  A.compNo,  A.compMember,  A.semiAuth,  
A.salesId, '' 
FROM PG_TRX_REQ A, PG_TRX_RES B 
WHERE A.trxId = B.trxId AND A.trxId = 'T230228000001'; 
04:17:35.993 DEBUG c.p.l.u.d.DBManager - query : [INSERT INTO PG_TRX_PAY 
(trxId, mchtId, tmnId, trackId, payerName, 
payerEmail, payerTel, amount, installment, cardId, 
cardType, BIN, last4, status, prodId, 
issuer, acquirer, reqDay, reqTime, authCd, 
resultCd, resultMsg, van, vanId, vanTrxId, 
cyrexVtid, cyrexRouteVan, cyrexCid, regDay, regTime, 
regDate, reqDate, compNo, compMember, semiAuth, 
salesId, cancelType ) 
SELECT A.trxId, mchtId, tmnId, trackId, payerName, 
payerEmail, payerTel, amount, installment, cardId, 
cardType, bin, last4, '승인', prodId, 
issuer, acquirer,  A.regDay, A.regTime, authCd, 
resultCd, resultMsg, van, vanId, vanTrxId, 
B.pairingVtid, B.pairingRouteVan, B.pairingCid, B.regDay, B.regTime, 
B.regDate, A.regDate,  A.compNo,  A.compMember,  A.semiAuth,  
A.salesId, '' 
FROM PG_TRX_REQ A, PG_TRX_RES B 
WHERE A.trxId = B.trxId AND A.trxId = 'T230228000001'; ] 
04:17:35.996 DEBUG c.p.lib.dao.DAO - elapsedTime : [3]msec
04:17:35.996 INFO  c.p.p.d.TrxDAO - ========== insertTrxPAY - update() : true
04:17:35.996 INFO  c.p.p.p.ProcPay - ========== LAST issuer : 현대카드
04:17:35.996 INFO  c.p.p.p.ProcPay - ========== LAST acquirer : 현대
04:17:35.996 INFO  c.p.p.proc.Proc - ========== ========== ========== ========== ========== setResponse2() - BEGIN
04:17:35.996 INFO  c.p.p.proc.Proc - ========== setResponse2() - trxId : T230228000001
04:17:35.997 INFO  c.p.p.proc.Proc - ========== setResponse2() - trxId : T230228000001 - updateTrxIO() 
04:17:35.997 INFO  c.p.p.d.TrxDAO - ========== updateTrxIO()
04:17:35.997 DEBUG c.p.l.u.d.DBManager - query : [UPDATE PG_TRX_IO SET resDay=?,resTime=?,resData=?,status=? WHERE  trxId = 'T230228000001'] 
04:17:35.999 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
04:17:35.999 INFO  c.p.p.d.TrxDAO - ========== set TRX_IO : true
04:17:35.999 INFO  c.p.p.proc.Proc - ========== setResponse2() - trxId : T230228000001 - updateTrxReq() 
04:17:36.000 INFO  c.p.p.d.TrxDAO - ========== setResponse2() - updateTrxReq() 
04:17:36.000 DEBUG c.p.l.u.d.DBManager - query : [UPDATE PG_TRX_REQ SET semiAuth=? WHERE  trxId = 'T230228000001'] 
04:17:36.002 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
04:17:36.002 INFO  c.p.p.d.TrxDAO - ========== set PG_TRX_REQ : true
04:17:36.002 INFO  c.p.p.proc.Proc - ========== setResponse2() - trxId : T230228000001 - updateTrxPAY() 
04:17:36.002 INFO  c.p.p.d.TrxDAO - ========== setResponse2() - updateTrxPay() 
04:17:36.002 DEBUG c.p.l.u.d.DBManager - query : [UPDATE PG_TRX_PAY SET semiAuth=? WHERE  trxId = 'T230228000001'] 
04:17:36.004 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
04:17:36.005 INFO  c.p.p.d.TrxDAO - ========== set PG_TRX_PAY : true
04:17:36.005 INFO  c.p.l.v.m.VertXMessage - res : [{
  "result": {
    "resultCd": "0000",
    "resultMsg": "정상",
    "advanceMsg": "정상승인",
    "create": "20230228041735"
  },
  "pay": {
    "authCd": "30009618",
    "card": {
      "cardId": "card_4370-e7872a-dbb-4ee7b",
      "installment": 3,
      "bin": "457973",
      "last4": "2055",
      "issuer": "현대카드",
      "cardType": "신용",
      "acquirer": "현대"
    },
    "trxDate": "20230228041300",
    "products": [
      {
        "prodId": "pdt_5b56-348bec-663-1c4c8",
        "name": "디톡스 여우밸런스",
        "qty": 1,
        "price": 90000,
        "desc": "WEBPAY",
        "mchtId": ""
      }
    ],
    "mchtId": "gms3982",
    "trxId": "T230228000001",
    "trxType": "COMPTR",
    "tmnId": "HKH000288",
    "trackId": "COMP11742678167724",
    "amount": 90000,
    "udf1": "",
    "udf2": "",
    "metadata": {
      "cardAuth": "true",
      "authPw": "25",
      "authDob": "850715"
    }
  }
}],[application/json]

04:17:36.005 INFO  c.p.p.proc.Proc - estimatedTime : 3304
04:17:36.005 INFO  c.p.p.proc.Proc - ========== ========== ========== ========== ========== setResponse2() - END
04:17:36.005 INFO  c.p.p.p.ProcPay - ========== ========== ========== ========== ========== exec() - END 
04:17:36.005 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== apiHandler END
04:17:36.005 INFO  c.p.p.u.APIComp - ElapsedTime : 3340 msec
04:17:36.006 INFO  c.p.p.u.APIComp - LOCAL << PAYMENT [{
  "result": {
    "resultCd": "0000",
    "resultMsg": "정상",
    "advanceMsg": "정상승인",
    "create": "20230228041735"
  },
  "pay": {
    "authCd": "30009618",
    "card": {
      "cardId": "card_4370-e7872a-dbb-4ee7b",
      "installment": 3,
      "bin": "457973",
      "last4": "2055",
      "issuer": "현대카드",
      "cardType": "신용",
      "acquirer": "현대"
    },
    "trxDate": "20230228041300",
    "products": [
      {
        "prodId": "pdt_5b56-348bec-663-1c4c8",
        "name": "디톡스 여우밸런스",
        "qty": 1,
        "price": 90000,
        "desc": "WEBPAY",
        "mchtId": ""
      }
    ],
    "mchtId": "gms3982",
    "trxId": "T230228000001",
    "trxType": "COMPTR",
    "tmnId": "HKH000288",
    "trackId": "COMP11742678167724",
    "amount": 90000,
    "udf1": "",
    "udf2": "",
    "metadata": {
      "cardAuth": "true",
      "authPw": "25",
      "authDob": "850715"
    }
  }
}
]
04:17:36.006 INFO  c.p.p.u.APIComp - ========== compConnect END
04:17:36.006 INFO  c.p.p.u.APIComp - ========== APICompPay() connjObj2 : 
{"resultCd":"0000","advanceMsg":"정상승인","create":"20230228041735","resultMsg":"정상"}
04:17:36.006 INFO  c.p.p.u.APIComp - ========== APICompPay() connjObj2 resultCd : 0000
04:17:36.006 INFO  c.p.p.u.APIComp - ========== APICompPay() connjObj2 resultMsg : 정상
04:17:36.006 INFO  c.p.p.u.APIComp - ========== APICompPay() connjObj2 advanceMsg : 정상승인
04:17:36.006 INFO  c.p.p.u.APIComp - ========== APICompPay() connjObj3 : {"amount":90000,"metadata":{"cardAuth":"true","authPw":"25","authDob":"850715"},"authCd":"30009618","tmnId":"HKH000288","trackId":"COMP11742678167724","trxType":"COMPTR","udf1":"","trxId":"T230228000001","udf2":"","products":[{"price":90000,"qty":1,"name":"디톡스 여우밸런스","mchtId":"","prodId":"pdt_5b56-348bec-663-1c4c8","desc":"WEBPAY"}],"mchtId":"gms3982","card":{"last4":"2055","bin":"457973","cardId":"card_4370-e7872a-dbb-4ee7b","installment":3,"cardType":"신용","acquirer":"현대","issuer":"현대카드"},"trxDate":"20230228041300"}
04:17:36.006 INFO  c.p.p.u.APIComp - ========== APICompPay() connjObj3 trxId : T230228000001
04:17:36.006 INFO  c.p.p.u.APIComp - ========== APICompPay() 전달데이터 조회 trackId : COMP11742678167724
04:17:36.006 DEBUG c.p.l.u.d.DBManager - query : [SELECT A.mchtId, A.trxId, C.vanTrxId, B.vanResultCd, B.vanResultMsg, C.authCd,
IFNULL(C.regDay, D.regDay) AS regDay, 
IFNULL(C.regTime, D.regTime) AS regTime, 
C.issuer, C.acquirer, A.bin, A.last4, A.installment, 
A.amount, A.payerName, G.name AS prdName, A.compNo, 
A.compMember, B.van, B.vanId 
 FROM PG_TRX_REQ A 
JOIN PG_TRX_RES B ON A.trxId = B.trxId 
LEFT JOIN PG_TRX_PAY C ON A.trxId = C.trxId 
LEFT JOIN PG_TRX_ERR D ON A.trxId = D.trxId 
LEFT JOIN PG_CODE_BIN E ON A.bin = E.bin 
LEFT JOIN PG_CODE F ON E.acquirer = F.codeName 
LEFT JOIN PG_TRX_PRD G ON A.prodId = G.prodId 
 WHERE  A.trackId = 'COMP11742678167724' GROUP BY A.trxId ORDER BY A.regDate DESC] 
04:17:36.008 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
04:17:36.008 INFO  c.p.p.u.APIComp - ========== issuer : 국민비자특별카드
04:17:36.008 INFO  c.p.p.u.APIComp - ========== acquirer : 국민
04:17:36.008 INFO  c.p.p.u.APIComp - ========== 
04:17:36.008 INFO  c.p.p.u.APIComp - ========== 비교결과 : 8232
04:17:36.008 INFO  c.p.p.u.APIComp - ========== 리턴 카드사명 : [국민]
04:17:36.008 INFO  c.p.p.u.APIComp - ========== 디비 카드사명 : code[020] cname[축협] calias[축협(농협)]
04:17:36.009 INFO  c.p.p.u.APIComp - ========== 
04:17:36.009 INFO  c.p.p.u.APIComp - ========== 비교결과 : 6915
04:17:36.009 INFO  c.p.p.u.APIComp - ========== 리턴 카드사명 : [국민]
04:17:36.009 INFO  c.p.p.u.APIComp - ========== 디비 카드사명 : code[019] cname[조흥] calias[조흥(강원)]
04:17:36.009 INFO  c.p.p.u.APIComp - ========== 
04:17:36.009 INFO  c.p.p.u.APIComp - ========== 비교결과 : 6411
04:17:36.009 INFO  c.p.p.u.APIComp - ========== 리턴 카드사명 : [국민]
04:17:36.009 INFO  c.p.p.u.APIComp - ========== 디비 카드사명 : code[003] cname[외환] calias[하나(외환)]
04:17:36.009 INFO  c.p.p.u.APIComp - ========== 
04:17:36.009 INFO  c.p.p.u.APIComp - ========== 비교결과 : 0
04:17:36.009 INFO  c.p.p.u.APIComp - ========== 리턴 카드사명 : [국민]
04:17:36.009 INFO  c.p.p.u.APIComp - ========== 디비 카드사명 : code[002] cname[국민] calias[KB국민]
04:17:36.009 INFO  c.p.p.u.APIComp - ========== 최종 발급사 : KB국민
04:17:36.009 INFO  c.p.p.u.APIComp - ========== 
04:17:36.009 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== sendMsgPayMap()
04:17:36.010 INFO  c.p.l.v.m.VertXMessage - res : [{"code":"0000","status":"정상","msg":"정상승인","data":{"amount":"90000","authCd":"30009618","prdName":"디톡스 여우밸런스","vanTime":"041300","acquirer":"KB국민","trxId":"T230228000001","issuer":"국민비자특별카드","compNo":"","installment":"03","payerName":"이유진","vanDay":"20230228","acquirerCode":"002","cardNumber":"457973******2055"}}],[application/json]

04:17:36.010 DEBUG c.p.p.u.APIComp - 
04:17:36.010 INFO  c.p.p.u.APIComp - ========== APICompPay() END
04:22:18.991 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : {T230228000001=5}
04:22:18.992 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : T230228000001 : 4
04:27:18.991 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : {T230228000001=4}
04:27:18.992 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : T230228000001 : 3
04:32:18.991 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : {T230228000001=3}
04:32:18.992 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : T230228000001 : 2
04:37:18.991 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : {T230228000001=2}
04:37:18.991 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : T230228000001 : 1
04:42:18.991 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : {T230228000001=1}
04:42:18.991 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : T230228000001 : 0
04:47:18.991 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : {T230228000001=0}
05:04:51.207 INFO  c.p.l.v.m.VertXMessage - res : [Payment API []],[text/html]

05:04:51.888 WARN  i.n.c.DefaultChannelPipeline - An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception.
java.io.IOException: 연결이 상대편에 의해 끊어짐
	at sun.nio.ch.FileDispatcherImpl.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:39)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:379)
	at io.netty.buffer.PooledUnsafeDirectByteBuf.setBytes(PooledUnsafeDirectByteBuf.java:288)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1100)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:367)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:118)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:610)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:551)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:465)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:437)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:873)
	at java.lang.Thread.run(Thread.java:750)
05:04:52.043 INFO  c.p.p.m.Listener - ========== log() - HTTP_1_1,/favicon.ico,GET,167.94.138.117,,,Mozilla/5.0 (compatible; CensysInspect/1.1; +https://about.censys.io/)
05:04:52.044 INFO  c.p.p.m.Listener - ========== execute() - deny uri : /favicon.ico, ip : 167.94.138.117
05:04:52.044 DEBUG c.p.p.m.Listener - ========== execute() - Header Host,222.237.78.137:8091
05:04:52.045 DEBUG c.p.p.m.Listener - ========== execute() - Header User-Agent,Mozilla/5.0 (compatible; CensysInspect/1.1; +https://about.censys.io/)
05:04:52.045 DEBUG c.p.p.m.Listener - ========== execute() - Header Accept-Encoding,gzip
05:04:52.045 DEBUG c.p.p.m.Listener - ========== execute() - Header Connection,close
05:38:47.096 INFO  c.p.l.v.m.VertXMessage - res : [Payment API []],[text/html]

09:01:06.849 INFO  c.p.p.m.Listener - ========== formHandler
09:01:06.849 INFO  c.p.p.m.Listener - ========== log() - HTTP_1_0,/form/payment/layout,GET,175.196.61.18,,,Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36
09:01:06.849 DEBUG c.g.j.h.i.HbsParserFactory - About to parse: io.vertx.ext.web.templ.impl.HandlebarsTemplateEngineImpl$Loader$1@1f2f5b06
09:01:06.849 DEBUG c.g.j.h.i.HbsParserFactory - Building AST
09:01:06.850 DEBUG c.g.j.h.i.HbsParserFactory - Creating templates
09:01:06.903 INFO  c.p.p.m.Listener - ========== apiHandler
09:01:06.904 INFO  c.p.p.m.Listener - ========== log() - HTTP_1_0,/api/widget,POST,175.196.61.18,application/json,394,Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36
09:01:06.904 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== apiHandler() - BEGIN
09:01:06.905 INFO  c.p.l.v.m.VertXUtil - req : [{"widget":{"payRoute":"regular","publicKey":"pk_67ea-5238fb-27d-a7b85","amount":"150000","trackId":"TS6710168755012","redirectUrl":"","webhookUrl":"","widgetLogoUrl":"","mode":"layer","debugMode":"live","debug":true,"products":[{"name":"암브로시아","price":"150000","qty":1,"desc":"WEBPAY"}],"udf1":"","udf2":"","payerName":"이수미","payerEmail":"","payerTel":"25408566 ","salesId":""}}],[394]
09:01:06.907 INFO  c.p.p.main.Api - ========== apiHandler() -  uri : /api/widget, method : POST, ip : 175.196.61.18
09:01:06.907 INFO  c.p.l.v.m.VertXUtil - req : [{"widget":{"payRoute":"regular","publicKey":"pk_67ea-5238fb-27d-a7b85","amount":"150000","trackId":"TS6710168755012","redirectUrl":"","webhookUrl":"","widgetLogoUrl":"","mode":"layer","debugMode":"live","debug":true,"products":[{"name":"암브로시아","price":"150000","qty":1,"desc":"WEBPAY"}],"udf1":"","udf2":"","payerName":"이수미","payerEmail":"","payerTel":"25408566 ","salesId":""}}],[394]
09:01:06.908 DEBUG c.p.l.u.d.DBManager - query : [UPDATE PG_SEQUENCE SET processcnt=?,prevday=? WHERE  idx = 1] 
09:01:06.913 DEBUG c.p.lib.dao.DAO - elapsedTime : [5]msec
09:01:06.913 INFO  c.p.p.d.TrxDAO - ========== GetCurrentFromCalendar - 페어링 주문번호 DB 저장 OK : glb_processcnt = 2 |  glb_prevday = 20230228
09:01:06.913 INFO  c.p.p.main.Api - ========== apiHandler() ========== trixId : T230228000002
09:01:06.913 INFO  c.p.l.v.m.VertXUtil - req : [{"widget":{"payRoute":"regular","publicKey":"pk_67ea-5238fb-27d-a7b85","amount":"150000","trackId":"TS6710168755012","redirectUrl":"","webhookUrl":"","widgetLogoUrl":"","mode":"layer","debugMode":"live","debug":true,"products":[{"name":"암브로시아","price":"150000","qty":1,"desc":"WEBPAY"}],"udf1":"","udf2":"","payerName":"이수미","payerEmail":"","payerTel":"25408566 ","salesId":""}}],[394]
09:01:06.913 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== authorization() - BEGIN
09:01:06.913 INFO  c.p.p.main.Api - ========== authorization() - trxId : T230228000002 | mchtId : 
09:01:06.913 INFO  c.p.p.main.Api - ========== ========== ========== ==========  ========== syntax() - BEGIN
09:01:06.913 INFO  c.p.p.main.Api - ========== syntax() - trxId : T230228000002 | mchtId : 
09:01:06.914 INFO  c.p.p.main.Api - ========== ========== ========== ==========  ========== syntax() - END
09:01:06.914 INFO  c.p.p.d.TrxDAO - ========== getMchtTmnByPayKey() - payKey : pk_67ea-5238fb-27d-a7b85
09:01:06.914 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_MCHT_TMN WHERE  payKey = 'pk_67ea-5238fb-27d-a7b85' ORDER BY regDate DESC] 
09:01:06.914 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:01:06.915 INFO  c.p.p.d.TrxDAO - ========== getMchtByMchtId() - mchtId : lsg1712
09:01:06.915 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_MCHT WHERE  mchtId = 'lsg1712' ORDER BY regDate DESC] 
09:01:06.915 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:01:06.915 INFO  c.p.l.u.m.SharedCacheMap - cache timeout : key : PG_MCHT_gms3982 
09:01:06.915 INFO  c.p.p.d.TrxDAO - ========== getMchtMngByMchtId() - mchtId : lsg1712
09:01:06.915 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_MCHT_MNG WHERE  mchtId = 'lsg1712' ORDER BY regDate DESC] 
09:01:06.915 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:01:06.915 INFO  c.p.p.main.Api - sharedObject - mcht : 44
09:01:06.916 INFO  c.p.p.main.Api - sharedObject - mchtTmn : 24
09:01:06.916 INFO  c.p.p.main.Api - sharedObject - mchtMng : 52
09:01:06.916 INFO  c.p.p.d.TrxDAO - ========== getMchtTmnByVanIdx2() - vanIdx : 366 mchtId : lsg1712
09:01:06.916 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM VW_MCHT_TMN WHERE  vanIdx = 366 AND mchtId = 'lsg1712' ORDER BY regDate DESC] 
09:01:06.916 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:01:06.916 INFO  c.p.p.d.TrxDAO - ========== getVanByVanIdx2() - vanIdx : 366
09:01:06.916 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_VAN WHERE  idx = '366' ORDER BY regDate DESC] 
09:01:06.917 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
09:01:06.917 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== authorization() - END
09:01:06.917 INFO  c.p.p.main.Api - ========== apiHandler() - trxId : T230228000002 | mchtId : lsg1712 - Proc process SET
09:01:06.917 INFO  c.p.p.p.ProcWidget - ========== ========== ========== ========== ========== exec() - set2() - BEGIN 
09:01:06.917 INFO  c.p.p.p.ProcWidget - ========== exec() - trxId : T230228000002 | mchtId : lsg1712
09:01:06.917 INFO  c.p.p.p.ProcWidget - ========== exec() - trxId : T230228000002 | mchtMap mchtId : lsg1712
09:01:06.917 INFO  c.p.p.p.ProcWidget - ========== ProcWidget valid - save as key : key_16775424669176c3abfa
09:01:06.917 INFO  c.p.p.p.ProcWidget - ProcWidget valid - save as key : key_16775424669176c3abfa
09:01:06.917 INFO  c.p.p.p.ProcWidget - ========== ========== ========== ========== ========== exec() - set2() - END 
09:01:06.917 INFO  c.p.p.proc.Proc - ========== ========== ========== ========== ========== setResponse2() - BEGIN
09:01:06.917 INFO  c.p.p.proc.Proc - ========== setResponse2() - trxId : T230228000002
09:01:06.918 INFO  c.p.l.v.m.VertXMessage - res : [{
  "result": {
    "resultCd": "0000",
    "resultMsg": "정상",
    "advanceMsg": "정상완료",
    "create": "20230228090106"
  },
  "widget": {
    "nick": "",
    "apiMaxInstall": 12,
    "routeUrl": "/form/payment/pairingsolution/index.html?token\u003dkey_16775424669176c3abfa",
    "semiAuth": "Y",
    "tmnId": "HKH000728",
    "key": "key_16775424669176c3abfa",
    "target": "PAIRINGSOLUTION"
  }
}],[application/json]

09:01:06.918 INFO  c.p.p.proc.Proc - estimatedTime : 0
09:01:06.918 INFO  c.p.p.proc.Proc - ========== ========== ========== ========== ========== setResponse2() - END
09:01:06.918 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== apiHandler END
09:01:06.927 INFO  c.p.p.m.Listener - ========== formHandler
09:01:06.928 INFO  c.p.p.m.Listener - ========== log() - HTTP_1_0,/form/payment/pairingsolution/index.html?token=key_16775424669176c3abfa,GET,175.196.61.18,,,Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36
09:01:06.928 DEBUG c.g.j.h.i.HbsParserFactory - About to parse: io.vertx.ext.web.templ.impl.HandlebarsTemplateEngineImpl$Loader$1@27eabc20
09:01:06.928 DEBUG c.g.j.h.i.HbsParserFactory - Building AST
09:01:06.941 DEBUG c.g.j.h.i.HbsParserFactory - Creating templates
09:01:07.000 INFO  c.p.p.m.Listener - ========== apiHandler
09:01:07.000 INFO  c.p.p.m.Listener - ========== log() - HTTP_1_0,/api/widget/key_16775424669176c3abfa,GET,175.196.61.18,,,Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36
09:01:07.000 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== apiHandler() - BEGIN
09:01:07.000 INFO  c.p.l.v.m.VertXUtil - req : [],[0]
09:01:07.000 INFO  c.p.p.main.Api - ========== apiHandler() -  uri : /api/widget/key_16775424669176c3abfa, method : GET, ip : 175.196.61.18
09:01:07.000 INFO  c.p.l.v.m.VertXUtil - req : [],[0]
09:01:07.000 DEBUG c.p.l.u.d.DBManager - query : [UPDATE PG_SEQUENCE SET processcnt=?,prevday=? WHERE  idx = 1] 
09:01:07.005 DEBUG c.p.lib.dao.DAO - elapsedTime : [5]msec
09:01:07.005 INFO  c.p.p.d.TrxDAO - ========== GetCurrentFromCalendar - 페어링 주문번호 DB 저장 OK : glb_processcnt = 3 |  glb_prevday = 20230228
09:01:07.005 INFO  c.p.p.main.Api - ========== apiHandler() ========== trixId : T230228000003
09:01:07.005 INFO  c.p.l.v.m.VertXUtil - req : [],[0]
09:01:07.005 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== authorization() - BEGIN
09:01:07.005 INFO  c.p.p.main.Api - ========== authorization() - trxId : T230228000003 | mchtId : 
09:01:07.005 DEBUG c.p.p.main.Api - ========== sharedMap PAYUNIT.TRX_ID : T230228000003 ========== authorization() - invalid content-type : 
09:01:07.006 INFO  c.p.p.d.TrxDAO - ========== getMchtTmnByPayKey() - payKey : pk_67ea-5238fb-27d-a7b85
09:01:07.006 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_MCHT_TMN WHERE  payKey = 'pk_67ea-5238fb-27d-a7b85' ORDER BY regDate DESC] 
09:01:07.006 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:01:07.007 INFO  c.p.p.d.TrxDAO - ========== getMchtByMchtId() - mchtId : lsg1712
09:01:07.007 INFO  c.p.p.d.TrxDAO - ========== getMchtMngByMchtId() - mchtId : lsg1712
09:01:07.007 INFO  c.p.p.main.Api - sharedObject - mcht : 44
09:01:07.007 INFO  c.p.p.main.Api - sharedObject - mchtTmn : 24
09:01:07.007 INFO  c.p.p.main.Api - sharedObject - mchtMng : 52
09:01:07.007 INFO  c.p.p.d.TrxDAO - ========== getMchtTmnByVanIdx2() - vanIdx : 366 mchtId : lsg1712
09:01:07.007 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM VW_MCHT_TMN WHERE  vanIdx = 366 AND mchtId = 'lsg1712' ORDER BY regDate DESC] 
09:01:07.008 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
09:01:07.008 INFO  c.p.p.d.TrxDAO - ========== getVanByVanIdx2() - vanIdx : 366
09:01:07.008 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_VAN WHERE  idx = '366' ORDER BY regDate DESC] 
09:01:07.008 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:01:07.008 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== authorization() - END
09:01:07.009 INFO  c.p.p.main.Api - ========== apiHandler() - trxId : T230228000003 | mchtId : lsg1712 - Proc process SET
09:01:07.009 INFO  c.p.p.p.ProcWidget - ========== ========== ========== ========== ========== exec() - set2() - BEGIN 
09:01:07.009 INFO  c.p.p.p.ProcWidget - ========== exec() - trxId : T230228000003 | mchtId : lsg1712
09:01:07.009 INFO  c.p.p.p.ProcWidget - ========== exec() - trxId : T230228000003 | mchtMap mchtId : lsg1712
09:01:07.009 INFO  c.p.p.p.ProcWidget - ========== valid2() - call key : key_16775424669176c3abfa
09:01:07.009 INFO  c.p.p.p.ProcWidget - ========== ========== ========== ========== ========== exec() - set2() - END 
09:01:07.009 INFO  c.p.p.proc.Proc - ========== ========== ========== ========== ========== setResponse2() - BEGIN
09:01:07.009 INFO  c.p.p.proc.Proc - ========== setResponse2() - trxId : T230228000003
09:01:07.010 INFO  c.p.l.v.m.VertXMessage - res : [{
  "result": {
    "resultCd": "0000",
    "resultMsg": "정상",
    "advanceMsg": "정상완료",
    "create": "20230228090107"
  },
  "widget": {
    "amount": "150000",
    "redirectUrl": "",
    "debug": true,
    "tmnId": "HKH000728",
    "trackId": "TS6710168755012",
    "publicKey": "pk_67ea-5238fb-27d-a7b85",
    "udf1": "",
    "udf2": "",
    "webhookUrl": "",
    "products": [
      {
        "name": "암브로시아",
        "price": "150000",
        "qty": 1.0,
        "desc": "WEBPAY"
      }
    ],
    "mode": "layer",
    "nick": "",
    "authorization": "pk_67ea-5238fb-27d-a7b85",
    "widgetLogoUrl": "",
    "apiMaxInstall": 12,
    "payRoute": "regular",
    "salesId": "",
    "semiAuth": "Y",
    "payerTel": "25408566 ",
    "payerName": "이수미",
    "debugMode": "live",
    "payerEmail": ""
  }
}],[text/html]

09:01:07.010 INFO  c.p.p.proc.Proc - estimatedTime : 1
09:01:07.010 INFO  c.p.p.proc.Proc - ========== ========== ========== ========== ========== setResponse2() - END
09:01:07.010 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== apiHandler END
09:01:32.124 INFO  c.p.p.m.Listener - ========== apiHandler
09:01:32.124 INFO  c.p.p.m.Listener - ========== log() - HTTP_1_0,/api/pay,POST,175.196.61.18,application/json,419,Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36
09:01:32.125 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== apiHandler() - BEGIN
09:01:32.125 INFO  c.p.l.v.m.VertXUtil - req : [{"pay":{"trxType":"ONTR","tmnId":"HKH000728","trackId":"TS6710168755012","amount":"150000","payerName":"이수미","payerEmail":"","payerTel":"25408566","udf1":"","udf2":"","webhookUrl":"","products":[{"name":"암브로시아","price":"150000","qty":1,"desc":"WEBPAY"}],"card":{"number":"625840******9981","expiry":"2306","installment":"0"},"metadata":{"cardAuth":"true","authPw":"12","authDob":"560710"},"salesId":""}}],[419]
09:01:32.127 INFO  c.p.p.main.Api - ========== apiHandler() -  uri : /api/pay, method : POST, ip : 175.196.61.18
09:01:32.127 INFO  c.p.l.v.m.VertXUtil - req : [{"pay":{"trxType":"ONTR","tmnId":"HKH000728","trackId":"TS6710168755012","amount":"150000","payerName":"이수미","payerEmail":"","payerTel":"25408566","udf1":"","udf2":"","webhookUrl":"","products":[{"name":"암브로시아","price":"150000","qty":1,"desc":"WEBPAY"}],"card":{"number":"625840******9981","expiry":"2306","installment":"0"},"metadata":{"cardAuth":"true","authPw":"12","authDob":"560710"},"salesId":""}}],[419]
09:01:32.129 DEBUG c.p.l.u.d.DBManager - query : [UPDATE PG_SEQUENCE SET processcnt=?,prevday=? WHERE  idx = 1] 
09:01:32.133 DEBUG c.p.lib.dao.DAO - elapsedTime : [4]msec
09:01:32.133 INFO  c.p.p.d.TrxDAO - ========== GetCurrentFromCalendar - 페어링 주문번호 DB 저장 OK : glb_processcnt = 4 |  glb_prevday = 20230228
09:01:32.133 INFO  c.p.p.main.Api - ========== apiHandler() ========== trixId : T230228000004
09:01:32.133 INFO  c.p.l.v.m.VertXUtil - req : [{"pay":{"trxType":"ONTR","tmnId":"HKH000728","trackId":"TS6710168755012","amount":"150000","payerName":"이수미","payerEmail":"","payerTel":"25408566","udf1":"","udf2":"","webhookUrl":"","products":[{"name":"암브로시아","price":"150000","qty":1,"desc":"WEBPAY"}],"card":{"number":"625840******9981","expiry":"2306","installment":"0"},"metadata":{"cardAuth":"true","authPw":"12","authDob":"560710"},"salesId":""}}],[419]
09:01:32.133 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== authorization() - BEGIN
09:01:32.133 INFO  c.p.p.main.Api - ========== authorization() - trxId : T230228000004 | mchtId : 
09:01:32.134 INFO  c.p.p.main.Api - ========== ========== ========== ==========  ========== syntax() - BEGIN
09:01:32.134 INFO  c.p.p.main.Api - ========== syntax() - trxId : T230228000004 | mchtId : 
09:01:32.134 INFO  c.p.p.main.Api - ========== ========== ========== ==========  ========== syntax() - END
09:01:32.134 INFO  c.p.p.d.TrxDAO - ========== getMchtTmnByPayKey() - payKey : pk_67ea-5238fb-27d-a7b85
09:01:32.134 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_MCHT_TMN WHERE  payKey = 'pk_67ea-5238fb-27d-a7b85' ORDER BY regDate DESC] 
09:01:32.137 DEBUG c.p.lib.dao.DAO - elapsedTime : [3]msec
09:01:32.138 INFO  c.p.p.d.TrxDAO - ========== getMchtByMchtId() - mchtId : lsg1712
09:01:32.138 INFO  c.p.p.d.TrxDAO - ========== getMchtMngByMchtId() - mchtId : lsg1712
09:01:32.138 INFO  c.p.p.main.Api - sharedObject - mcht : 44
09:01:32.138 INFO  c.p.p.main.Api - sharedObject - mchtTmn : 24
09:01:32.138 INFO  c.p.p.main.Api - sharedObject - mchtMng : 52
09:01:32.138 INFO  c.p.p.d.TrxDAO - ========== getMchtTmnByVanIdx2() - vanIdx : 366 mchtId : lsg1712
09:01:32.138 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM VW_MCHT_TMN WHERE  vanIdx = 366 AND mchtId = 'lsg1712' ORDER BY regDate DESC] 
09:01:32.138 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:01:32.139 INFO  c.p.p.d.TrxDAO - ========== getVanByVanIdx2() - vanIdx : 366
09:01:32.139 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_VAN WHERE  idx = '366' ORDER BY regDate DESC] 
09:01:32.139 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:01:32.139 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== authorization() - END
09:01:32.139 INFO  c.p.p.main.Api - ========== apiHandler() - trxId : T230228000004 | mchtId : lsg1712 - Proc process SET
09:01:32.139 INFO  c.p.p.p.ProcPay - ========== ========== ========== ========== ========== exec() - BEGIN 
09:01:32.139 INFO  c.p.p.p.ProcPay - ========== ========== ========== ========== ========== exec() - set2() - BEGIN 
09:01:32.139 INFO  c.p.p.p.ProcPay - ========== exec() - trxId : T230228000004 | mchtId : lsg1712
09:01:32.139 INFO  c.p.p.p.ProcPay - ========== exec() - trxId : T230228000004 | mchtMap mchtId : lsg1712
09:01:32.139 INFO  c.p.p.p.ProcPay - ========== ========== ========== ========== ========== valid2() - BEGIN 
09:01:32.139 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 - sharedMap - mchtId : lsg1712
09:01:32.140 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 - sales_mchtTmnMap - vanIdx : 366
09:01:32.140 INFO  c.p.p.d.TrxDAO - ========== getVanByVanIdx2() - vanIdx : 366
09:01:32.140 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_VAN WHERE  idx = '366' ORDER BY regDate DESC] 
09:01:32.140 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:01:32.140 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 - vanMap - vanId  : wel000455m
09:01:32.140 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 - card_number : 625840******9981
09:01:32.140 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 - card_bin : 625840
09:01:32.140 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 - card_last4 : 9981
09:01:32.140 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 - sharedMap mchtId : lsg1712
09:01:32.140 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 - card_bin : 625840
09:01:32.140 INFO  c.p.p.d.TrxDAO - ========== getBinlockListCount() - name : lsg1712 - bin : 625840
09:01:32.141 DEBUG c.p.l.u.d.DBManager - query : [SELECT COUNT(*) AS cnt FROM tbl_binlock_list WHERE  used = 1 AND d_tm IS NULL AND name = 'lsg1712' AND bin = '625840'] 
09:01:32.141 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:01:32.141 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 - binBlockListCount_mchtId : 0
09:01:32.141 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 - request.pay.mchtId : lsg1712
09:01:32.141 INFO  c.p.p.d.TrxDAO - ========== getBinlockListCount() - name : wel000455m - bin : 625840
09:01:32.141 DEBUG c.p.l.u.d.DBManager - query : [SELECT COUNT(*) AS cnt FROM tbl_binlock_list WHERE  used = 1 AND d_tm IS NULL AND name = 'wel000455m' AND bin = '625840'] 
09:01:32.141 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:01:32.141 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 - binBlockListCount_vanId : 0
09:01:32.141 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 - vanMap vanId : wel000455m
09:01:32.142 INFO  c.p.p.p.ProcPay - 
09:01:32.142 INFO  c.p.p.p.ProcPay - ========== valid2() - 카드별 PG상점ID 조회
09:01:32.142 INFO  c.p.p.d.TrxDAO - ========== getVanByBrand() - bin : 625840
09:01:32.142 DEBUG c.p.l.u.d.DBManager - query : [SELECT A.* FROM PG_VAN A JOIN (SELECT * FROM PG_CODE_BIN WHERE bin = 625840 GROUP BY brand) B ON A.brand = B.brand WHERE A.status = '사용' ] 
09:01:32.143 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
09:01:32.143 INFO  c.p.p.p.ProcPay - ========== valid2() - vanBrandMap NULL
09:01:32.143 INFO  c.p.p.p.ProcPay - 
09:01:32.143 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 - salesId IS NULL
09:01:32.143 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 | request.pay.payerTel : 25408566
09:01:32.143 INFO  c.p.p.d.TrxDAO - ========== getMchtByMchtId2() - mchtId : lsg1712
09:01:32.144 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_MCHT WHERE  mchtId = 'lsg1712' ORDER BY regDate DESC] 
09:01:32.144 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:01:32.144 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 | 판매자, 구매자 전화번호 일치 체크 payerTel : 25408566 | tel1 : 025550894
09:01:32.144 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 | 판매자, 구매자 전화번호 일치 체크 payerTel : 25408566 | tel2 : 
09:01:32.144 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 | 판매자, 구매자 전화번호 일치 체크 payerTel : 25408566 | ceoPhone : 
09:01:32.144 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 | 판매자, 구매자 전화번호 일치 체크 payerTel : 25408566 | ceoTel : 01098778723
09:01:32.144 INFO  c.p.p.d.TrxDAO - ========== isDuplicatedTrackId() - 중복거래번호 확인 - mchtId : lsg1712 - trackId : TS6710168755012
09:01:32.144 INFO  c.p.p.d.TrxDAO - ========== insertTrxIOchk() - 중복거래번호 확인 - mchtId : lsg1712
09:01:32.147 INFO  c.p.p.d.TrxDAO - ========== insertTrxIOchk() - set PG_TRX_IO : true
09:01:32.147 INFO  c.p.p.d.TrxDAO - ========== getDBIssuer() - bin : 625840
09:01:32.147 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_CODE_BIN WHERE  bin = '625840' ORDER BY regDate DESC] 
09:01:32.147 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:01:32.147 INFO  c.p.l.u.m.SharedCacheMap - cache timeout : key : PG_CODE_BIN_457973 
09:01:32.147 INFO  c.p.p.d.TrxDAO - ========== insertCard() - cardId : card_944e-fc6f39-762-7a37a - value : Wn4yMwmxaxxArr/2pTdwOuFvoozN1ZFUQISNN9NpwQiJ6um7y7moCWypxVFLd5WdSbmkoFb3ybzJ3W/6Qj0JLAwRYoKIytzxQKa6cETDC0KEywflisVWhH63ERYYwDSumfv0/iI0nPB9jAMDVtoVM58bwde531L69+LzEnGizGRgIWWbDEa3AbDGIGi3XVGl1a7bWpMzTQ2a9x19sL1etunkSJvFGPYJ3vq4zM2cpswPmm57r7nThjROJ8o15UOaUzk8e/re4GRTadvLObKWnXZSkj89nmPy8H0BLJAUAg9Y5eq5CywC6IwM0vdoLz4c5irxZUwvXfxaxl/5RZtvJVOrax+O51fqInv+LWcbeQDR8ohrhyWoK/bI23cY6oVW4hytEoby2CEYCo1eMzLsl7rAi8Rqgs0Q9sG6UXwDr/A=
09:01:32.148 DEBUG c.p.l.u.d.DBManager - query : [INSERT INTO PG_TRX_BOX (cardId,value) VALUES (?,?)] 
09:01:32.150 INFO  c.p.p.d.TrxDAO - ========== insertCard() - insertCard() - insert() : true
09:01:32.150 INFO  c.p.p.d.TrxDAO - ========== insertProduct() - prodId : pdt_f9ef-b505e5-e60-74591 - size : 1
09:01:32.150 DEBUG c.p.l.u.d.DBManager - query : [INSERT INTO PG_TRX_PRD (price,qty,name,description,regDate,mchtId,prodId) VALUES (?,?,?,?,?,?,?)] 
09:01:32.152 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
09:01:32.152 INFO  c.p.p.d.TrxDAO - ========== insertProduct() - PG_TRX_PRD insert() : 1, true
09:01:32.152 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 | 구인증 가맹점 | semiAuth : Y
09:01:32.153 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 - 신한 - 할부 개월수 : 0
09:01:32.153 INFO  c.p.p.d.TrxDAO - ========== getMchtInstall() 가맹점 할부기간정보 조회 - mchtId : lsg1712
09:01:32.153 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_MCHT_MNG WHERE  mchtId = 'lsg1712' ORDER BY regDate DESC] 
09:01:32.153 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:01:32.153 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 - mcht maxInstall : 12 cardInstall : 12
09:01:32.153 INFO  c.p.p.d.TrxDAO - ========== getVanInstall() PG사 할부기간정보 조회 - mchtId : lsg1712 | vanIdx : lsg1712
09:01:32.153 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM VW_MCHT_TMN WHERE  mchtId = 'lsg1712' AND webPay = '사용' AND vanIdx = 366 ORDER BY regDate DESC] 
09:01:32.154 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
09:01:32.154 INFO  c.p.p.p.ProcPay - ========== valid2() - 카드별 PG상점ID X
09:01:32.154 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 - van maxInstall : 12
09:01:32.154 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall01 : 12
09:01:32.154 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall02 : 12
09:01:32.154 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall03 : 12
09:01:32.154 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall04 : 12
09:01:32.154 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall05 : 12
09:01:32.154 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall06 : 12
09:01:32.154 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall07 : 12
09:01:32.154 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall08 : 12
09:01:32.154 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall09 : 12
09:01:32.154 INFO  c.p.p.p.ProcPay - ========== valid2() - request.pay.card.installment : 0
09:01:32.155 INFO  c.p.p.p.ProcPay - ========== 일시불, 할부결제 가능
09:01:32.155 INFO  c.p.p.d.TrxDAO - ========== getTrxTmnDaySum() 
09:01:32.155 DEBUG c.p.l.u.d.DBManager - query : [ SELECT IFNULL(SUM(amount),0) as tmnDailySum FROM PG_TRX_CAP  WHERE DATE_FORMAT(regDay,'%Y%m%d') = DATE_FORMAT(now(),'%Y%m%d') AND tmnId = 'HKH000728'] 
09:01:32.155 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:01:32.155 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 | tmnDailySum : 0
09:01:32.155 INFO  c.p.p.d.TrxDAO - ========== getTrxTmnMonthSum() 
09:01:32.156 DEBUG c.p.l.u.d.DBManager - query : [ SELECT IFNULL(SUM(amount),0) as tmnMonthSum FROM PG_TRX_CAP  WHERE DATE_FORMAT(regDay,'%Y%m') = DATE_FORMAT(now(),'%Y%m') AND tmnId = 'HKH000728' ] 
09:01:32.156 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:01:32.156 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 | limitMonth : 27908500
09:01:32.156 INFO  c.p.p.d.TrxDAO - ========== getTrxTmnYearSum() 
09:01:32.156 DEBUG c.p.l.u.d.DBManager - query : [ SELECT IFNULL(SUM(amount),0) as tmnYearSum FROM PG_TRX_CAP  WHERE DATE_FORMAT(regDay,'%Y') = DATE_FORMAT(now(),'%Y') AND tmnId = 'HKH000728' ] 
09:01:32.157 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
09:01:32.157 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 | limitYear : 73278500
09:01:32.469 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 | limitDay :  0 SUM : 0
09:01:32.469 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 | limitMonth :  300000000 SUM : 27908500
09:01:32.469 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 | limitYear :  0 SUM : 73278500
09:01:32.469 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 - 가맹점 건 한도 적용여부 limitOncePermit : N - 건 한도 limitOnce : 3000000
09:01:32.469 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 - 가맹점 일 한도 적용여부 limitDayPermit : N - 일 한도 limitDay : 0
09:01:32.469 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 - 가맹점 월 한도 적용여부 limitMonthPermit : H - 월 한도 limitMonth : 300000000
09:01:32.469 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000004 - 가맹점 년 한도 적용여부 limitYearPermit : N - 년 한도 limitYear : 0
09:01:32.470 INFO  c.p.p.d.TrxDAO - ========== getHighRiskTmn() - tmnId : HKH000728 - acquirer : 신한
09:01:32.470 DEBUG c.p.l.u.d.DBManager - query : [SELECT amount FROM PG_MCHT_TMN_HIGH_RISK WHERE  tmnId = 'HKH000728' AND acquirer LIKE '%신한%' ORDER BY regDate DESC LIMIT 1] 
09:01:32.470 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:01:32.470 INFO  c.p.p.p.ProcPay - ========== ========== ========== ========== ========== valid2() - END
09:01:32.470 INFO  c.p.p.p.ProcPay - ========== ========== ========== ========== ========== exec() - set2() - END 
09:01:32.470 INFO  c.p.p.p.ProcPay - ========== exec() - trxId : T230228000004 | mchtId : lsg1712
09:01:32.470 INFO  c.p.p.d.TrxDAO - ========== insertTrxREQ() 
09:01:32.470 DEBUG c.p.l.u.d.DBManager - query : [INSERT INTO PG_TRX_REQ (last4,amount,tmnId,trackId,bin,cardType,regDate,trxType,prodId,acquirer,trxId,issuer,regDay,compNo,regTime,salesId,cardId,installment,payerTel,mchtId,payerName,payerEmail,compMember) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)] 
09:01:32.474 DEBUG c.p.lib.dao.DAO - elapsedTime : [4]msec
09:01:32.474 INFO  c.p.p.d.TrxDAO - ========== insertTrxREQ() - insert() : true, T230228000004
09:01:32.475 INFO  c.p.p.p.ProcPay - 
09:01:32.475 INFO  c.p.p.p.ProcPay - ========== exec() - 카드별 PG상점ID관리 조회
09:01:32.475 INFO  c.p.p.d.TrxDAO - ========== getVanByBrand() - bin : 625840
09:01:32.475 DEBUG c.p.l.u.d.DBManager - query : [SELECT A.* FROM PG_VAN A JOIN (SELECT * FROM PG_CODE_BIN WHERE bin = 625840 GROUP BY brand) B ON A.brand = B.brand WHERE A.status = '사용' ] 
09:01:32.476 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
09:01:32.476 INFO  c.p.p.p.ProcPay - ========== valid2() - vanBrandMap NULL
09:01:32.476 INFO  c.p.p.d.TrxDAO - ========== getMchtTmnByVanIdx() - vanIdx : 366 mchtId : lsg1712
09:01:32.476 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM VW_MCHT_TMN WHERE  vanIdx = 366 AND mchtId = 'lsg1712' ORDER BY regDate DESC] 
09:01:32.477 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
09:01:32.477 INFO  c.p.p.p.ProcPay - 
09:01:32.477 INFO  c.p.p.p.ProcPay - ========== exec() - van : WELCOME
09:01:32.477 INFO  c.p.p.p.ProcPay - ========== exec() - 9 van : WELCOME | check semiAuth : Y
09:01:32.477 INFO  c.p.p.p.ProcPay - ========== exec() - 10 WELCOME - 인증결제 X
09:01:32.477 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== ========== VAN SET 
09:01:32.477 INFO  c.p.p.v.Welcome - ========== ========== ========== Welcome VAN : WELCOME
09:01:32.477 INFO  c.p.p.v.Welcome - ========== ========== ========== Welcome MID vanId : wel000455m
09:01:32.477 INFO  c.p.p.v.Welcome - ========== ========== ========== Welcome APIKEY : 820b408bd2c1cfc4d59cb25203790f25
09:01:32.477 INFO  c.p.p.v.Welcome - ========== ========== ========== Welcome IV_VALUE : f9f4e1f06edc41bddd1eaedb75806668
09:01:32.477 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== ========== VAN SET 
09:01:32.478 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== ========== sales() - trxId : T230228000004 - WELCOME BEGIN
09:01:32.478 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== WELCOME VAN RESET
09:01:32.478 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000004 - WELCOME MAP_VAN : WELCOME
09:01:32.478 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000004 - WELCOME MAP_VAN_ID : wel000455m
09:01:32.478 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000004 - WELCOME MAP_APIKEY : 820b408bd2c1cfc4d59cb25203790f25
09:01:32.478 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000004 - WELCOME MAP_IV_VALUE : f9f4e1f06edc41bddd1eaedb75806668
09:01:32.478 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000004 - WELCOME cardNo : 625840******9981
09:01:32.478 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000004 - WELCOME 웰컴 구인증 결제 payMedhod : CREDIT_OLDAUTH_API
09:01:32.478 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000004 - WELCOME value : wel000455mCREDIT_CARDCREDIT_OLDAUTH_APIT230228******8820b408bd2c1cfc4d59cb25203790f25
09:01:32.478 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000004 - WELCOME hash_value : 8bd1b6ff6a98ea925fdd7e7afbd3e63e018e7fd28b8e94a162102fe578d7d8fa
09:01:32.478 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000004 - WELCOME authPw 구인증 비밀번호 : 12
09:01:32.478 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000004 - WELCOME authPw Enc : 495cbdeaeddef7bf8b355861f6564111
09:01:32.478 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000004 - WELCOME authDob 구인증 생년월일 : 560710
09:01:32.479 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000004 - WELCOME authDob Enc : ca4b87630a89041e30ce1999c6f3ddfa
09:01:32.479 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000004 - WELCOME Req_Msg : {order_no=T230228000004, amount=150000, user_name=이수미, mid=wel000455m, echo=, pay_method=CREDIT_OLDAUTH_API, product_name=암브로시아, card_holder_ymd=ca4b87630a89041e30ce1999c6f3ddfa, card_pw=495cbdeaeddef7bf8b355861f6564111, card_no=032648ada84465a3748f63dda85c87818e3eba4cd7d2795cec4221ff7c6f406a, pay_type=CREDIT_CARD, card_sell_mm=00, millis=1677542492478, hash_value=8bd1b6ff6a98ea925fdd7e7afbd3e63e018e7fd28b8e94a162102fe578d7d8fa, card_expiry_ym=2306}
09:01:32.479 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000004 - WELCOME van : WELCOME - vanId : wel000455m
09:01:32.479 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== getJsonString() - jsonObject.toJSONString : {"order_no":"T230228000004","amount":"150000","user_name":"이수미","mid":"wel000455m","echo":"","pay_method":"CREDIT_OLDAUTH_API","product_name":"암브로시아","card_holder_ymd":"ca4b87630a89041e30ce1999c6f3ddfa","card_pw":"495cbdeaeddef7bf8b355861f6564111","card_no":"032648ada84465a3748f63dda85c87818e3eba4cd7d2795cec4221ff7c6f406a","pay_type":"CREDIT_CARD","card_sell_mm":"00","millis":"1677542492478","hash_value":"8bd1b6ff6a98ea925fdd7e7afbd3e63e018e7fd28b8e94a162102fe578d7d8fa","card_expiry_ym":"2306"}
09:01:32.479 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange() - BEGIN
09:01:32.479 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange() - url : https://payapi.welcomepayments.co.kr/api/payment/approval
09:01:32.480 DEBUG c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange() headers : [Content-Type:"application/json;charset=UTF-8"]
09:01:32.480 DEBUG o.s.w.c.RestTemplate - HTTP POST https://payapi.welcomepayments.co.kr/api/payment/approval
09:01:32.480 DEBUG o.s.w.c.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
09:01:32.480 DEBUG o.s.w.c.RestTemplate - Writing [{"order_no":"T230228000004","amount":"150000","user_name":"이수미","mid":"wel000455m","echo":"","pay_method":"CREDIT_OLDAUTH_API","product_name":"암브로시아","card_holder_ymd":"ca4b87630a89041e30ce1999c6f3ddfa","card_pw":"495cbdeaeddef7bf8b355861f6564111","card_no":"032648ada84465a3748f63dda85c87818e3eba4cd7d2795cec4221ff7c6f406a","pay_type":"CREDIT_CARD","card_sell_mm":"00","millis":"1677542492478","hash_value":"8bd1b6ff6a98ea925fdd7e7afbd3e63e018e7fd28b8e94a162102fe578d7d8fa","card_expiry_ym":"2306"}] as "application/json;charset=UTF-8"
09:01:34.653 DEBUG o.s.w.c.RestTemplate - Response 200 OK
09:01:34.654 DEBUG o.s.w.c.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
09:01:34.655 DEBUG c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange Exception - entity : 
<{"order_no":"T230228000004","amount":"150000","user_name":"이수미","mid":"wel000455m","echo":"","pay_method":"CREDIT_OLDAUTH_API","product_name":"암브로시아","card_holder_ymd":"ca4b87630a89041e30ce1999c6f3ddfa","card_pw":"495cbdeaeddef7bf8b355861f6564111","card_no":"032648ada84465a3748f63dda85c87818e3eba4cd7d2795cec4221ff7c6f406a","pay_type":"CREDIT_CARD","card_sell_mm":"00","millis":"1677542492478","hash_value":"8bd1b6ff6a98ea925fdd7e7afbd3e63e018e7fd28b8e94a162102fe578d7d8fa","card_expiry_ym":"2306"},[Content-Type:"application/json;charset=UTF-8"]>
09:01:34.656 DEBUG c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange Exception - response NOT NULL : <200,{"transactionType":"AUTH","result_code":"0000","result_message":"카드 결제 성공","mid":"wel000455m","order_no":"T230228000004","user_name":"이수미","amount":"150000","product_name":"암브로시아","card_sell_mm":"00","echo":"","approval_no":"03717748","transaction_no":"20230******9909","approval_ymdhms":"20230******5659","card_code":"66","card_name":"신한"},[Date:"Mon, 27 Feb 2023 23:56:59 GMT", Content-Type:"application/json;charset=UTF-8", Content-Length:"371", Connection:"keep-alive", Set-Cookie:"SCOUTER=x7vjd8ebge38i3;Max-Age=2147483647;path=/", Strict-Transport-Security:"max-age=31536000; includeSubdomains", X-Content-Type-Options:"nosniff", X-Frame-Options:"sameorigin"]>
09:01:34.657 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange() - END
09:01:34.657 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000004 - WELCOME apiExchange() res : <200,{"transactionType":"AUTH","result_code":"0000","result_message":"카드 결제 성공","mid":"wel000455m","order_no":"T230228000004","user_name":"이수미","amount":"150000","product_name":"암브로시아","card_sell_mm":"00","echo":"","approval_no":"03717748","transaction_no":"20230******9909","approval_ymdhms":"20230******5659","card_code":"66","card_name":"신한"},[Date:"Mon, 27 Feb 2023 23:56:59 GMT", Content-Type:"application/json;charset=UTF-8", Content-Length:"371", Connection:"keep-alive", Set-Cookie:"SCOUTER=x7vjd8ebge38i3;Max-Age=2147483647;path=/", Strict-Transport-Security:"max-age=31536000; includeSubdomains", X-Content-Type-Options:"nosniff", X-Frame-Options:"sameorigin"]>
09:01:34.658 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000004 - WELCOME apiExchange() Status : 200 OK
09:01:34.658 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000004 - WELCOME apiExchange() body : {"transactionType":"AUTH","result_code":"0000","result_message":"카드 결제 성공","mid":"wel000455m","order_no":"T230228000004","user_name":"이수미","amount":"150000","product_name":"암브로시아","card_sell_mm":"00","echo":"","approval_no":"03717748","transaction_no":"20230******9909","approval_ymdhms":"20230******5659","card_code":"66","card_name":"신한"}
09:01:34.659 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000004 - WELCOME apiExchange() statusCode : 200
09:01:34.659 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000004 - WELCOME apiExchange() statusMessage : OK
09:01:34.659 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000004 - WELCOME res : <200,{"transactionType":"AUTH","result_code":"0000","result_message":"카드 결제 성공","mid":"wel000455m","order_no":"T230228000004","user_name":"이수미","amount":"150000","product_name":"암브로시아","card_sell_mm":"00","echo":"","approval_no":"03717748","transaction_no":"20230******9909","approval_ymdhms":"20230******5659","card_code":"66","card_name":"신한"},[Date:"Mon, 27 Feb 2023 23:56:59 GMT", Content-Type:"application/json;charset=UTF-8", Content-Length:"371", Connection:"keep-alive", Set-Cookie:"SCOUTER=x7vjd8ebge38i3;Max-Age=2147483647;path=/", Strict-Transport-Security:"max-age=31536000; includeSubdomains", X-Content-Type-Options:"nosniff", X-Frame-Options:"sameorigin"]>
09:01:34.659 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000004 - WELCOME connObj = connParser.parse(res.getBody()); - res.getBody() : {"transactionType":"AUTH","result_code":"0000","result_message":"카드 결제 성공","mid":"wel000455m","order_no":"T230228000004","user_name":"이수미","amount":"150000","product_name":"암브로시아","card_sell_mm":"00","echo":"","approval_no":"03717748","transaction_no":"20230******9909","approval_ymdhms":"20230******5659","card_code":"66","card_name":"신한"}
09:01:34.659 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== ========== sales() - trxId : T230228000004 - WELCOME END
09:01:34.660 INFO  c.p.p.p.ProcPay - ========== sharedMap issuer : 
09:01:34.660 INFO  c.p.p.p.ProcPay - ========== sharedMap cardAcquirer : 신한
09:01:34.660 INFO  c.p.p.p.ProcPay - ========== response issuer : 신한카드
09:01:34.660 INFO  c.p.p.p.ProcPay - ========== response acquirer : 신한
09:01:34.660 INFO  c.p.p.p.ProcPay - ========== 
09:01:34.660 INFO  c.p.p.p.ProcPay - ========== 비교결과 : 2741
09:01:34.660 INFO  c.p.p.p.ProcPay - ========== 리턴 카드사명 : [신한]
09:01:34.660 INFO  c.p.p.p.ProcPay - ========== 디비 카드사명 : code[020] cname[축협] calias[축협(농협)]
09:01:34.660 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -8576
09:01:34.660 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:01:34.660 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:01:34.660 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1317
09:01:34.660 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:01:34.660 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:01:34.660 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1821
09:01:34.661 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:01:34.661 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:01:34.661 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -8232
09:01:34.661 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:01:34.661 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:01:34.661 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -52554
09:01:34.661 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:01:34.661 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:01:34.661 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -6588
09:01:34.661 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:01:34.661 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:01:34.661 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -2741
09:01:34.661 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:01:34.661 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:01:34.661 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -2741
09:01:34.661 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:01:34.662 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:01:34.662 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -52551
09:01:34.662 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:01:34.662 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:01:34.662 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -2157
09:01:34.662 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:01:34.662 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:01:34.662 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1429
09:01:34.662 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:01:34.662 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:01:34.662 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -52551
09:01:34.662 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:01:34.662 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:01:34.662 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3277
09:01:34.662 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:01:34.662 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:01:34.663 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -2941
09:01:34.663 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:01:34.663 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:01:34.663 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -52554
09:01:34.663 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:01:34.663 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:01:34.663 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -2741
09:01:34.663 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:01:34.663 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:01:34.663 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1765
09:01:34.663 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:01:34.663 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:01:34.663 INFO  c.p.p.p.ProcPay - ========== 
09:01:34.663 INFO  c.p.p.p.ProcPay - ========== 비교결과 : 1987
09:01:34.663 INFO  c.p.p.p.ProcPay - ========== 리턴 카드사명 : [축협(농협)]
09:01:34.664 INFO  c.p.p.p.ProcPay - ========== 디비 카드사명 : code[016] cname[하나] calias[하나]
09:01:34.664 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -8575
09:01:34.664 INFO  c.p.p.p.ProcPay - ========== issuer : 하나카드
09:01:34.664 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나
09:01:34.664 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3164
09:01:34.664 INFO  c.p.p.p.ProcPay - ========== issuer : 하나카드
09:01:34.664 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나
09:01:34.664 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3304
09:01:34.664 INFO  c.p.p.p.ProcPay - ========== issuer : 하나카드
09:01:34.664 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나
09:01:34.664 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -5908
09:01:34.664 INFO  c.p.p.p.ProcPay - ========== issuer : 하나카드
09:01:34.664 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나
09:01:34.664 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -54541
09:01:34.664 INFO  c.p.p.p.ProcPay - ========== issuer : 하나카드
09:01:34.664 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나
09:01:34.665 INFO  c.p.p.p.ProcPay - ========== 
09:01:34.665 INFO  c.p.p.p.ProcPay - ========== 비교결과 : 4
09:01:34.665 INFO  c.p.p.p.ProcPay - ========== 리턴 카드사명 : [하나]
09:01:34.665 INFO  c.p.p.p.ProcPay - ========== 디비 카드사명 : code[003] cname[하나(외환)] calias[하나(외환)]
09:01:34.665 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -5276
09:01:34.665 INFO  c.p.p.p.ProcPay - ========== issuer : 하나(외환)카드
09:01:34.665 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나(외환)
09:01:34.665 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -4728
09:01:34.665 INFO  c.p.p.p.ProcPay - ========== issuer : 하나(외환)카드
09:01:34.665 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나(외환)
09:01:34.665 INFO  c.p.p.p.ProcPay - ========== 
09:01:34.665 INFO  c.p.p.p.ProcPay - ========== 비교결과 : 172
09:01:34.665 INFO  c.p.p.p.ProcPay - ========== 리턴 카드사명 : [하나(외환)]
09:01:34.665 INFO  c.p.p.p.ProcPay - ========== 디비 카드사명 : code[007] cname[현대] calias[현대]
09:01:34.665 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -7573
09:01:34.666 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.666 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.666 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -168
09:01:34.666 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.666 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.666 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -2159
09:01:34.666 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.666 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.666 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -10483
09:01:34.666 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.666 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.666 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3584
09:01:34.666 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.666 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.666 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3560
09:01:34.666 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.667 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.667 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -5460
09:01:34.667 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.667 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.667 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -144
09:01:34.667 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.667 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.667 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -144
09:01:34.667 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.667 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.667 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -144
09:01:34.667 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.667 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.667 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -144
09:01:34.667 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.667 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.668 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -144
09:01:34.668 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.668 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.668 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -54705
09:01:34.668 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.668 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.668 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3924
09:01:34.668 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.668 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.668 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3588
09:01:34.668 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.668 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.668 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3780
09:01:34.668 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.668 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.669 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -5436
09:01:34.669 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.669 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.669 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -54713
09:01:34.669 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.669 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.669 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1936
09:01:34.669 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.669 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.669 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1796
09:01:34.669 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.669 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.669 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -54708
09:01:34.669 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.669 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.669 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1936
09:01:34.670 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.670 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.670 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -54705
09:01:34.670 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.670 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.670 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -9440
09:01:34.670 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.670 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.670 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -9335
09:01:34.670 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:01:34.670 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:01:34.670 INFO  c.p.p.d.TrxDAO - ========== insertTrxRES() 
09:01:34.670 INFO  c.p.p.d.TrxDAO - ========== insertTrxRES() - van : WELCOME
09:01:34.670 INFO  c.p.p.d.TrxDAO - ========== insertTrxRES() - vanId : wel000455m
09:01:34.670 INFO  c.p.p.d.TrxDAO - ========== insertTrxRES() - salesId : 
09:01:34.671 DEBUG c.p.l.u.d.DBManager - query : [INSERT INTO PG_TRX_RES (resultCd,van,vanTrxId,authCd,regDate,pairingCid,trxId,resultMsg,regDay,compNo,pairingVtid,pairingRouteVan,vanId,regTime,salesId,vanResultMsg,vanResultCd,compMember) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)] 
09:01:34.675 DEBUG c.p.lib.dao.DAO - elapsedTime : [4]msec
09:01:34.675 INFO  c.p.p.d.TrxDAO - ========== insertTrxRES() - insert() : true
09:01:34.675 INFO  c.p.p.d.TrxDAO - ========== insertTrxPAY() 
09:01:34.675 INFO  c.p.p.d.TrxDAO - INSERT INTO PG_TRX_PAY 
(trxId, mchtId, tmnId, trackId, payerName, 
payerEmail, payerTel, amount, installment, cardId, 
cardType, BIN, last4, status, prodId, 
issuer, acquirer, reqDay, reqTime, authCd, 
resultCd, resultMsg, van, vanId, vanTrxId, 
cyrexVtid, cyrexRouteVan, cyrexCid, regDay, regTime, 
regDate, reqDate, compNo, compMember, semiAuth, 
salesId, cancelType ) 
SELECT A.trxId, mchtId, tmnId, trackId, payerName, 
payerEmail, payerTel, amount, installment, cardId, 
cardType, bin, last4, '승인', prodId, 
issuer, acquirer,  A.regDay, A.regTime, authCd, 
resultCd, resultMsg, van, vanId, vanTrxId, 
B.pairingVtid, B.pairingRouteVan, B.pairingCid, B.regDay, B.regTime, 
B.regDate, A.regDate,  A.compNo,  A.compMember,  A.semiAuth,  
A.salesId, '' 
FROM PG_TRX_REQ A, PG_TRX_RES B 
WHERE A.trxId = B.trxId AND A.trxId = 'T230228000004'; 
09:01:34.675 DEBUG c.p.l.u.d.DBManager - query : [INSERT INTO PG_TRX_PAY 
(trxId, mchtId, tmnId, trackId, payerName, 
payerEmail, payerTel, amount, installment, cardId, 
cardType, BIN, last4, status, prodId, 
issuer, acquirer, reqDay, reqTime, authCd, 
resultCd, resultMsg, van, vanId, vanTrxId, 
cyrexVtid, cyrexRouteVan, cyrexCid, regDay, regTime, 
regDate, reqDate, compNo, compMember, semiAuth, 
salesId, cancelType ) 
SELECT A.trxId, mchtId, tmnId, trackId, payerName, 
payerEmail, payerTel, amount, installment, cardId, 
cardType, bin, last4, '승인', prodId, 
issuer, acquirer,  A.regDay, A.regTime, authCd, 
resultCd, resultMsg, van, vanId, vanTrxId, 
B.pairingVtid, B.pairingRouteVan, B.pairingCid, B.regDay, B.regTime, 
B.regDate, A.regDate,  A.compNo,  A.compMember,  A.semiAuth,  
A.salesId, '' 
FROM PG_TRX_REQ A, PG_TRX_RES B 
WHERE A.trxId = B.trxId AND A.trxId = 'T230228000004'; ] 
09:01:34.678 DEBUG c.p.lib.dao.DAO - elapsedTime : [3]msec
09:01:34.678 INFO  c.p.p.d.TrxDAO - ========== insertTrxPAY - update() : true
09:01:34.678 INFO  c.p.p.p.ProcPay - ========== LAST issuer : 현대카드
09:01:34.678 INFO  c.p.p.p.ProcPay - ========== LAST acquirer : 현대
09:01:34.678 INFO  c.p.p.proc.Proc - ========== ========== ========== ========== ========== setResponse2() - BEGIN
09:01:34.678 INFO  c.p.p.proc.Proc - ========== setResponse2() - trxId : T230228000004
09:01:34.678 INFO  c.p.p.proc.Proc - ========== setResponse2() - trxId : T230228000004 - updateTrxIO() 
09:01:34.679 INFO  c.p.p.d.TrxDAO - ========== updateTrxIO()
09:01:34.679 DEBUG c.p.l.u.d.DBManager - query : [UPDATE PG_TRX_IO SET resDay=?,resTime=?,resData=?,status=? WHERE  trxId = 'T230228000004'] 
09:01:34.681 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
09:01:34.681 INFO  c.p.p.d.TrxDAO - ========== set TRX_IO : true
09:01:34.681 INFO  c.p.p.proc.Proc - ========== setResponse2() - trxId : T230228000004 - updateTrxReq() 
09:01:34.681 INFO  c.p.p.d.TrxDAO - ========== setResponse2() - updateTrxReq() 
09:01:34.681 DEBUG c.p.l.u.d.DBManager - query : [UPDATE PG_TRX_REQ SET semiAuth=? WHERE  trxId = 'T230228000004'] 
09:01:34.684 DEBUG c.p.lib.dao.DAO - elapsedTime : [3]msec
09:01:34.684 INFO  c.p.p.d.TrxDAO - ========== set PG_TRX_REQ : true
09:01:34.684 INFO  c.p.p.proc.Proc - ========== setResponse2() - trxId : T230228000004 - updateTrxPAY() 
09:01:34.684 INFO  c.p.p.d.TrxDAO - ========== setResponse2() - updateTrxPay() 
09:01:34.684 DEBUG c.p.l.u.d.DBManager - query : [UPDATE PG_TRX_PAY SET semiAuth=? WHERE  trxId = 'T230228000004'] 
09:01:34.686 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
09:01:34.686 INFO  c.p.p.d.TrxDAO - ========== set PG_TRX_PAY : true
09:01:34.686 INFO  c.p.l.v.m.VertXMessage - res : [{
  "result": {
    "resultCd": "0000",
    "resultMsg": "정상",
    "advanceMsg": "정상승인",
    "create": "20230228090134"
  },
  "pay": {
    "authCd": "03717748",
    "card": {
      "cardId": "card_944e-fc6f39-762-7a37a",
      "installment": 0,
      "bin": "625840",
      "last4": "9981",
      "issuer": "현대카드",
      "cardType": "신용",
      "acquirer": "현대"
    },
    "trxDate": "20230******5659",
    "webhookUrl": "",
    "products": [
      {
        "prodId": "pdt_f9ef-b505e5-e60-74591",
        "name": "암브로시아",
        "qty": 1,
        "price": 150000,
        "desc": "WEBPAY",
        "mchtId": ""
      }
    ],
    "mchtId": "lsg1712",
    "salesId": "",
    "trxId": "T230228000004",
    "trxType": "ONTR",
    "tmnId": "HKH000728",
    "trackId": "TS6710168755012",
    "amount": 150000,
    "udf1": "",
    "udf2": "",
    "metadata": {
      "cardAuth": "true",
      "authPw": "12",
      "authDob": "560710"
    }
  }
}],[application/json]

09:01:34.687 INFO  c.p.p.proc.Proc - estimatedTime : 2547
09:01:34.687 INFO  c.p.p.proc.Proc - ========== ========== ========== ========== ========== setResponse2() - END
09:01:34.687 INFO  c.p.p.p.ProcPay - ========== ========== ========== ========== ========== exec() - END 
09:01:34.687 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== apiHandler END
09:02:18.991 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : {T230228000004=5}
09:02:18.991 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : T230228000004 : 4
09:03:00.438 INFO  c.p.p.m.Listener - ========== formHandler
09:03:00.438 INFO  c.p.p.m.Listener - ========== log() - HTTP_1_0,/form/payment/layout,GET,175.196.61.18,,,Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36
09:03:00.438 DEBUG c.g.j.h.i.HbsParserFactory - About to parse: io.vertx.ext.web.templ.impl.HandlebarsTemplateEngineImpl$Loader$1@496eda7c
09:03:00.438 DEBUG c.g.j.h.i.HbsParserFactory - Building AST
09:03:00.438 DEBUG c.g.j.h.i.HbsParserFactory - Creating templates
09:03:00.687 INFO  c.p.p.m.Listener - ========== apiHandler
09:03:00.687 INFO  c.p.p.m.Listener - ========== log() - HTTP_1_0,/api/widget,POST,175.196.61.18,application/json,394,Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36
09:03:00.688 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== apiHandler() - BEGIN
09:03:00.688 INFO  c.p.l.v.m.VertXUtil - req : [{"widget":{"payRoute":"regular","publicKey":"pk_67ea-5238fb-27d-a7b85","amount":"880000","trackId":"TS8387711513755","redirectUrl":"","webhookUrl":"","widgetLogoUrl":"","mode":"layer","debugMode":"live","debug":true,"products":[{"name":"암브로시아","price":"880000","qty":1,"desc":"WEBPAY"}],"udf1":"","udf2":"","payerName":"정순철","payerEmail":"","payerTel":"85070194 ","salesId":""}}],[394]
09:03:00.690 INFO  c.p.p.main.Api - ========== apiHandler() -  uri : /api/widget, method : POST, ip : 175.196.61.18
09:03:00.691 INFO  c.p.l.v.m.VertXUtil - req : [{"widget":{"payRoute":"regular","publicKey":"pk_67ea-5238fb-27d-a7b85","amount":"880000","trackId":"TS8387711513755","redirectUrl":"","webhookUrl":"","widgetLogoUrl":"","mode":"layer","debugMode":"live","debug":true,"products":[{"name":"암브로시아","price":"880000","qty":1,"desc":"WEBPAY"}],"udf1":"","udf2":"","payerName":"정순철","payerEmail":"","payerTel":"85070194 ","salesId":""}}],[394]
09:03:00.693 DEBUG c.p.l.u.d.DBManager - query : [UPDATE PG_SEQUENCE SET processcnt=?,prevday=? WHERE  idx = 1] 
09:03:00.697 DEBUG c.p.lib.dao.DAO - elapsedTime : [4]msec
09:03:00.698 INFO  c.p.p.d.TrxDAO - ========== GetCurrentFromCalendar - 페어링 주문번호 DB 저장 OK : glb_processcnt = 5 |  glb_prevday = 20230228
09:03:00.698 INFO  c.p.p.main.Api - ========== apiHandler() ========== trixId : T230228000005
09:03:00.698 INFO  c.p.l.v.m.VertXUtil - req : [{"widget":{"payRoute":"regular","publicKey":"pk_67ea-5238fb-27d-a7b85","amount":"880000","trackId":"TS8387711513755","redirectUrl":"","webhookUrl":"","widgetLogoUrl":"","mode":"layer","debugMode":"live","debug":true,"products":[{"name":"암브로시아","price":"880000","qty":1,"desc":"WEBPAY"}],"udf1":"","udf2":"","payerName":"정순철","payerEmail":"","payerTel":"85070194 ","salesId":""}}],[394]
09:03:00.698 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== authorization() - BEGIN
09:03:00.698 INFO  c.p.p.main.Api - ========== authorization() - trxId : T230228000005 | mchtId : 
09:03:00.698 INFO  c.p.p.main.Api - ========== ========== ========== ==========  ========== syntax() - BEGIN
09:03:00.698 INFO  c.p.p.main.Api - ========== syntax() - trxId : T230228000005 | mchtId : 
09:03:00.699 INFO  c.p.p.main.Api - ========== ========== ========== ==========  ========== syntax() - END
09:03:00.699 INFO  c.p.p.d.TrxDAO - ========== getMchtTmnByPayKey() - payKey : pk_67ea-5238fb-27d-a7b85
09:03:00.699 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_MCHT_TMN WHERE  payKey = 'pk_67ea-5238fb-27d-a7b85' ORDER BY regDate DESC] 
09:03:00.699 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:03:00.700 INFO  c.p.p.d.TrxDAO - ========== getMchtByMchtId() - mchtId : lsg1712
09:03:00.700 INFO  c.p.p.d.TrxDAO - ========== getMchtMngByMchtId() - mchtId : lsg1712
09:03:00.700 INFO  c.p.p.main.Api - sharedObject - mcht : 44
09:03:00.700 INFO  c.p.p.main.Api - sharedObject - mchtTmn : 24
09:03:00.700 INFO  c.p.p.main.Api - sharedObject - mchtMng : 52
09:03:00.700 INFO  c.p.p.d.TrxDAO - ========== getMchtTmnByVanIdx2() - vanIdx : 366 mchtId : lsg1712
09:03:00.700 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM VW_MCHT_TMN WHERE  vanIdx = 366 AND mchtId = 'lsg1712' ORDER BY regDate DESC] 
09:03:00.700 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:03:00.701 INFO  c.p.p.d.TrxDAO - ========== getVanByVanIdx2() - vanIdx : 366
09:03:00.701 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_VAN WHERE  idx = '366' ORDER BY regDate DESC] 
09:03:00.701 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:03:00.701 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== authorization() - END
09:03:00.701 INFO  c.p.p.main.Api - ========== apiHandler() - trxId : T230228000005 | mchtId : lsg1712 - Proc process SET
09:03:00.701 INFO  c.p.p.p.ProcWidget - ========== ========== ========== ========== ========== exec() - set2() - BEGIN 
09:03:00.701 INFO  c.p.p.p.ProcWidget - ========== exec() - trxId : T230228000005 | mchtId : lsg1712
09:03:00.701 INFO  c.p.p.p.ProcWidget - ========== exec() - trxId : T230228000005 | mchtMap mchtId : lsg1712
09:03:00.701 INFO  c.p.p.p.ProcWidget - ========== ProcWidget valid - save as key : key_167754258070118e9fc3
09:03:00.701 INFO  c.p.p.p.ProcWidget - ProcWidget valid - save as key : key_167754258070118e9fc3
09:03:00.702 INFO  c.p.l.u.m.SharedCacheMap - cache timeout : key : PG_MCHT_MNG_gms3982 
09:03:00.702 INFO  c.p.l.u.m.SharedCacheMap - cache timeout : key : VW_MCHT_TMN_IDX_gms3982_366 
09:03:00.702 INFO  c.p.p.p.ProcWidget - ========== ========== ========== ========== ========== exec() - set2() - END 
09:03:00.702 INFO  c.p.p.proc.Proc - ========== ========== ========== ========== ========== setResponse2() - BEGIN
09:03:00.702 INFO  c.p.p.proc.Proc - ========== setResponse2() - trxId : T230228000005
09:03:00.702 INFO  c.p.l.v.m.VertXMessage - res : [{
  "result": {
    "resultCd": "0000",
    "resultMsg": "정상",
    "advanceMsg": "정상완료",
    "create": "20230228090300"
  },
  "widget": {
    "nick": "",
    "apiMaxInstall": 12,
    "routeUrl": "/form/payment/pairingsolution/index.html?token\u003dkey_167754258070118e9fc3",
    "semiAuth": "Y",
    "tmnId": "HKH000728",
    "key": "key_167754258070118e9fc3",
    "target": "PAIRINGSOLUTION"
  }
}],[application/json]

09:03:00.702 INFO  c.p.p.proc.Proc - estimatedTime : 1
09:03:00.702 INFO  c.p.p.proc.Proc - ========== ========== ========== ========== ========== setResponse2() - END
09:03:00.702 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== apiHandler END
09:03:00.712 INFO  c.p.p.m.Listener - ========== formHandler
09:03:00.713 INFO  c.p.p.m.Listener - ========== log() - HTTP_1_0,/form/payment/pairingsolution/index.html?token=key_167754258070118e9fc3,GET,175.196.61.18,,,Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36
09:03:00.713 DEBUG c.g.j.h.i.HbsParserFactory - About to parse: io.vertx.ext.web.templ.impl.HandlebarsTemplateEngineImpl$Loader$1@6380f1a4
09:03:00.713 DEBUG c.g.j.h.i.HbsParserFactory - Building AST
09:03:00.724 DEBUG c.g.j.h.i.HbsParserFactory - Creating templates
09:03:00.797 INFO  c.p.p.m.Listener - ========== apiHandler
09:03:00.797 INFO  c.p.p.m.Listener - ========== log() - HTTP_1_0,/api/widget/key_167754258070118e9fc3,GET,175.196.61.18,,,Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36
09:03:00.798 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== apiHandler() - BEGIN
09:03:00.798 INFO  c.p.l.v.m.VertXUtil - req : [],[0]
09:03:00.798 INFO  c.p.p.main.Api - ========== apiHandler() -  uri : /api/widget/key_167754258070118e9fc3, method : GET, ip : 175.196.61.18
09:03:00.798 INFO  c.p.l.v.m.VertXUtil - req : [],[0]
09:03:00.798 DEBUG c.p.l.u.d.DBManager - query : [UPDATE PG_SEQUENCE SET processcnt=?,prevday=? WHERE  idx = 1] 
09:03:00.800 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
09:03:00.801 INFO  c.p.p.d.TrxDAO - ========== GetCurrentFromCalendar - 페어링 주문번호 DB 저장 OK : glb_processcnt = 6 |  glb_prevday = 20230228
09:03:00.801 INFO  c.p.p.main.Api - ========== apiHandler() ========== trixId : T230228000006
09:03:00.801 INFO  c.p.l.v.m.VertXUtil - req : [],[0]
09:03:00.801 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== authorization() - BEGIN
09:03:00.801 INFO  c.p.p.main.Api - ========== authorization() - trxId : T230228000006 | mchtId : 
09:03:00.801 DEBUG c.p.p.main.Api - ========== sharedMap PAYUNIT.TRX_ID : T230228000006 ========== authorization() - invalid content-type : 
09:03:00.801 INFO  c.p.p.d.TrxDAO - ========== getMchtTmnByPayKey() - payKey : pk_67ea-5238fb-27d-a7b85
09:03:00.801 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_MCHT_TMN WHERE  payKey = 'pk_67ea-5238fb-27d-a7b85' ORDER BY regDate DESC] 
09:03:00.802 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
09:03:00.802 INFO  c.p.p.d.TrxDAO - ========== getMchtByMchtId() - mchtId : lsg1712
09:03:00.802 INFO  c.p.p.d.TrxDAO - ========== getMchtMngByMchtId() - mchtId : lsg1712
09:03:00.802 INFO  c.p.p.main.Api - sharedObject - mcht : 44
09:03:00.802 INFO  c.p.p.main.Api - sharedObject - mchtTmn : 24
09:03:00.803 INFO  c.p.p.main.Api - sharedObject - mchtMng : 52
09:03:00.803 INFO  c.p.p.d.TrxDAO - ========== getMchtTmnByVanIdx2() - vanIdx : 366 mchtId : lsg1712
09:03:00.803 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM VW_MCHT_TMN WHERE  vanIdx = 366 AND mchtId = 'lsg1712' ORDER BY regDate DESC] 
09:03:00.803 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:03:00.803 INFO  c.p.p.d.TrxDAO - ========== getVanByVanIdx2() - vanIdx : 366
09:03:00.804 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_VAN WHERE  idx = '366' ORDER BY regDate DESC] 
09:03:00.804 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:03:00.804 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== authorization() - END
09:03:00.804 INFO  c.p.p.main.Api - ========== apiHandler() - trxId : T230228000006 | mchtId : lsg1712 - Proc process SET
09:03:00.804 INFO  c.p.p.p.ProcWidget - ========== ========== ========== ========== ========== exec() - set2() - BEGIN 
09:03:00.804 INFO  c.p.p.p.ProcWidget - ========== exec() - trxId : T230228000006 | mchtId : lsg1712
09:03:00.804 INFO  c.p.p.p.ProcWidget - ========== exec() - trxId : T230228000006 | mchtMap mchtId : lsg1712
09:03:00.804 INFO  c.p.p.p.ProcWidget - ========== valid2() - call key : key_167754258070118e9fc3
09:03:00.804 INFO  c.p.p.p.ProcWidget - ========== ========== ========== ========== ========== exec() - set2() - END 
09:03:00.805 INFO  c.p.p.proc.Proc - ========== ========== ========== ========== ========== setResponse2() - BEGIN
09:03:00.805 INFO  c.p.p.proc.Proc - ========== setResponse2() - trxId : T230228000006
09:03:00.805 INFO  c.p.l.v.m.VertXMessage - res : [{
  "result": {
    "resultCd": "0000",
    "resultMsg": "정상",
    "advanceMsg": "정상완료",
    "create": "20230228090300"
  },
  "widget": {
    "amount": "880000",
    "redirectUrl": "",
    "debug": true,
    "tmnId": "HKH000728",
    "trackId": "TS8387711513755",
    "publicKey": "pk_67ea-5238fb-27d-a7b85",
    "udf1": "",
    "udf2": "",
    "webhookUrl": "",
    "products": [
      {
        "name": "암브로시아",
        "price": "880000",
        "qty": 1.0,
        "desc": "WEBPAY"
      }
    ],
    "mode": "layer",
    "nick": "",
    "authorization": "pk_67ea-5238fb-27d-a7b85",
    "widgetLogoUrl": "",
    "apiMaxInstall": 12,
    "payRoute": "regular",
    "salesId": "",
    "semiAuth": "Y",
    "payerTel": "85070194 ",
    "payerName": "정순철",
    "debugMode": "live",
    "payerEmail": ""
  }
}],[text/html]

09:03:00.805 INFO  c.p.p.proc.Proc - estimatedTime : 1
09:03:00.805 INFO  c.p.p.proc.Proc - ========== ========== ========== ========== ========== setResponse2() - END
09:03:00.805 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== apiHandler END
09:03:37.533 INFO  c.p.p.m.Listener - ========== apiHandler
09:03:37.534 INFO  c.p.p.m.Listener - ========== log() - HTTP_1_0,/api/pay,POST,175.196.61.18,application/json,419,Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36
09:03:37.534 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== apiHandler() - BEGIN
09:03:37.535 INFO  c.p.l.v.m.VertXUtil - req : [{"pay":{"trxType":"ONTR","tmnId":"HKH000728","trackId":"TS8387711513755","amount":"880000","payerName":"정순철","payerEmail":"","payerTel":"85070194","udf1":"","udf2":"","webhookUrl":"","products":[{"name":"암브로시아","price":"880000","qty":1,"desc":"WEBPAY"}],"card":{"number":"451842******6390","expiry":"2411","installment":"5"},"metadata":{"cardAuth":"true","authPw":"01","authDob":"621210"},"salesId":""}}],[419]
09:03:37.537 INFO  c.p.p.main.Api - ========== apiHandler() -  uri : /api/pay, method : POST, ip : 175.196.61.18
09:03:37.537 INFO  c.p.l.v.m.VertXUtil - req : [{"pay":{"trxType":"ONTR","tmnId":"HKH000728","trackId":"TS8387711513755","amount":"880000","payerName":"정순철","payerEmail":"","payerTel":"85070194","udf1":"","udf2":"","webhookUrl":"","products":[{"name":"암브로시아","price":"880000","qty":1,"desc":"WEBPAY"}],"card":{"number":"451842******6390","expiry":"2411","installment":"5"},"metadata":{"cardAuth":"true","authPw":"01","authDob":"621210"},"salesId":""}}],[419]
09:03:37.539 DEBUG c.p.l.u.d.DBManager - query : [UPDATE PG_SEQUENCE SET processcnt=?,prevday=? WHERE  idx = 1] 
09:03:37.543 DEBUG c.p.lib.dao.DAO - elapsedTime : [4]msec
09:03:37.543 INFO  c.p.p.d.TrxDAO - ========== GetCurrentFromCalendar - 페어링 주문번호 DB 저장 OK : glb_processcnt = 7 |  glb_prevday = 20230228
09:03:37.543 INFO  c.p.p.main.Api - ========== apiHandler() ========== trixId : T230228000007
09:03:37.543 INFO  c.p.l.v.m.VertXUtil - req : [{"pay":{"trxType":"ONTR","tmnId":"HKH000728","trackId":"TS8387711513755","amount":"880000","payerName":"정순철","payerEmail":"","payerTel":"85070194","udf1":"","udf2":"","webhookUrl":"","products":[{"name":"암브로시아","price":"880000","qty":1,"desc":"WEBPAY"}],"card":{"number":"451842******6390","expiry":"2411","installment":"5"},"metadata":{"cardAuth":"true","authPw":"01","authDob":"621210"},"salesId":""}}],[419]
09:03:37.543 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== authorization() - BEGIN
09:03:37.543 INFO  c.p.p.main.Api - ========== authorization() - trxId : T230228000007 | mchtId : 
09:03:37.543 INFO  c.p.p.main.Api - ========== ========== ========== ==========  ========== syntax() - BEGIN
09:03:37.544 INFO  c.p.p.main.Api - ========== syntax() - trxId : T230228000007 | mchtId : 
09:03:37.544 INFO  c.p.p.main.Api - ========== ========== ========== ==========  ========== syntax() - END
09:03:37.544 INFO  c.p.p.d.TrxDAO - ========== getMchtTmnByPayKey() - payKey : pk_67ea-5238fb-27d-a7b85
09:03:37.544 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_MCHT_TMN WHERE  payKey = 'pk_67ea-5238fb-27d-a7b85' ORDER BY regDate DESC] 
09:03:37.545 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
09:03:37.545 INFO  c.p.p.d.TrxDAO - ========== getMchtByMchtId() - mchtId : lsg1712
09:03:37.545 INFO  c.p.p.d.TrxDAO - ========== getMchtMngByMchtId() - mchtId : lsg1712
09:03:37.545 INFO  c.p.p.main.Api - sharedObject - mcht : 44
09:03:37.545 INFO  c.p.p.main.Api - sharedObject - mchtTmn : 24
09:03:37.545 INFO  c.p.p.main.Api - sharedObject - mchtMng : 52
09:03:37.545 INFO  c.p.p.d.TrxDAO - ========== getMchtTmnByVanIdx2() - vanIdx : 366 mchtId : lsg1712
09:03:37.545 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM VW_MCHT_TMN WHERE  vanIdx = 366 AND mchtId = 'lsg1712' ORDER BY regDate DESC] 
09:03:37.546 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
09:03:37.546 INFO  c.p.p.d.TrxDAO - ========== getVanByVanIdx2() - vanIdx : 366
09:03:37.546 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_VAN WHERE  idx = '366' ORDER BY regDate DESC] 
09:03:37.546 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:03:37.546 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== authorization() - END
09:03:37.546 INFO  c.p.p.main.Api - ========== apiHandler() - trxId : T230228000007 | mchtId : lsg1712 - Proc process SET
09:03:37.546 INFO  c.p.p.p.ProcPay - ========== ========== ========== ========== ========== exec() - BEGIN 
09:03:37.546 INFO  c.p.p.p.ProcPay - ========== ========== ========== ========== ========== exec() - set2() - BEGIN 
09:03:37.546 INFO  c.p.p.p.ProcPay - ========== exec() - trxId : T230228000007 | mchtId : lsg1712
09:03:37.546 INFO  c.p.p.p.ProcPay - ========== exec() - trxId : T230228000007 | mchtMap mchtId : lsg1712
09:03:37.546 INFO  c.p.p.p.ProcPay - ========== ========== ========== ========== ========== valid2() - BEGIN 
09:03:37.547 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 - sharedMap - mchtId : lsg1712
09:03:37.547 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 - sales_mchtTmnMap - vanIdx : 366
09:03:37.547 INFO  c.p.p.d.TrxDAO - ========== getVanByVanIdx2() - vanIdx : 366
09:03:37.547 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_VAN WHERE  idx = '366' ORDER BY regDate DESC] 
09:03:37.547 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:03:37.547 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 - vanMap - vanId  : wel000455m
09:03:37.547 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 - card_number : 451842******6390
09:03:37.547 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 - card_bin : 451842
09:03:37.547 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 - card_last4 : 6390
09:03:37.547 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 - sharedMap mchtId : lsg1712
09:03:37.547 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 - card_bin : 451842
09:03:37.548 INFO  c.p.p.d.TrxDAO - ========== getBinlockListCount() - name : lsg1712 - bin : 451842
09:03:37.548 DEBUG c.p.l.u.d.DBManager - query : [SELECT COUNT(*) AS cnt FROM tbl_binlock_list WHERE  used = 1 AND d_tm IS NULL AND name = 'lsg1712' AND bin = '451842'] 
09:03:37.548 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:03:37.548 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 - binBlockListCount_mchtId : 0
09:03:37.548 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 - request.pay.mchtId : lsg1712
09:03:37.548 INFO  c.p.p.d.TrxDAO - ========== getBinlockListCount() - name : wel000455m - bin : 451842
09:03:37.548 DEBUG c.p.l.u.d.DBManager - query : [SELECT COUNT(*) AS cnt FROM tbl_binlock_list WHERE  used = 1 AND d_tm IS NULL AND name = 'wel000455m' AND bin = '451842'] 
09:03:37.548 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:03:37.548 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 - binBlockListCount_vanId : 0
09:03:37.549 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 - vanMap vanId : wel000455m
09:03:37.549 INFO  c.p.p.p.ProcPay - 
09:03:37.549 INFO  c.p.p.p.ProcPay - ========== valid2() - 카드별 PG상점ID 조회
09:03:37.549 INFO  c.p.p.d.TrxDAO - ========== getVanByBrand() - bin : 451842
09:03:37.549 DEBUG c.p.l.u.d.DBManager - query : [SELECT A.* FROM PG_VAN A JOIN (SELECT * FROM PG_CODE_BIN WHERE bin = 451842 GROUP BY brand) B ON A.brand = B.brand WHERE A.status = '사용' ] 
09:03:37.550 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
09:03:37.550 INFO  c.p.p.p.ProcPay - ========== valid2() - vanBrandMap NULL
09:03:37.550 INFO  c.p.p.p.ProcPay - 
09:03:37.550 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 - salesId IS NULL
09:03:37.550 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 | request.pay.payerTel : 85070194
09:03:37.551 INFO  c.p.p.d.TrxDAO - ========== getMchtByMchtId2() - mchtId : lsg1712
09:03:37.551 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_MCHT WHERE  mchtId = 'lsg1712' ORDER BY regDate DESC] 
09:03:37.551 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:03:37.551 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 | 판매자, 구매자 전화번호 일치 체크 payerTel : 85070194 | tel1 : 025550894
09:03:37.551 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 | 판매자, 구매자 전화번호 일치 체크 payerTel : 85070194 | tel2 : 
09:03:37.551 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 | 판매자, 구매자 전화번호 일치 체크 payerTel : 85070194 | ceoPhone : 
09:03:37.551 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 | 판매자, 구매자 전화번호 일치 체크 payerTel : 85070194 | ceoTel : 01098778723
09:03:37.551 INFO  c.p.p.d.TrxDAO - ========== isDuplicatedTrackId() - 중복거래번호 확인 - mchtId : lsg1712 - trackId : TS8387711513755
09:03:37.551 INFO  c.p.p.d.TrxDAO - ========== insertTrxIOchk() - 중복거래번호 확인 - mchtId : lsg1712
09:03:37.554 INFO  c.p.p.d.TrxDAO - ========== insertTrxIOchk() - set PG_TRX_IO : true
09:03:37.554 INFO  c.p.p.d.TrxDAO - ========== getDBIssuer() - bin : 451842
09:03:37.554 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_CODE_BIN WHERE  bin = '451842' ORDER BY regDate DESC] 
09:03:37.554 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:03:37.554 INFO  c.p.p.d.TrxDAO - ========== insertCard() - cardId : card_1641-952cd1-488-04245 - value : Wn4yMwmxaxxArr/2pTdwOlDzW4aABZLLjj2HA0lTDcYFP+WSrqRvW5vBVZX+/Cf0BcyvTVhWiFpNhTCe1G3STuICN51GOgZUHQ8gjBKKPKCx77ww+jlIjpnq6/pQbseKmfv0/iI0nPB9jAMDVtoVM58bwde531L69+LzEnGizGTjGI2Ux9WWt57ieVRAO/bV70RHeoqHJqAZOnfSAOjT7h8wYw1ar7YYhXyrUI8im/jxXZNVSXao1tpQbLlf1T5yBE9fR7YFmTeRE/RGBl1xZnUlCnR0QcJ7lk4gyvAar73C4SQY7FA14bMYnmiETOiGcWiC6nUKVSH0Ka5F8BTNGFOrax+O51fqInv+LWcbeQDR8ohrhyWoK/bI23cY6oVW4hytEoby2CEYCo1eMzLsl7rAi8Rqgs0Q9sG6UXwDr/A=
09:03:37.554 DEBUG c.p.l.u.d.DBManager - query : [INSERT INTO PG_TRX_BOX (cardId,value) VALUES (?,?)] 
09:03:37.556 INFO  c.p.p.d.TrxDAO - ========== insertCard() - insertCard() - insert() : true
09:03:37.557 INFO  c.p.p.d.TrxDAO - ========== insertProduct() - prodId : pdt_fb0d-cac4d9-f44-b4892 - size : 1
09:03:37.557 DEBUG c.p.l.u.d.DBManager - query : [INSERT INTO PG_TRX_PRD (price,qty,name,description,regDate,mchtId,prodId) VALUES (?,?,?,?,?,?,?)] 
09:03:37.559 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
09:03:37.559 INFO  c.p.p.d.TrxDAO - ========== insertProduct() - PG_TRX_PRD insert() : 1, true
09:03:37.559 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 | 구인증 가맹점 | semiAuth : Y
09:03:37.559 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 - 신한 - 할부 개월수 : 5
09:03:37.559 INFO  c.p.p.d.TrxDAO - ========== getMchtInstall() 가맹점 할부기간정보 조회 - mchtId : lsg1712
09:03:37.559 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_MCHT_MNG WHERE  mchtId = 'lsg1712' ORDER BY regDate DESC] 
09:03:37.559 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:03:37.559 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 - mcht maxInstall : 12 cardInstall : 12
09:03:37.560 INFO  c.p.p.d.TrxDAO - ========== getVanInstall() PG사 할부기간정보 조회 - mchtId : lsg1712 | vanIdx : lsg1712
09:03:37.560 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM VW_MCHT_TMN WHERE  mchtId = 'lsg1712' AND webPay = '사용' AND vanIdx = 366 ORDER BY regDate DESC] 
09:03:37.560 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:03:37.560 INFO  c.p.p.p.ProcPay - ========== valid2() - 카드별 PG상점ID X
09:03:37.560 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 - van maxInstall : 12
09:03:37.560 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall01 : 12
09:03:37.560 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall02 : 12
09:03:37.560 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall03 : 12
09:03:37.561 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall04 : 12
09:03:37.561 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall05 : 12
09:03:37.561 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall06 : 12
09:03:37.561 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall07 : 12
09:03:37.561 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall08 : 12
09:03:37.561 INFO  c.p.p.p.ProcPay - ========== valid2() - van cardInstall09 : 12
09:03:37.561 INFO  c.p.p.p.ProcPay - ========== valid2() - request.pay.card.installment : 5
09:03:37.561 INFO  c.p.p.p.ProcPay - ========== 일시불, 할부결제 가능
09:03:37.561 INFO  c.p.p.d.TrxDAO - ========== getTrxTmnDaySum() 
09:03:37.561 DEBUG c.p.l.u.d.DBManager - query : [ SELECT IFNULL(SUM(amount),0) as tmnDailySum FROM PG_TRX_CAP  WHERE DATE_FORMAT(regDay,'%Y%m%d') = DATE_FORMAT(now(),'%Y%m%d') AND tmnId = 'HKH000728'] 
09:03:37.562 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
09:03:37.562 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 | tmnDailySum : 150000
09:03:37.562 INFO  c.p.p.d.TrxDAO - ========== getTrxTmnMonthSum() 
09:03:37.562 DEBUG c.p.l.u.d.DBManager - query : [ SELECT IFNULL(SUM(amount),0) as tmnMonthSum FROM PG_TRX_CAP  WHERE DATE_FORMAT(regDay,'%Y%m') = DATE_FORMAT(now(),'%Y%m') AND tmnId = 'HKH000728' ] 
09:03:37.563 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
09:03:37.563 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 | limitMonth : 28058500
09:03:37.563 INFO  c.p.p.d.TrxDAO - ========== getTrxTmnYearSum() 
09:03:37.563 DEBUG c.p.l.u.d.DBManager - query : [ SELECT IFNULL(SUM(amount),0) as tmnYearSum FROM PG_TRX_CAP  WHERE DATE_FORMAT(regDay,'%Y') = DATE_FORMAT(now(),'%Y') AND tmnId = 'HKH000728' ] 
09:03:37.563 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:03:37.563 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 | limitYear : 73428500
09:03:37.883 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 | limitDay :  0 SUM : 150000
09:03:37.884 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 | limitMonth :  300000000 SUM : 28058500
09:03:37.884 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 | limitYear :  0 SUM : 73428500
09:03:37.884 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 - 가맹점 건 한도 적용여부 limitOncePermit : N - 건 한도 limitOnce : 3000000
09:03:37.884 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 - 가맹점 일 한도 적용여부 limitDayPermit : N - 일 한도 limitDay : 0
09:03:37.884 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 - 가맹점 월 한도 적용여부 limitMonthPermit : H - 월 한도 limitMonth : 300000000
09:03:37.884 INFO  c.p.p.p.ProcPay - ========== valid2() - trxId : T230228000007 - 가맹점 년 한도 적용여부 limitYearPermit : N - 년 한도 limitYear : 0
09:03:37.884 INFO  c.p.p.d.TrxDAO - ========== getHighRiskTmn() - tmnId : HKH000728 - acquirer : 신한
09:03:37.884 DEBUG c.p.l.u.d.DBManager - query : [SELECT amount FROM PG_MCHT_TMN_HIGH_RISK WHERE  tmnId = 'HKH000728' AND acquirer LIKE '%신한%' ORDER BY regDate DESC LIMIT 1] 
09:03:37.884 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:03:37.884 INFO  c.p.p.p.ProcPay - ========== ========== ========== ========== ========== valid2() - END
09:03:37.885 INFO  c.p.p.p.ProcPay - ========== ========== ========== ========== ========== exec() - set2() - END 
09:03:37.885 INFO  c.p.p.p.ProcPay - ========== exec() - trxId : T230228000007 | mchtId : lsg1712
09:03:37.885 INFO  c.p.p.d.TrxDAO - ========== insertTrxREQ() 
09:03:37.885 DEBUG c.p.l.u.d.DBManager - query : [INSERT INTO PG_TRX_REQ (last4,amount,tmnId,trackId,bin,cardType,regDate,trxType,prodId,acquirer,trxId,issuer,regDay,compNo,regTime,salesId,cardId,installment,payerTel,mchtId,payerName,payerEmail,compMember) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)] 
09:03:37.887 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
09:03:37.887 INFO  c.p.p.d.TrxDAO - ========== insertTrxREQ() - insert() : true, T230228000007
09:03:37.887 INFO  c.p.p.p.ProcPay - 
09:03:37.887 INFO  c.p.p.p.ProcPay - ========== exec() - 카드별 PG상점ID관리 조회
09:03:37.887 INFO  c.p.p.d.TrxDAO - ========== getVanByBrand() - bin : 451842
09:03:37.887 DEBUG c.p.l.u.d.DBManager - query : [SELECT A.* FROM PG_VAN A JOIN (SELECT * FROM PG_CODE_BIN WHERE bin = 451842 GROUP BY brand) B ON A.brand = B.brand WHERE A.status = '사용' ] 
09:03:37.889 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
09:03:37.889 INFO  c.p.p.p.ProcPay - ========== valid2() - vanBrandMap NULL
09:03:37.889 INFO  c.p.p.d.TrxDAO - ========== getMchtTmnByVanIdx() - vanIdx : 366 mchtId : lsg1712
09:03:37.889 INFO  c.p.p.p.ProcPay - 
09:03:37.889 INFO  c.p.p.p.ProcPay - ========== exec() - van : WELCOME
09:03:37.889 INFO  c.p.p.p.ProcPay - ========== exec() - 9 van : WELCOME | check semiAuth : Y
09:03:37.889 INFO  c.p.p.p.ProcPay - ========== exec() - 10 WELCOME - 인증결제 X
09:03:37.889 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== ========== VAN SET 
09:03:37.889 INFO  c.p.p.v.Welcome - ========== ========== ========== Welcome VAN : WELCOME
09:03:37.889 INFO  c.p.p.v.Welcome - ========== ========== ========== Welcome MID vanId : wel000455m
09:03:37.889 INFO  c.p.p.v.Welcome - ========== ========== ========== Welcome APIKEY : 820b408bd2c1cfc4d59cb25203790f25
09:03:37.889 INFO  c.p.p.v.Welcome - ========== ========== ========== Welcome IV_VALUE : f9f4e1f06edc41bddd1eaedb75806668
09:03:37.889 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== ========== VAN SET 
09:03:37.889 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== ========== sales() - trxId : T230228000007 - WELCOME BEGIN
09:03:37.890 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== WELCOME VAN RESET
09:03:37.890 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000007 - WELCOME MAP_VAN : WELCOME
09:03:37.890 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000007 - WELCOME MAP_VAN_ID : wel000455m
09:03:37.890 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000007 - WELCOME MAP_APIKEY : 820b408bd2c1cfc4d59cb25203790f25
09:03:37.890 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000007 - WELCOME MAP_IV_VALUE : f9f4e1f06edc41bddd1eaedb75806668
09:03:37.890 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000007 - WELCOME cardNo : 451842******6390
09:03:37.890 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000007 - WELCOME 웰컴 구인증 결제 payMedhod : CREDIT_OLDAUTH_API
09:03:37.890 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000007 - WELCOME value : wel000455mCREDIT_CARDCREDIT_OLDAUTH_APIT2302280000078800001677542617890820b408bd2c1cfc4d59cb25203790f25
09:03:37.890 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000007 - WELCOME hash_value : 6b04503b5b8bdcddf43acf8a890987ab5042d8ec3d37ff466403ab706b656067
09:03:37.890 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000007 - WELCOME authPw 구인증 비밀번호 : 01
09:03:37.890 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000007 - WELCOME authPw Enc : debd1e684e596ce0c20ac6918cd835c3
09:03:37.890 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000007 - WELCOME authDob 구인증 생년월일 : 621210
09:03:37.891 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000007 - WELCOME authDob Enc : 1f4b9f684e6b5971878d4226c6e12164
09:03:37.891 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000007 - WELCOME Req_Msg : {order_no=T230228000007, amount=880000, user_name=정순철, mid=wel000455m, echo=, pay_method=CREDIT_OLDAUTH_API, product_name=암브로시아, card_holder_ymd=1f4b9f684e6b5971878d4226c6e12164, card_pw=debd1e684e596ce0c20ac6918cd835c3, card_no=39f32b247641a20b5b4a275b6e9222df11b407a3624664dd1221fadb225846a2, pay_type=CREDIT_CARD, card_sell_mm=05, millis=1677542617890, hash_value=6b04503b5b8bdcddf43acf8a890987ab5042d8ec3d37ff466403ab706b656067, card_expiry_ym=2411}
09:03:37.891 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000007 - WELCOME van : WELCOME - vanId : wel000455m
09:03:37.891 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== getJsonString() - jsonObject.toJSONString : {"order_no":"T230228000007","amount":"880000","user_name":"정순철","mid":"wel000455m","echo":"","pay_method":"CREDIT_OLDAUTH_API","product_name":"암브로시아","card_holder_ymd":"1f4b9f684e6b5971878d4226c6e12164","card_pw":"debd1e684e596ce0c20ac6918cd835c3","card_no":"39f32b247641a20b5b4a275b6e9222df11b407a3624664dd1221fadb225846a2","pay_type":"CREDIT_CARD","card_sell_mm":"05","millis":"1677542617890","hash_value":"6b04503b5b8bdcddf43acf8a890987ab5042d8ec3d37ff466403ab706b656067","card_expiry_ym":"2411"}
09:03:37.891 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange() - BEGIN
09:03:37.891 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange() - url : https://payapi.welcomepayments.co.kr/api/payment/approval
09:03:37.892 DEBUG c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange() headers : [Content-Type:"application/json;charset=UTF-8"]
09:03:37.892 DEBUG o.s.w.c.RestTemplate - HTTP POST https://payapi.welcomepayments.co.kr/api/payment/approval
09:03:37.892 DEBUG o.s.w.c.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
09:03:37.892 DEBUG o.s.w.c.RestTemplate - Writing [{"order_no":"T230228000007","amount":"880000","user_name":"정순철","mid":"wel000455m","echo":"","pay_method":"CREDIT_OLDAUTH_API","product_name":"암브로시아","card_holder_ymd":"1f4b9f684e6b5971878d4226c6e12164","card_pw":"debd1e684e596ce0c20ac6918cd835c3","card_no":"39f32b247641a20b5b4a275b6e9222df11b407a3624664dd1221fadb225846a2","pay_type":"CREDIT_CARD","card_sell_mm":"05","millis":"1677542617890","hash_value":"6b04503b5b8bdcddf43acf8a890987ab5042d8ec3d37ff466403ab706b656067","card_expiry_ym":"2411"}] as "application/json;charset=UTF-8"
09:03:40.814 DEBUG o.s.w.c.RestTemplate - Response 200 OK
09:03:40.815 DEBUG o.s.w.c.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
09:03:40.815 DEBUG c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange Exception - entity : 
<{"order_no":"T230228000007","amount":"880000","user_name":"정순철","mid":"wel000455m","echo":"","pay_method":"CREDIT_OLDAUTH_API","product_name":"암브로시아","card_holder_ymd":"1f4b9f684e6b5971878d4226c6e12164","card_pw":"debd1e684e596ce0c20ac6918cd835c3","card_no":"39f32b247641a20b5b4a275b6e9222df11b407a3624664dd1221fadb225846a2","pay_type":"CREDIT_CARD","card_sell_mm":"05","millis":"1677542617890","hash_value":"6b04503b5b8bdcddf43acf8a890987ab5042d8ec3d37ff466403ab706b656067","card_expiry_ym":"2411"},[Content-Type:"application/json;charset=UTF-8"]>
09:03:40.816 DEBUG c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange Exception - response NOT NULL : <200,{"transactionType":"AUTH","result_code":"0000","result_message":"카드 결제 성공","mid":"wel000455m","order_no":"T230228000007","user_name":"정순철","amount":"880000","product_name":"암브로시아","card_sell_mm":"05","echo":"","approval_no":"03744620","transaction_no":"202302284149932","approval_ymdhms":"20230228085905","card_code":"66","card_name":"신한"},[Date:"Mon, 27 Feb 2023 23:59:05 GMT", Content-Type:"application/json;charset=UTF-8", Content-Length:"371", Connection:"keep-alive", Set-Cookie:"SCOUTER=x318eu9au14tog;Max-Age=2147483647;path=/", Strict-Transport-Security:"max-age=31536000; includeSubdomains", X-Content-Type-Options:"nosniff", X-Frame-Options:"sameorigin"]>
09:03:40.817 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange() - END
09:03:40.818 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000007 - WELCOME apiExchange() res : <200,{"transactionType":"AUTH","result_code":"0000","result_message":"카드 결제 성공","mid":"wel000455m","order_no":"T230228000007","user_name":"정순철","amount":"880000","product_name":"암브로시아","card_sell_mm":"05","echo":"","approval_no":"03744620","transaction_no":"202302284149932","approval_ymdhms":"20230228085905","card_code":"66","card_name":"신한"},[Date:"Mon, 27 Feb 2023 23:59:05 GMT", Content-Type:"application/json;charset=UTF-8", Content-Length:"371", Connection:"keep-alive", Set-Cookie:"SCOUTER=x318eu9au14tog;Max-Age=2147483647;path=/", Strict-Transport-Security:"max-age=31536000; includeSubdomains", X-Content-Type-Options:"nosniff", X-Frame-Options:"sameorigin"]>
09:03:40.818 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000007 - WELCOME apiExchange() Status : 200 OK
09:03:40.819 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000007 - WELCOME apiExchange() body : {"transactionType":"AUTH","result_code":"0000","result_message":"카드 결제 성공","mid":"wel000455m","order_no":"T230228000007","user_name":"정순철","amount":"880000","product_name":"암브로시아","card_sell_mm":"05","echo":"","approval_no":"03744620","transaction_no":"202302284149932","approval_ymdhms":"20230228085905","card_code":"66","card_name":"신한"}
09:03:40.819 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000007 - WELCOME apiExchange() statusCode : 200
09:03:40.820 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000007 - WELCOME apiExchange() statusMessage : OK
09:03:40.820 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000007 - WELCOME res : <200,{"transactionType":"AUTH","result_code":"0000","result_message":"카드 결제 성공","mid":"wel000455m","order_no":"T230228000007","user_name":"정순철","amount":"880000","product_name":"암브로시아","card_sell_mm":"05","echo":"","approval_no":"03744620","transaction_no":"202302284149932","approval_ymdhms":"20230228085905","card_code":"66","card_name":"신한"},[Date:"Mon, 27 Feb 2023 23:59:05 GMT", Content-Type:"application/json;charset=UTF-8", Content-Length:"371", Connection:"keep-alive", Set-Cookie:"SCOUTER=x318eu9au14tog;Max-Age=2147483647;path=/", Strict-Transport-Security:"max-age=31536000; includeSubdomains", X-Content-Type-Options:"nosniff", X-Frame-Options:"sameorigin"]>
09:03:40.820 INFO  c.p.p.v.Welcome - ========== ========== sales() - trxId : T230228000007 - WELCOME connObj = connParser.parse(res.getBody()); - res.getBody() : {"transactionType":"AUTH","result_code":"0000","result_message":"카드 결제 성공","mid":"wel000455m","order_no":"T230228000007","user_name":"정순철","amount":"880000","product_name":"암브로시아","card_sell_mm":"05","echo":"","approval_no":"03744620","transaction_no":"202302284149932","approval_ymdhms":"20230228085905","card_code":"66","card_name":"신한"}
09:03:40.820 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== ========== sales() - trxId : T230228000007 - WELCOME END
09:03:40.820 INFO  c.p.p.p.ProcPay - ========== sharedMap issuer : 
09:03:40.820 INFO  c.p.p.p.ProcPay - ========== sharedMap cardAcquirer : 신한
09:03:40.820 INFO  c.p.p.p.ProcPay - ========== response issuer : 신한카드
09:03:40.820 INFO  c.p.p.p.ProcPay - ========== response acquirer : 신한
09:03:40.820 INFO  c.p.p.p.ProcPay - ========== 
09:03:40.820 INFO  c.p.p.p.ProcPay - ========== 비교결과 : 2741
09:03:40.821 INFO  c.p.p.p.ProcPay - ========== 리턴 카드사명 : [신한]
09:03:40.821 INFO  c.p.p.p.ProcPay - ========== 디비 카드사명 : code[020] cname[축협] calias[축협(농협)]
09:03:40.821 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -8576
09:03:40.821 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:03:40.821 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:03:40.821 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1317
09:03:40.821 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:03:40.821 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:03:40.821 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1821
09:03:40.821 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:03:40.821 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:03:40.821 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -8232
09:03:40.821 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:03:40.821 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:03:40.821 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -52554
09:03:40.821 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:03:40.822 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:03:40.822 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -6588
09:03:40.822 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:03:40.822 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:03:40.822 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -2741
09:03:40.822 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:03:40.822 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:03:40.822 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -2741
09:03:40.822 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:03:40.822 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:03:40.822 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -52551
09:03:40.822 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:03:40.822 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:03:40.822 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -2157
09:03:40.822 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:03:40.823 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:03:40.823 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1429
09:03:40.823 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:03:40.823 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:03:40.823 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -52551
09:03:40.823 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:03:40.823 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:03:40.823 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3277
09:03:40.823 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:03:40.823 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:03:40.823 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -2941
09:03:40.823 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:03:40.823 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:03:40.823 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -52554
09:03:40.823 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:03:40.823 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:03:40.824 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -2741
09:03:40.824 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:03:40.824 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:03:40.824 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1765
09:03:40.824 INFO  c.p.p.p.ProcPay - ========== issuer : 축협(농협)카드
09:03:40.824 INFO  c.p.p.p.ProcPay - ========== acquirer : 축협(농협)
09:03:40.824 INFO  c.p.p.p.ProcPay - ========== 
09:03:40.824 INFO  c.p.p.p.ProcPay - ========== 비교결과 : 1987
09:03:40.824 INFO  c.p.p.p.ProcPay - ========== 리턴 카드사명 : [축협(농협)]
09:03:40.824 INFO  c.p.p.p.ProcPay - ========== 디비 카드사명 : code[016] cname[하나] calias[하나]
09:03:40.824 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -8575
09:03:40.824 INFO  c.p.p.p.ProcPay - ========== issuer : 하나카드
09:03:40.824 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나
09:03:40.824 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3164
09:03:40.824 INFO  c.p.p.p.ProcPay - ========== issuer : 하나카드
09:03:40.824 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나
09:03:40.825 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3304
09:03:40.825 INFO  c.p.p.p.ProcPay - ========== issuer : 하나카드
09:03:40.825 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나
09:03:40.825 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -5908
09:03:40.825 INFO  c.p.p.p.ProcPay - ========== issuer : 하나카드
09:03:40.825 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나
09:03:40.825 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -54541
09:03:40.825 INFO  c.p.p.p.ProcPay - ========== issuer : 하나카드
09:03:40.825 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나
09:03:40.825 INFO  c.p.p.p.ProcPay - ========== 
09:03:40.825 INFO  c.p.p.p.ProcPay - ========== 비교결과 : 4
09:03:40.825 INFO  c.p.p.p.ProcPay - ========== 리턴 카드사명 : [하나]
09:03:40.825 INFO  c.p.p.p.ProcPay - ========== 디비 카드사명 : code[003] cname[하나(외환)] calias[하나(외환)]
09:03:40.825 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -5276
09:03:40.825 INFO  c.p.p.p.ProcPay - ========== issuer : 하나(외환)카드
09:03:40.826 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나(외환)
09:03:40.826 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -4728
09:03:40.826 INFO  c.p.p.p.ProcPay - ========== issuer : 하나(외환)카드
09:03:40.826 INFO  c.p.p.p.ProcPay - ========== acquirer : 하나(외환)
09:03:40.826 INFO  c.p.p.p.ProcPay - ========== 
09:03:40.826 INFO  c.p.p.p.ProcPay - ========== 비교결과 : 172
09:03:40.826 INFO  c.p.p.p.ProcPay - ========== 리턴 카드사명 : [하나(외환)]
09:03:40.826 INFO  c.p.p.p.ProcPay - ========== 디비 카드사명 : code[007] cname[현대] calias[현대]
09:03:40.826 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -7573
09:03:40.826 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.826 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.826 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -168
09:03:40.826 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.826 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.826 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -2159
09:03:40.826 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.827 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.827 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -10483
09:03:40.827 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.827 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.827 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3584
09:03:40.827 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.827 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.827 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3560
09:03:40.827 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.827 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.827 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -5460
09:03:40.827 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.827 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.827 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -144
09:03:40.827 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.827 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.828 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -144
09:03:40.828 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.828 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.828 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -144
09:03:40.828 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.828 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.828 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -144
09:03:40.828 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.828 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.828 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -144
09:03:40.828 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.828 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.828 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -54705
09:03:40.828 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.828 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.829 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3924
09:03:40.829 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.829 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.829 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3588
09:03:40.829 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.829 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.829 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -3780
09:03:40.829 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.829 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.829 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -5436
09:03:40.829 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.829 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.829 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -54713
09:03:40.829 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.829 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.829 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1936
09:03:40.830 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.830 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.830 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1796
09:03:40.830 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.830 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.830 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -54708
09:03:40.830 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.830 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.830 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -1936
09:03:40.830 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.830 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.830 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -54705
09:03:40.830 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.830 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.830 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -9440
09:03:40.830 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.831 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.831 INFO  c.p.p.p.ProcPay - ========== 비교결과 : -9335
09:03:40.831 INFO  c.p.p.p.ProcPay - ========== issuer : 현대카드
09:03:40.831 INFO  c.p.p.p.ProcPay - ========== acquirer : 현대
09:03:40.831 INFO  c.p.p.d.TrxDAO - ========== insertTrxRES() 
09:03:40.831 INFO  c.p.p.d.TrxDAO - ========== insertTrxRES() - van : WELCOME
09:03:40.831 INFO  c.p.p.d.TrxDAO - ========== insertTrxRES() - vanId : wel000455m
09:03:40.831 INFO  c.p.p.d.TrxDAO - ========== insertTrxRES() - salesId : 
09:03:40.831 DEBUG c.p.l.u.d.DBManager - query : [INSERT INTO PG_TRX_RES (resultCd,van,vanTrxId,authCd,regDate,pairingCid,trxId,resultMsg,regDay,compNo,pairingVtid,pairingRouteVan,vanId,regTime,salesId,vanResultMsg,vanResultCd,compMember) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)] 
09:03:40.835 DEBUG c.p.lib.dao.DAO - elapsedTime : [4]msec
09:03:40.835 INFO  c.p.p.d.TrxDAO - ========== insertTrxRES() - insert() : true
09:03:40.835 INFO  c.p.p.d.TrxDAO - ========== insertTrxPAY() 
09:03:40.835 INFO  c.p.p.d.TrxDAO - INSERT INTO PG_TRX_PAY 
(trxId, mchtId, tmnId, trackId, payerName, 
payerEmail, payerTel, amount, installment, cardId, 
cardType, BIN, last4, status, prodId, 
issuer, acquirer, reqDay, reqTime, authCd, 
resultCd, resultMsg, van, vanId, vanTrxId, 
cyrexVtid, cyrexRouteVan, cyrexCid, regDay, regTime, 
regDate, reqDate, compNo, compMember, semiAuth, 
salesId, cancelType ) 
SELECT A.trxId, mchtId, tmnId, trackId, payerName, 
payerEmail, payerTel, amount, installment, cardId, 
cardType, bin, last4, '승인', prodId, 
issuer, acquirer,  A.regDay, A.regTime, authCd, 
resultCd, resultMsg, van, vanId, vanTrxId, 
B.pairingVtid, B.pairingRouteVan, B.pairingCid, B.regDay, B.regTime, 
B.regDate, A.regDate,  A.compNo,  A.compMember,  A.semiAuth,  
A.salesId, '' 
FROM PG_TRX_REQ A, PG_TRX_RES B 
WHERE A.trxId = B.trxId AND A.trxId = 'T230228000007'; 
09:03:40.835 DEBUG c.p.l.u.d.DBManager - query : [INSERT INTO PG_TRX_PAY 
(trxId, mchtId, tmnId, trackId, payerName, 
payerEmail, payerTel, amount, installment, cardId, 
cardType, BIN, last4, status, prodId, 
issuer, acquirer, reqDay, reqTime, authCd, 
resultCd, resultMsg, van, vanId, vanTrxId, 
cyrexVtid, cyrexRouteVan, cyrexCid, regDay, regTime, 
regDate, reqDate, compNo, compMember, semiAuth, 
salesId, cancelType ) 
SELECT A.trxId, mchtId, tmnId, trackId, payerName, 
payerEmail, payerTel, amount, installment, cardId, 
cardType, bin, last4, '승인', prodId, 
issuer, acquirer,  A.regDay, A.regTime, authCd, 
resultCd, resultMsg, van, vanId, vanTrxId, 
B.pairingVtid, B.pairingRouteVan, B.pairingCid, B.regDay, B.regTime, 
B.regDate, A.regDate,  A.compNo,  A.compMember,  A.semiAuth,  
A.salesId, '' 
FROM PG_TRX_REQ A, PG_TRX_RES B 
WHERE A.trxId = B.trxId AND A.trxId = 'T230228000007'; ] 
09:03:40.838 DEBUG c.p.lib.dao.DAO - elapsedTime : [3]msec
09:03:40.838 INFO  c.p.p.d.TrxDAO - ========== insertTrxPAY - update() : true
09:03:40.838 INFO  c.p.p.p.ProcPay - ========== LAST issuer : 현대카드
09:03:40.838 INFO  c.p.p.p.ProcPay - ========== LAST acquirer : 현대
09:03:40.838 INFO  c.p.p.proc.Proc - ========== ========== ========== ========== ========== setResponse2() - BEGIN
09:03:40.838 INFO  c.p.p.proc.Proc - ========== setResponse2() - trxId : T230228000007
09:03:40.838 INFO  c.p.p.proc.Proc - ========== setResponse2() - trxId : T230228000007 - updateTrxIO() 
09:03:40.838 INFO  c.p.p.d.TrxDAO - ========== updateTrxIO()
09:03:40.839 DEBUG c.p.l.u.d.DBManager - query : [UPDATE PG_TRX_IO SET resDay=?,resTime=?,resData=?,status=? WHERE  trxId = 'T230228000007'] 
09:03:40.841 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
09:03:40.841 INFO  c.p.p.d.TrxDAO - ========== set TRX_IO : true
09:03:40.843 INFO  c.p.p.proc.Proc - ========== setResponse2() - trxId : T230228000007 - updateTrxReq() 
09:03:40.843 INFO  c.p.p.d.TrxDAO - ========== setResponse2() - updateTrxReq() 
09:03:40.843 DEBUG c.p.l.u.d.DBManager - query : [UPDATE PG_TRX_REQ SET semiAuth=? WHERE  trxId = 'T230228000007'] 
09:03:40.845 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
09:03:40.845 INFO  c.p.p.d.TrxDAO - ========== set PG_TRX_REQ : true
09:03:40.845 INFO  c.p.p.proc.Proc - ========== setResponse2() - trxId : T230228000007 - updateTrxPAY() 
09:03:40.845 INFO  c.p.p.d.TrxDAO - ========== setResponse2() - updateTrxPay() 
09:03:40.845 DEBUG c.p.l.u.d.DBManager - query : [UPDATE PG_TRX_PAY SET semiAuth=? WHERE  trxId = 'T230228000007'] 
09:03:40.847 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
09:03:40.847 INFO  c.p.p.d.TrxDAO - ========== set PG_TRX_PAY : true
09:03:40.848 INFO  c.p.l.v.m.VertXMessage - res : [{
  "result": {
    "resultCd": "0000",
    "resultMsg": "정상",
    "advanceMsg": "정상승인",
    "create": "20230228090340"
  },
  "pay": {
    "authCd": "03744620",
    "card": {
      "cardId": "card_1641-952cd1-488-04245",
      "installment": 5,
      "bin": "451842",
      "last4": "6390",
      "issuer": "현대카드",
      "cardType": "신용",
      "acquirer": "현대"
    },
    "trxDate": "20230228085905",
    "webhookUrl": "",
    "products": [
      {
        "prodId": "pdt_fb0d-cac4d9-f44-b4892",
        "name": "암브로시아",
        "qty": 1,
        "price": 880000,
        "desc": "WEBPAY",
        "mchtId": ""
      }
    ],
    "mchtId": "lsg1712",
    "salesId": "",
    "trxId": "T230228000007",
    "trxType": "ONTR",
    "tmnId": "HKH000728",
    "trackId": "TS8387711513755",
    "amount": 880000,
    "udf1": "",
    "udf2": "",
    "metadata": {
      "cardAuth": "true",
      "authPw": "01",
      "authDob": "621210"
    }
  }
}],[application/json]

09:03:40.848 INFO  c.p.p.proc.Proc - estimatedTime : 3301
09:03:40.848 INFO  c.p.p.proc.Proc - ========== ========== ========== ========== ========== setResponse2() - END
09:03:40.848 INFO  c.p.p.p.ProcPay - ========== ========== ========== ========== ========== exec() - END 
09:03:40.848 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== apiHandler END
09:07:18.991 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : {T230228000007=5, T230228000004=4}
09:07:18.991 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : T230228000007 : 4
09:07:18.992 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : T230228000004 : 3
09:12:18.991 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : {T230228000007=4, T230228000004=3}
09:12:18.992 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : T230228000007 : 3
09:12:18.992 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : T230228000004 : 2
09:17:18.991 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : {T230228000007=3, T230228000004=2}
09:17:18.991 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : T230228000007 : 2
09:17:18.992 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : T230228000004 : 1
09:22:18.991 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : {T230228000007=2, T230228000004=1}
09:22:18.992 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : T230228000007 : 1
09:22:19.005 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : T230228000004 : 0
09:27:18.991 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : {T230228000007=1, T230228000004=0}
09:27:18.991 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : T230228000007 : 0
09:32:18.991 INFO  c.p.p.m.TrxIdScheduler - TrxIdScheduler : trxIdPayMap : {T230228000007=0}
09:55:27.387 INFO  c.p.p.m.Listener - ========== apiHandler
09:55:27.387 INFO  c.p.p.m.Listener - ========== log() - HTTP_1_0,/api/refund,POST,222.237.78.137,application/json,238,Java/1.8.0_332
09:55:27.387 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== apiHandler() - BEGIN
09:55:27.387 INFO  c.p.l.v.m.VertXUtil - req : [{"refund":{"rootTrxId":"T230227000169","rootTrackId":"","rootTrxDay":"","authCd":"","trxId":"","trxType":"ONTR","tmnId":"HKH000552","trackId":"rfd_cc96-4e9a1e-917-4ab4c","amount":2200000,"udf1":"","udf2":"","metadata":{"grade":"본사"}}}],[238]
09:55:27.387 INFO  c.p.p.main.Api - ========== apiHandler() -  uri : /api/refund, method : POST, ip : 222.237.78.137
09:55:27.388 INFO  c.p.l.v.m.VertXUtil - req : [{"refund":{"rootTrxId":"T230227000169","rootTrackId":"","rootTrxDay":"","authCd":"","trxId":"","trxType":"ONTR","tmnId":"HKH000552","trackId":"rfd_cc96-4e9a1e-917-4ab4c","amount":2200000,"udf1":"","udf2":"","metadata":{"grade":"본사"}}}],[238]
09:55:27.388 DEBUG c.p.l.u.d.DBManager - query : [UPDATE PG_SEQUENCE SET processcnt=?,prevday=? WHERE  idx = 1] 
09:55:27.392 DEBUG c.p.lib.dao.DAO - elapsedTime : [4]msec
09:55:27.392 INFO  c.p.p.d.TrxDAO - ========== GetCurrentFromCalendar - 페어링 주문번호 DB 저장 OK : glb_processcnt = 8 |  glb_prevday = 20230228
09:55:27.392 INFO  c.p.p.main.Api - ========== apiHandler() ========== trixId : T230228000008
09:55:27.392 INFO  c.p.l.v.m.VertXUtil - req : [{"refund":{"rootTrxId":"T230227000169","rootTrackId":"","rootTrxDay":"","authCd":"","trxId":"","trxType":"ONTR","tmnId":"HKH000552","trackId":"rfd_cc96-4e9a1e-917-4ab4c","amount":2200000,"udf1":"","udf2":"","metadata":{"grade":"본사"}}}],[238]
09:55:27.392 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== authorization() - BEGIN
09:55:27.392 INFO  c.p.p.main.Api - ========== authorization() - trxId : T230228000008 | mchtId : 
09:55:27.393 INFO  c.p.p.main.Api - ========== ========== ========== ==========  ========== syntax() - BEGIN
09:55:27.393 INFO  c.p.p.main.Api - ========== syntax() - trxId : T230228000008 | mchtId : 
09:55:27.393 INFO  c.p.p.main.Api - ========== ========== ========== ==========  ========== syntax() - END
09:55:27.393 INFO  c.p.p.d.TrxDAO - ========== getMchtTmnByPayKey() - payKey : pk_cd9e-ef7888-fe9-97319
09:55:27.393 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_MCHT_TMN WHERE  payKey = 'pk_cd9e-ef7888-fe9-97319' ORDER BY regDate DESC] 
09:55:27.394 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
09:55:27.394 INFO  c.p.p.d.TrxDAO - ========== getMchtByMchtId() - mchtId : sig1
09:55:27.394 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_MCHT WHERE  mchtId = 'sig1' ORDER BY regDate DESC] 
09:55:27.394 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:55:27.394 INFO  c.p.l.u.m.SharedCacheMap - cache timeout : key : PG_CODE_BIN_625840 
09:55:27.395 INFO  c.p.l.u.m.SharedCacheMap - cache timeout : key : VW_MCHT_TMN_IDX_lsg1712_366 
09:55:27.395 INFO  c.p.p.d.TrxDAO - ========== getMchtMngByMchtId() - mchtId : sig1
09:55:27.395 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_MCHT_MNG WHERE  mchtId = 'sig1' ORDER BY regDate DESC] 
09:55:27.395 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:55:27.395 INFO  c.p.p.main.Api - sharedObject - mcht : 44
09:55:27.395 INFO  c.p.p.main.Api - sharedObject - mchtTmn : 24
09:55:27.395 INFO  c.p.p.main.Api - sharedObject - mchtMng : 52
09:55:27.395 INFO  c.p.p.d.TrxDAO - ========== getMchtTmnByVanIdx2() - vanIdx : 374 mchtId : sig1
09:55:27.395 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM VW_MCHT_TMN WHERE  vanIdx = 374 AND mchtId = 'sig1' ORDER BY regDate DESC] 
09:55:27.396 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
09:55:27.396 INFO  c.p.p.d.TrxDAO - ========== getVanByVanIdx2() - vanIdx : 374
09:55:27.396 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_VAN WHERE  idx = '374' ORDER BY regDate DESC] 
09:55:27.396 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:55:27.396 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== authorization() - END
09:55:27.396 INFO  c.p.p.main.Api - ========== apiHandler() - trxId : T230228000008 | mchtId : sig1 - Proc process SET
09:55:27.396 INFO  c.p.p.p.ProcRefund - ========== ========== ========== ========== ========== exec() - BEGIN
09:55:27.397 INFO  c.p.p.p.ProcRefund - ========== ========== ========== ========== ========== exec() - set2() - BEGIN 
09:55:27.397 INFO  c.p.p.p.ProcRefund - ========== exec() - trxId : T230228000008 | mchtId : sig1
09:55:27.397 INFO  c.p.p.p.ProcRefund - ========== exec() - trxId : T230228000008 | mchtMap mchtId : sig1
09:55:27.397 INFO  c.p.p.p.ProcRefund - ========== ========== ========== ========== ==========  valid2() - 실행 
09:55:27.397 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_TRX_IO WHERE  trxId = 'T230228000008' ORDER BY regDate DESC] 
09:55:27.397 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:55:27.397 INFO  c.p.p.p.ProcRefund - ========== valid2() - ROOT_TRX_ID  : HKH000552,T230227000169
09:55:27.397 INFO  c.p.p.d.TrxDAO - ========== getTrxPayByTrxId() - tmnId : HKH000552 / trxId T230227000169
09:55:27.397 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_TRX_PAY WHERE  trxId = 'T230227000169' AND tmnId = 'HKH000552' ORDER BY regDate DESC] 
09:55:27.398 DEBUG c.p.lib.dao.DAO - elapsedTime : [1]msec
09:55:27.398 INFO  c.p.p.p.ProcRefund - ========== valid2() - ROOT_TRX_ID: T230227000169
09:55:27.398 INFO  c.p.p.p.ProcRefund - ========== valid2() - ROOT_AMOUNT: 2200000
09:55:27.398 INFO  c.p.p.p.ProcRefund - ========== valid2() - ROOT_TRX_DAY: 20230227
09:55:27.398 INFO  c.p.p.p.ProcRefund - ========== valid2() - ROOT_VAN: WELCOME
09:55:27.398 INFO  c.p.p.p.ProcRefund - ========== valid2() - ROOT_VANID: wel000469m
09:55:27.398 INFO  c.p.p.p.ProcRefund - ========== valid2() -  salesId IS NULL
09:55:27.401 INFO  c.p.p.p.ProcRefund - ========== valid2() - REFUNDED_AMT: 0
09:55:27.401 INFO  c.p.p.p.ProcRefund - ========== valid2() - today :  20230228
09:55:27.401 INFO  c.p.p.p.ProcRefund - ========== valid2() - trxMap 원거래 regDay :  20230227
09:55:27.401 INFO  c.p.p.p.ProcRefund - ========== valid2() - 취소권한 refundRule :  TLID
09:55:27.401 INFO  c.p.p.d.TrxDAO - ========== getMchtInstall() 가맹점 할부기간정보 조회 - mchtId : sig1
09:55:27.401 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_MCHT_MNG WHERE  mchtId = 'sig1' ORDER BY regDate DESC] 
09:55:27.401 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:55:27.402 INFO  c.p.p.p.ProcRefund - 
09:55:27.402 INFO  c.p.p.p.ProcRefund - ========== valid2() - 취소권한 기존 체크
09:55:27.402 INFO  c.p.p.p.ProcRefund - ========== valid2() - 취소권한 체크 : TLID
09:55:27.402 INFO  c.p.p.p.ProcRefund - ========== valid2() - 취소처리 grade : 본사20230228
09:55:27.402 INFO  c.p.p.p.ProcRefund - ========== valid2() - RFD_ALL   : 전액
09:55:27.402 INFO  c.p.p.p.ProcRefund - ========== valid2() - RFD_TYPE  : 
09:55:27.402 INFO  c.p.p.p.ProcRefund - ========== ========== ========== ========== ========== exec() - END
09:55:27.402 INFO  c.p.p.p.ProcRefund - ========== ========== ========== ========== ========== exec() - set2() - END 
09:55:27.402 DEBUG c.p.p.p.ProcRefund - ========== exec() - trxDAO.insertTrxRFD 실행
09:55:27.402 INFO  c.p.p.d.TrxDAO - ========== response.refund.rootTrxId : T230227000169 ========== exec() - insertTrxRFD()
09:55:27.405 DEBUG c.p.lib.dao.DAO - elapsedTime : [2]msec
09:55:27.405 INFO  c.p.p.d.TrxDAO - ========== response.refund.rootTrxId : T230227000169 ========== exec() - insertTrxRFD() - insert() : true
09:55:27.405 INFO  c.p.p.d.TrxDAO - ========== getVanByVanId() - van : WELCOME / vanId : wel000469m
09:55:27.405 DEBUG c.p.l.u.d.DBManager - query : [SELECT * FROM PG_VAN WHERE  van = 'WELCOME' AND vanId = 'wel000469m' ORDER BY regDate DESC] 
09:55:27.405 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:55:27.405 INFO  c.p.l.u.m.SharedCacheMap - cache timeout : key : PG_MCHT_MNG_lsg1712 
09:55:27.406 INFO  c.p.l.u.m.SharedCacheMap - cache timeout : key : key_16775424669176c3abfa 
09:55:27.406 INFO  c.p.l.u.m.SharedCacheMap - cache timeout : key : PG_MCHT_lsg1712 
09:55:27.406 INFO  c.p.p.p.ProcRefund - ========== exec() - VAN : WELCOME
09:55:27.406 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== ========== VAN SET 
09:55:27.406 INFO  c.p.p.v.Welcome - ========== ========== ========== Welcome VAN : WELCOME
09:55:27.406 INFO  c.p.p.v.Welcome - ========== ========== ========== Welcome MID vanId : wel000469m
09:55:27.406 INFO  c.p.p.v.Welcome - ========== ========== ========== Welcome APIKEY : 1075cb76a3b1ecc8f7acef7f61d54564
09:55:27.406 INFO  c.p.p.v.Welcome - ========== ========== ========== Welcome IV_VALUE : 2f394883059b54c9ea5b60e46d9e66ca
09:55:27.406 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== ========== VAN SET 
09:55:27.406 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== ========== refund() - trxId : T230228000008 - WELCOME BEGIN
09:55:27.406 INFO  c.p.p.v.Welcome - ========== ========== refund() - vanTrxId : 202302274135378 - WELCOME 암호화할 문자열 value : wel000469mCANCEL202302274135378220000016775457274061075cb76a3b1ecc8f7acef7f61d54564
09:55:27.406 INFO  c.p.p.v.Welcome - ========== ========== refund() - vanTrxId : 202302274135378 - WELCOME 암호화할 문자열 hash_value : 65a70806bd926fe9ea19675d97eab101cfc0049c4ccaba11dd975ea4fb0020fa
09:55:27.407 INFO  c.p.p.v.Welcome - ========== ========== refund() - vanTrxId : 202302274135378 - WELCOME Req_Msg : {"amount":"2200000","cancel_reason":"결제취소 처리","user_id":"sig1","mid":"wel000469m","pay_type":"CREDIT_CARD","ip_address":"222.237.78.137","transaction_type":"CANCEL","millis":"1677545727406","hash_value":"65a70806bd926fe9ea19675d97eab101cfc0049c4ccaba11dd975ea4fb0020fa","transaction_no":"202302274135378"}
09:55:27.407 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== getJsonString() - jsonObject.toJSONString : {"amount":"2200000","cancel_reason":"결제취소 처리","user_id":"sig1","mid":"wel000469m","pay_type":"CREDIT_CARD","ip_address":"222.237.78.137","transaction_type":"CANCEL","millis":"1677545727406","hash_value":"65a70806bd926fe9ea19675d97eab101cfc0049c4ccaba11dd975ea4fb0020fa","transaction_no":"202302274135378"}
09:55:27.407 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange() - BEGIN
09:55:27.407 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange() - url : https://payapi.welcomepayments.co.kr/api/payment/cancel
09:55:27.408 DEBUG c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange() headers : [Content-Type:"application/json;charset=UTF-8"]
09:55:27.408 DEBUG o.s.w.c.RestTemplate - HTTP POST https://payapi.welcomepayments.co.kr/api/payment/cancel
09:55:27.408 DEBUG o.s.w.c.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
09:55:27.408 DEBUG o.s.w.c.RestTemplate - Writing [{"amount":"2200000","cancel_reason":"결제취소 처리","user_id":"sig1","mid":"wel000469m","pay_type":"CREDIT_CARD","ip_address":"222.237.78.137","transaction_type":"CANCEL","millis":"1677545727406","hash_value":"65a70806bd926fe9ea19675d97eab101cfc0049c4ccaba11dd975ea4fb0020fa","transaction_no":"202302274135378"}] as "application/json;charset=UTF-8"
09:55:27.641 DEBUG o.s.w.c.RestTemplate - Response 200 OK
09:55:27.642 DEBUG o.s.w.c.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
09:55:27.643 DEBUG c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange Exception - entity : 
<{"amount":"2200000","cancel_reason":"결제취소 처리","user_id":"sig1","mid":"wel000469m","pay_type":"CREDIT_CARD","ip_address":"222.237.78.137","transaction_type":"CANCEL","millis":"1677545727406","hash_value":"65a70806bd926fe9ea19675d97eab101cfc0049c4ccaba11dd975ea4fb0020fa","transaction_no":"202302274135378"},[Content-Type:"application/json;charset=UTF-8"]>
09:55:27.644 DEBUG c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange Exception - response NOT NULL : <200,{"result_code":"0000","result_message":"정상","pay_type":"CREDIT_CARD","transaction_no":"202302274135378","amount":"2200000","order_no":"T230227000169","cancel_amount":"2200000","remain_amount":"0","cancel_ymdhms":"20230228095052"},[Date:"Tue, 28 Feb 2023 00:50:52 GMT", Content-Type:"application/json;charset=UTF-8", Content-Length:"233", Connection:"keep-alive", Set-Cookie:"SCOUTER=x33jrsct1muan6;Max-Age=2147483647;path=/", Strict-Transport-Security:"max-age=31536000; includeSubdomains", X-Content-Type-Options:"nosniff", X-Frame-Options:"sameorigin"]>
09:55:27.644 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== apiExchange() - END
09:55:27.645 INFO  c.p.p.v.Welcome - ========== ========== refund() - vanTrxId : 202302274135378 - WELCOME res : <200,{"result_code":"0000","result_message":"정상","pay_type":"CREDIT_CARD","transaction_no":"202302274135378","amount":"2200000","order_no":"T230227000169","cancel_amount":"2200000","remain_amount":"0","cancel_ymdhms":"20230228095052"},[Date:"Tue, 28 Feb 2023 00:50:52 GMT", Content-Type:"application/json;charset=UTF-8", Content-Length:"233", Connection:"keep-alive", Set-Cookie:"SCOUTER=x33jrsct1muan6;Max-Age=2147483647;path=/", Strict-Transport-Security:"max-age=31536000; includeSubdomains", X-Content-Type-Options:"nosniff", X-Frame-Options:"sameorigin"]>
09:55:27.646 INFO  c.p.p.v.Welcome - ========== ========== refund() - vanTrxId : 202302274135378 - WELCOME Status : 200 OK
09:55:27.646 INFO  c.p.p.v.Welcome - ========== ========== refund() - vanTrxId : 202302274135378 - WELCOME body : {"result_code":"0000","result_message":"정상","pay_type":"CREDIT_CARD","transaction_no":"202302274135378","amount":"2200000","order_no":"T230227000169","cancel_amount":"2200000","remain_amount":"0","cancel_ymdhms":"20230228095052"}
09:55:27.647 INFO  c.p.p.v.Welcome - ========== ========== refund() - vanTrxId : 202302274135378 - WELCOME statusCode : 200
09:55:27.647 INFO  c.p.p.v.Welcome - ========== ========== refund() - vanTrxId : 202302274135378 - WELCOME statusMessage : OK
09:55:27.647 INFO  c.p.p.v.Welcome - ========== ========== refund() - vanTrxId : 202302274135378 - WELCOME res : <200,{"result_code":"0000","result_message":"정상","pay_type":"CREDIT_CARD","transaction_no":"202302274135378","amount":"2200000","order_no":"T230227000169","cancel_amount":"2200000","remain_amount":"0","cancel_ymdhms":"20230228095052"},[Date:"Tue, 28 Feb 2023 00:50:52 GMT", Content-Type:"application/json;charset=UTF-8", Content-Length:"233", Connection:"keep-alive", Set-Cookie:"SCOUTER=x33jrsct1muan6;Max-Age=2147483647;path=/", Strict-Transport-Security:"max-age=31536000; includeSubdomains", X-Content-Type-Options:"nosniff", X-Frame-Options:"sameorigin"]>
09:55:27.648 INFO  c.p.p.v.Welcome - ========== ========== refund() - vanTrxId : 202302274135378 - WELCOME connjObj : {"order_no":"T230227000169","amount":"2200000","cancel_amount":"2200000","result_message":"정상","result_code":"0000","pay_type":"CREDIT_CARD","remain_amount":"0","cancel_ymdhms":"20230228095052","transaction_no":"202302274135378"}
09:55:27.649 INFO  c.p.p.v.Welcome - ========== ========== ========== ========== ========== refund() - trxId : T230228000008 - WELCOME END
09:55:27.649 INFO  c.p.p.v.Welcome - van : WELCOME / vanId : wel000469m
09:55:27.650 INFO  c.p.p.v.Welcome - van sharedMap : WELCOME / vanId : wel000469m
09:55:27.650 INFO  c.p.p.v.Welcome - vanTrxId : : 202302274135378 / vanDate : 20230228095052
09:55:27.651 INFO  c.p.p.v.Welcome - 
09:55:27.651 INFO  c.p.p.d.TrxDAO - updateTrxRFD van : WELCOME
09:55:27.651 INFO  c.p.p.d.TrxDAO - updateTrxRFD vanId : wel000469m
09:55:27.652 DEBUG c.p.l.u.d.DBManager - query : [UPDATE PG_TRX_RFD SET vanTrxId=?,regDate=?,vanResultMsg=?,vanResultCd=?,resultCd=?,van=?,resultMsg=?,regDay=?,vanId=?,regTime=?,status=? WHERE  trxId = 'T230228000008'] 
09:55:27.658 DEBUG c.p.lib.dao.DAO - elapsedTime : [6]msec
09:55:27.658 INFO  c.p.p.d.TrxDAO - updateTrxRFD() - update() : true
09:55:27.658 DEBUG c.p.l.u.d.DBManager - query : [UPDATE PG_TRX_RFD_FORCE SET rfdDate=?,`status`=? WHERE  trxId = 'T230227000169'] 
09:55:27.658 DEBUG c.p.lib.dao.DAO - elapsedTime : [0]msec
09:55:27.658 INFO  c.p.p.d.TrxDAO - ========== getRootRiskChk() : 정산보류건 취소시, 정산보류 해제 조회 체크 trxId : T230227000169
09:55:27.658 INFO  c.p.p.d.TrxDAO - ========== getRootRiskChk(0 query : SELECT * FROM PG_TRX_CAP A JOIN PG_TRX_CAP_DTL B ON A.capId = B.capId WHERE B.risk != '' AND B.stlStatus = '정산대기' AND A.trxId = 'T230227000169' 
09:55:27.658 INFO  c.p.p.d.TrxDAO - ========== getRootRiskChk() : map : null
09:55:27.659 INFO  c.p.p.d.TrxDAO - ========== 원거래건 정산보류 가 아닙니다. 
09:55:27.659 INFO  c.p.p.proc.Proc - ========== ========== ========== ========== ========== setResponse2() - BEGIN
09:55:27.659 INFO  c.p.p.proc.Proc - ========== setResponse2() - trxId : T230228000008
09:55:27.659 INFO  c.p.l.v.m.VertXMessage - res : [{
  "result": {
    "resultCd": "0000",
    "resultMsg": "정상",
    "advanceMsg": "정상승인",
    "create": "20230228095527"
  },
  "refund": {
    "rootTrxId": "T230227000169",
    "rootTrackId": "TS3354974324740",
    "rootTrxDay": "20230227",
    "authCd": "",
    "trxDate": "20230228095052",
    "mchtId": "sig1",
    "trxId": "T230228000008",
    "trxType": "ONTR",
    "tmnId": "HKH000552",
    "trackId": "rfd_cc96-4e9a1e-917-4ab4c",
    "amount": 2200000,
    "udf1": "",
    "udf2": "",
    "metadata": {
      "grade": "본사"
    }
  }
}],[application/json]

09:55:27.659 INFO  c.p.p.proc.Proc - estimatedTime : 262
09:55:27.659 INFO  c.p.p.proc.Proc - ========== ========== ========== ========== ========== setResponse2() - END
09:55:27.659 INFO  c.p.p.main.Api - ========== ========== ========== ========== ========== apiHandler END
